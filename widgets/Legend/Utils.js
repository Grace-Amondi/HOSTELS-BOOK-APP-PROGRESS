// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/array","jimu/LayerInfos/LayerInfos"],function(c,g){var f=function(){var b=[],d=g.getInstanceSync().getLayerInfoArray();c.forEach(d,function(a){var e=[];a.getShowLegendOfWebmap()&&(!a.layerObject||"esri.layers.ArcGISDynamicMapServiceLayer"!==a.layerObject.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==a.layerObject.declaredClass||a.traversal(function(a){a.isLeaf()&&!a.getShowLegendOfWebmap()&&e.push(a.originOperLayer.mapService.subId)}),a.isMapNotesLayerInfo()?c.forEach(a.getSubLayers(),
function(a){b.push({layer:a.layerObject,title:"Map Notes - "+a.title})}):b.push({hideLayers:e,layer:a.layerObject,title:a.title}))});return b.reverse()},h=function(b,d){return c.filter(b.layerInfos,function(a){var b=!1;a.id===d&&(b=!0);return b})[0]};return{getLayerInfosParam:function(){return f()},getLayerInfosParamByConfig:function(b){var d=[],a;b.layerInfos&&b.layerInfos.length&&(a=f(),c.forEach(a,function(a){var c=h(b,a.jimuLayerInfo.id);c&&(a.hideLayers=c.hideLayers,d.push(a))}));return d}}});