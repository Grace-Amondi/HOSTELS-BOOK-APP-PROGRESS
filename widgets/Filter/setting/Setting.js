// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Filter/setting/SingleFilterSetting":function(){define("dojo/on dojo/query dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleFilterSetting.html jimu/utils jimu/dijit/Filter jimu/dijit/Message jimu/dijit/CheckBox jimu/dijit/LayerChooserFromMapWithDropbox ./CustomFeaturelayerChooserFromMap jimu/dijit/ImageChooser dijit/form/ValidationTextBox".split(" "),function(g,n,k,m,e,d,
c,h,l,q,p,b,a,f,w,u){return d([c,h,l,k],{baseClass:"jimu-widget-singlefilter-setting",templateString:q,jimuNls:null,_defaultTaskIcon:null,map:null,nls:null,target:null,layerInfosObj:null,folderUrl:"",appConfig:null,postMixInProperties:function(){this.inherited(arguments);this._defaultTaskIcon=this.folderUrl+"css/images/default_task_icon.png";this.jimuNls=window.jimuNls},postCreate:function(){this.inherited(arguments);this.cbxRemoveMapFilter=new f({label:this.nls.enableMapFilter||""});this.cbxRemoveMapFilter.placeAt(this.tdUseMapFilter);
this.cbxRemoveMapFilter.setValue(!1);this._recreateLayerChooserSelect(!0);this.filter=new b({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;"});this.filter.placeAt(this.filterDiv);this._setDefaultTaskIcon();this.own(g(this.filter,"filter-number-change",m.hitch(this,this.calculateExpsBoxMaxHeight)));this.calculateExpsBoxMaxHeight()},_recreateLayerChooserSelect:function(a){this.layerChooserSelect&&this.layerChooserSelect.destroy();this.layerChooserSelect=null;var b=new u({showLayerFromFeatureSet:!1,
showTable:!1,onlyShowVisible:!1,createMapResponse:this.map.webMapResponse});this.layerChooserSelect=new w({layerChooser:b});this.layerChooserSelect.placeAt(this.layerTd);a&&this._bindEventForLayerChooserSelect(this.layerChooserSelect)},showLayerChooserPopup:function(){this.layerChooserSelect.showLayerChooser()},destroy:function(){this.target=null;this.emit("before-destroy");this.inherited(arguments)},setConfig:function(a){var b=m.clone(a);this._showLoading();this.reset();this._recreateLayerChooserSelect(!1);
var f=m.hitch(this,function(){this.domNode&&(this._bindEventForLayerChooserSelect(this.layerChooserSelect),this._hideLoading())});this.layerInfosObj.getLayerInfoById(b.layerId).getLayerObject().then(m.hitch(this,function(a){this.domNode&&this.layerChooserSelect.setSelectedLayer(a).then(m.hitch(this,function(f){this.domNode&&(this._hideLoading(),f&&(b.icon?this.imageChooser.setDefaultSelfSrc(p.processUrlInWidgetConfig(b.icon,this.folderUrl)):this._setDefaultTaskIcon(),this.cbxRemoveMapFilter.setValue(!b.enableMapFilter),
this.nameTextBox.set("value",b.name),f=this._getLayerDefinitionForFilterDijit(a),this.filter.buildByFilterObj(a.url,b.filter,f),this._bindEventForLayerChooserSelect(this.layerChooserSelect)))}),m.hitch(this,function(a){console.error(a);f()}))}),m.hitch(this,function(a){console.error(a);f()}))},getConfig:function(){var a={layerId:null,url:null,name:null,filter:null,icon:null,enableMapFilter:!this.cbxRemoveMapFilter.getValue()},b=this.layerChooserSelect.getSelectedItem();if(!b)return this._showMessage(this.nls.selectLayerTip),
!1;b=b.layerInfo.layerObject;a.layerId=b.id;a.url=b.url;a.name=this.nameTextBox.get("value");if(!a.name)return this._showMessage(this.nls.setTitleTip),!1;b=this.imageChooser.getImageData();b===this._defaultTaskIcon&&(b="");a.icon=b;a.filter=this.filter.toJson();return a.filter?this.target.singleConfig=a:(this._showMessage(window.jimuNls.filterBuilder.setFilterTip),!1)},calculateExpsBoxMaxHeight:function(){setTimeout(m.hitch(this,function(){if(this.domNode){var a=this.filter.allExpsBox,b=e.position(this.domNode),
f=e.position(a),b=b.h-(f.y-b.y);0<b&&(a.style.maxHeight=b+"px")}}),100)},reset:function(){this._setDefaultTaskIcon();this.cbxRemoveMapFilter.setValue(!1);this.nameTextBox.set("value","");this.filter.reset()},_setDefaultTaskIcon:function(){this.imageChooser.setDefaultSelfSrc(this._defaultTaskIcon)},_onNameTextBoxChanged:function(){var a=n(".label",this.target)[0],b=this.nameTextBox.get("value");a.innerHTML=b;a.title=b},_bindEventForLayerChooserSelect:function(a){a.isBindEvent||(this.own(g(a,"selection-change",
m.hitch(this,this._onLayerChanged))),a.isBindEvent=!0)},_showMessage:function(b){new a({message:b})},_onLayerChanged:function(){this.reset();var a=this.layerChooserSelect.getSelectedItem();if(a){var b=a.layerInfo,a=b.layerObject;this.nameTextBox.set("value",b.title);b=this._getLayerDefinitionForFilterDijit(a);this.filter.buildByExpr(a.url,"1\x3d1",b)}},_getLayerDefinitionForFilterDijit:function(a){var b=null;"esri.layers.FeatureLayer"===a.declaredClass&&(b=p.getFeatureLayerDefinition(a));b||(b={currentVersion:a.currentVersion,
fields:m.clone(a.fields)});return b},_showLoading:function(){this.emit("loading")},_hideLoading:function(){this.emit("unloading")},_onImageChooserDivClicked:function(a){this.imageChooser.mask&&(a=a.target||a.srcElement,a!==this.imageChooser.mask&&a!==this.imageChooser.fileInput&&p.simulateClickEvent(this.imageChooser.mask))}})})},"jimu/dijit/Filter":function(){define("dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Filter.html jimu/filterUtils jimu/utils jimu/dijit/_filter/ValueProviderFactory dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/aspect dojo/query dojo/Deferred esri/request ./_SingleFilter ./_FilterSet ./LoadingIndicator".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b,a,f,w,u,r,v,x){return n([k,m,e,c,g],{templateString:d,baseClass:"jimu-filter",declaredClass:"jimu.dijit.Filter",nls:null,_validOptions:!1,_layerDefinition:null,_def:null,valueProviderFactory:null,noFilterTip:"",enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsg.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this.noFilterTip&&"string"===typeof this.noFilterTip&&(this.noFilterTipSection.innerHTML=this.noFilterTip)},reset:function(){this.isBuilding()||(this.removeAllFilters(),this.url=null,this.isHosted=!1,this.valueProviderFactory=this.partsObj=this.expr=this._layerDefinition=null)},isBuilding:function(){return this._def&&!this._def.isFulfilled()},buildByExpr:function(a,b,f){var t=new u;this.isBuilding()?t.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=h.isHostedService(this.url),
this.expr=b||"1\x3d1",this._layerDefinition=f,t=this._def=this._init("expr"));return t},buildByFilterObj:function(a,b,f){var t=new u;this.isBuilding()?t.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=h.isHostedService(this.url),this.partsObj=this._updatePartsObj(b),this._layerDefinition=f,t=this._def=this._init("partsObj"));return t},_updatePartsObj:function(b){a.forEach(b,p.hitch(this,function(b){b.parts?a.forEach(b.parts,p.hitch(this,function(a){a.interactiveObj&&
!0===a.interactiveObj.cascade?a.interactiveObj.cascade="previous":!1===a.interactiveObj.cascade&&(a.interactiveObj.cascade="none")})):b.interactiveObj&&!0===b.interactiveObj.cascade?b.interactiveObj.cascade="previous":!1===b.interactiveObj.cascade&&(b.interactiveObj.cascade="none")}));return b},removeAllFilters:function(){this._destroyAllFilters()},_getLayerDefinitionRaw:function(a,b){var f=new u;b?f.resolve(b):(this.loading.show(),r({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(p.hitch(this,
function(a){this.domNode?(this.loading.hide(),f.resolve(a)):f.reject()}),p.hitch(this,function(a){console.error(a);f.reject();this.domNode&&this.loading.hide()})));return f},_validateLayerDefinition:function(a){return this._isObject(a)},_init:function(f){var t=new u;if(!this._isString(this.url))return t.reject(),t;var c=p.hitch(this,function(){setTimeout(p.hitch(this,function(){t.resolve()}),1500)}),v=p.hitch(this,function(){b.setStyle(this.contentSection,"display","block");b.setStyle(this.errorSection,
"display","none");this.removeAllFilters();var v=this._layerDefinition.fields;v&&0<v.length?(v=a.filter(v,p.hitch(this,function(a){return 0<=this._supportFieldTypes.indexOf(a.type)})))&&0<v.length?(this._validOptions=!0,b.removeClass(this.btnAddSet,"jimu-state-disabled"),b.removeClass(this.btnAddExp,"jimu-state-disabled"),b.removeClass(this.iconAddExp,"jimu-state-disabled"),b.removeClass(this.iconAddSet,"jimu-state-disabled"),this.createFieldsStore(),this.valueProviderFactory=new l({url:this.url,layerDefinition:this._layerDefinition}),
"expr"===f?this._isString(this.expr)?("1\x3d1"===this.expr.replace(/\s/gi,"")&&this.removeAllFilters(),this._parseExpr(this.expr)?c():t.reject()):t.reject():"partsObj"===f?this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),c()):t.reject():this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),c()):this._isString(this.expr)?this._parseExpr(this.expr)?c():t.reject():(this.removeAllFilters(),c())):(this._showErrorOptions(this.nls.error.noFilterFields),t.reject()):
t.reject()});this._validateLayerDefinition(this._layerDefinition)?v():(this.loading.show(),r({url:this.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(p.hitch(this,function(a){this.domNode?(this.loading.hide(),this._layerDefinition=a,v()):t.reject()}),p.hitch(this,function(a){console.error(a);t.reject();this.domNode&&this.loading.hide()})));return t},toJson:function(){var b={logicalOperator:this.allAnySelect.value,parts:[]},f=this._getAllSingleFiltersAndFilterSets();if(0===
f.length)return b.expr="1\x3d1",b;a.forEach(f,p.hitch(this,function(a){a=a.toJson();b.parts.push(a)}));return a.every(b.parts,p.hitch(this,function(a){return!!a}))&&0<b.parts.length?(b.expr=this.getExprByFilterObj(b),b):null},createFieldsStore:function(){if(this._layerDefinition.fields&&0!==this._layerDefinition.fields.length){var a=p.clone(this._layerDefinition).fields;0===this.setFieldsStoreByFieldInfos(a)&&this._showErrorOptions(this.nls.error.noFilterFields)}else this._showErrorOptions(this.nls.error.noFilterFields)},
_parsePartsObj:function(a){this._validatePartsObj(a)&&(this.removeAllFilters(),this._buildEditUIByPartsObj(a))},_parseExpr:function(a){this._destroyAllFilters();var b=null;if(!this._validateLayerDefinition(this._layerDefinition))return b;if(!a||"string"!==typeof a)return this._showErrorOptions(this.nls.error.invalidSQL),b;if("1\x3d1"===this.expr.replace(/\s/gi,""))return b={expr:"1\x3d1",parts:[],logicalOperator:"AND"};try{b=this.getFilterObjByExpr(a)}catch(D){b=null,console.error(D)}b?this._buildEditUIByPartsObj(b):
this._showErrorOptions(this.nls.error.cantParseSQL);return b},_buildEditUIByPartsObj:function(b){b&&(this._destroyAllFilters(),this.allAnySelect.value=b.logicalOperator,a.forEach(b.parts,p.hitch(this,function(a){a.parts?this._addFilterSet(a):a.fieldObj&&a.operator&&a.valueObj&&this._addSingleFilter(a)})))},_addSingleFilter:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,part:a,
OPERATORS:p.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,valueProviderFactory:this.valueProviderFactory};a=new v(a);a.placeAt(this.allExpsBox);a.startup();this.own(f.after(a,"_destroySelf",p.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_addFilterSet:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,partsObj:a,
OPERATORS:p.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,valueProviderFactory:this.valueProviderFactory};a=new x(a);a.placeAt(this.allExpsBox);a.startup();this.own(f.after(a,"_destroySelf",p.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_destroyAllFilters:function(){for(var a=this._getAllSingleFiltersAndFilterSets();0<a.length;)a[0].destroy(),a.splice(0,1);this._checkFilterNumbers()},_getAllSingleFiltersAndFilterSetsDoms:function(){return w(".allExpsBox\x3e.jimu-single-filter,.allExpsBox\x3e.jimu-filter-set",
this.contentSection)},_getAllSingleFiltersAndFilterSets:function(){var b=this._getAllSingleFiltersAndFilterSetsDoms();return a.map(b,p.hitch(this,function(a){return q.byNode(a)}))},_checkFilterNumbers:function(){var f=this._getAllSingleFiltersAndFilterSetsDoms();1<f.length?b.setStyle(this.matchMsg,"display","block"):b.setStyle(this.matchMsg,"display","none");0<f.length?b.setStyle(this.noFilterTipSection,"display","none"):b.setStyle(this.noFilterTipSection,"display","block");a.forEach(f,p.hitch(this,
function(a,f){b.removeClass(a,"even-filter");b.removeClass(a,"odd-filter");b.addClass(a,0===(f+1)%2?"even-filter":"odd-filter")}));this.emit("filter-number-change")},_showErrorOptions:function(a){console.error(a);b.setStyle(this.errorSection,"display","none");this.errorTip.innerHTML=a;this.loading.hide()},_onBtnAddSetClick:function(){this._layerDefinition&&this._validOptions&&this._addFilterSet()},_onBtnAddExpClick:function(){this._layerDefinition&&this._validOptions&&this._addSingleFilter()}})})},
"jimu/dijit/_filter/ValueProviderFactory":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./BlankValueProvider ./SimpleValueProvider ./TwoNumbersValueProvider ./TwoDatesValueProvider ./ListValueProvider jimu/LayerInfos/LayerInfos".split(" "),function(g,n,k,m,e,d,c,h,l){var q={stringOperatorIs:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",codedValueProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",
supportAskForValue:!0,filterCodedValueIfPossible:!0}},stringOperatorIsNot:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},stringOperatorStartsWith:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorEndsWith:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,
supportCaseSensitive:!0}},stringOperatorContains:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorDoesNotContain:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},stringOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},numberOperatorIs:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",codedValueProviderType:"LIST_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsNot:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsAtLeast:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},
field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsLessThan:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsAtMost:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},
unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsGreaterThan:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsBetween:{value:{normalProviderType:"TWO_NUMBERS_VALUE_PROVIDER",supportAskForValue:!0}},numberOperatorIsNotBetween:{value:{normalProviderType:"TWO_NUMBERS_VALUE_PROVIDER",
supportAskForValue:!0}},numberOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},numberOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},dateOperatorIsOn:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsNotOn:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsBefore:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsAfter:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsBetween:{value:{normalProviderType:"TWO_DATES_VALUE_PROVIDER",supportAskForValue:!0}},dateOperatorIsNotBetween:{value:{normalProviderType:"TWO_DATES_VALUE_PROVIDER",supportAskForValue:!0}},dateOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},dateOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}}},
p=k([],{nls:null,url:null,layerDefinition:null,layerInfo:null,featureLayerId:null,constructor:function(b){g.mixin(this,b);this.nls=window.jimuNls.filterBuilder;b=l.getInstanceSync();this.featureLayerId&&(this.layerInfo=b.getLayerOrTableInfoById(this.featureLayerId))},getSupportedValueTypes:function(b,a){var f=[],c=q[a];c&&(c.value&&f.push("value"),c.field&&0<this._getSameShortTypeFieldNames(b).length&&f.push("field"),c.unique&&this.url&&(this._isStreamServer(this.url)||10.1<=parseFloat(this.layerDefinition.currentVersion)&&
f.push("unique")));return f},_isStreamServer:function(b){b=(b||"").replace(/\/*$/g,"");return/\/StreamServer$/gi.test(b)},_getSameShortTypeFieldNames:function(b){var a=[],f=this._getFieldInfo(this.layerDefinition,b),c=p.getShortTypeByEsriType(f.type);n.forEach(this.layerDefinition.fields,g.hitch(this,function(f){f.name!==b&&p.getShortTypeByEsriType(f.type)===c&&a.push(f.name)}));return a},getValueProvider:function(b,a){var f=null,l=g.clone(q[b.operator]);if(l){var p=b.valueObj.type,r=b.fieldObj.name,
v=this._getFieldInfo(this.layerDefinition,r),x=l[p],t=x.normalProviderType,B=null,k=this._getCodedValues(v);k||this.layerDefinition.typeIdField&&this.layerDefinition.typeIdField.toUpperCase()===r.toUpperCase()&&(k=this._getSubTypes(this.layerDefinition));"field"===p?(p=this._getSameShortTypeFieldNames(r),0<p.length&&(B=n.map(p,g.hitch(this,function(a){return{value:a,label:a}})))):k&&0<k.length&&x.codedValueProviderType&&(t=x.codedValueProviderType);l={nls:this.nls,url:this.url,layerDefinition:this.layerDefinition,
partObj:b,fieldInfo:v,codedValues:k,staticValues:B,layerInfo:this.layerInfo,operatorInfo:l,filterCodedValueIfPossible:!!x.filterCodedValueIfPossible,runtime:a};"BLANK_VALUE_PROVIDER"===t?f=new m(l):"SIMPLE_VALUE_PROVIDER"===t?f=new e(l):"TWO_NUMBERS_VALUE_PROVIDER"===t?f=new d(l):"TWO_DATES_VALUE_PROVIDER"===t?f=new c(l):"LIST_VALUE_PROVIDER"===t&&(l.showNullValues=!1,f=new h(l))}return f},_getFieldInfo:function(b,a){for(var f=b.fields,c=0;c<f.length;c++){var l=f[c];if(a===l.name)return l}return null},
_getCodedValues:function(b){var a=null;(b=b.domain)&&"codedValue"===b.type&&b.codedValues&&0<b.codedValues.length&&(a=b.codedValues,a=n.map(a,g.hitch(this,function(a){return{value:a.code,label:a.name}})));return a},_getSubTypes:function(b){var a=null;b.typeIdField&&b.types&&0<b.types.length&&(a=n.map(b.types,g.hitch(this,function(a){return{value:a.id,label:a.name}})));return a}});p.getOperatorInfo=function(b){return g.clone(q[b])};p.getOperatorsByShortType=function(b){var a=[];"string"===b?a="stringOperatorIs stringOperatorIsNot stringOperatorStartsWith stringOperatorEndsWith stringOperatorContains stringOperatorDoesNotContain stringOperatorIsBlank stringOperatorIsNotBlank".split(" "):
"number"===b?a="numberOperatorIs numberOperatorIsNot numberOperatorIsAtLeast numberOperatorIsLessThan numberOperatorIsAtMost numberOperatorIsGreaterThan numberOperatorIsBetween numberOperatorIsNotBetween numberOperatorIsBlank numberOperatorIsNotBlank".split(" "):"date"===b&&(a="dateOperatorIsOn dateOperatorIsNotOn dateOperatorIsBefore dateOperatorIsAfter dateOperatorIsBetween dateOperatorIsNotBetween dateOperatorIsBlank dateOperatorIsNotBlank".split(" "));return a};p.getShortTypeByEsriType=function(b){var a=
null;"esriFieldTypeString"===b?a="string":"esriFieldTypeDate"===b?a="date":0<=["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(b)&&(a="number");return a};return p})},"jimu/dijit/_filter/BlankValueProvider":function(){define(["dojo/_base/html","dojo/_base/declare","./ValueProvider"],function(g,n,k){return n([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,
"jimu-filter-blank-value-provider")},getDijits:function(){return[]},getStatus:function(){return 1},setValueObject:function(){},getValueObject:function(){return{isValid:!0,type:this.partObj.valueObj.type,value:null}},isBlankValueProvider:function(){return!0}})})},"jimu/dijit/_filter/ValueProvider":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin jimu/utils esri/lang".split(" "),function(g,n,k,m,e,d,c,
h,l,q){return d([c,h,n],{baseClass:"jimu-filter-value-provider",fieldName:null,shortType:null,_enabled:!1,cascade:"none",filterCodedValue:!1,nls:null,url:null,layerDefinition:null,fieldInfo:null,partObj:null,runtime:!0,staticValues:null,codedValues:null,layerInfo:null,operatorInfo:null,filterCodedValueIfPossible:!1,postMixInProperties:function(){this.inherited(arguments);this.shortType=this.partObj.fieldObj.shortType;this.fieldName=this.partObj.fieldObj.name;this.cascade=this.partObj.interactiveObj&&
this.partObj.interactiveObj.cascade;this.runtime&&this.codedValues&&this.filterCodedValueIfPossible&&l.isCodedValuesSupportFilter(this.layerDefinition,this.codedValues.length)?this.filterCodedValue=!0:this.filterCodedValue=!1},getDijits:function(){return[]},bindChangeEvents:function(){var c=this.getDijits();e.forEach(c,k.hitch(this,function(b){b.declaredClass&&0===b.declaredClass.indexOf("dijit.")&&m.addClass(b.domNode,b.declaredClass.replace(/\./g,"-"));this.own(g(b,"change",k.hitch(this,this._onChanged)))}))},
_onChanged:function(){this.emit("change")},tryLocaleNumber:function(c){var b=l.localizeNumber(c);if(null===b||void 0===b)b=c;return b},getPartObject:function(){var c=this.getValueObject();if(!c)return null;var b=k.clone(this.partObj);b.valueObj=c;return b},setValueObject:function(){},getValueObject:function(){},tryGetValueObject:function(){return this.getValueObject()},setRequired:function(){},getStatus:function(){var c=1,b=this.getDijits();0<b.length&&(c=e.map(b,k.hitch(this,function(a){return this.getStatusForDijit(a)})),
c=Math.min.apply(c,c));return c},getStatusForDijit:function(c){return c.validate()?c.get("DisplayedValue")?1:0:-1},isInvalidValue:function(){return 0>this.getStatus()},isEmptyValue:function(){return 0===this.getStatus()},isValidValue:function(){return 0<this.getStatus()},isBlankValueProvider:function(){return!1},getFilterExpr:function(){var c="1\x3d1",c=this.getLayerFilterExpr();if("all"===this.cascade||"previous"===this.cascade)var b=this.getCascadeFilterExpr(),c="("+c+") AND ("+b+")";return c},
getLayerFilterExpr:function(){var c="1\x3d1";this.layerInfo&&(c=this.layerInfo.getFilter());c||(c="1\x3d1");return c},getCascadeFilterExpr:function(){return"1\x3d1"},isDefined:function(c){return q.isDefined(c)},disable:function(){this._enabled=!1},enable:function(){this._enabled=!0},isEnabled:function(){return this._enabled}})})},"jimu/dijit/_filter/SimpleValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),
function(g,n,k,m,e,d){return n([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",_dijit:null,postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,"jimu-filter-simple-value-provider");this._dijit="string"===this.shortType?new m({required:!1,trim:!0}):"number"===this.shortType?new d({required:!1,intermediateChanges:!0,constraints:{pattern:"#####0.##########"}}):new e({required:!1,trim:!0,value:new Date});g.setStyle(this._dijit.domNode,"width","100%");this._dijit.placeAt(this.domNode)},
getDijits:function(){return[this._dijit]},setValueObject:function(c){this.isDefined(c.value)&&("date"===this.shortType?this._dijit.set("value",new Date(c.value)):this._dijit.set("value",c.value))},getValueObject:function(){if(this.isValidValue()){var c=this._dijit.get("value");"date"===this.shortType?c=c.toDateString():"number"===this.shortType&&(c=parseFloat(c));return{isValid:!0,type:this.partObj.valueObj.type,value:c}}return null},tryGetValueObject:function(){return this.isValidValue()?this.getValueObject():
this.isEmptyValue()?{isValid:!0,type:this.partObj.valueObj.type,value:"string"===this.shortType?"":null}:null},setRequired:function(c){this._dijit.set("required",c)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(g,n,k){return g("dijit.form.DateTextBox",k,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:n,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b,a,f,w,u,r){var v=m("dijit.Calendar",[a,f,w],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){h.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new v._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:q.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(p(this.domNode,"keydown",q.hitch(this,"_onKeyDown")),p(this.dateRowsNode,"mouseover",q.hitch(this,"_onDayMouseOver")),p(this.dateRowsNode,"mouseout",q.hitch(this,"_onDayMouseOut")),p(this.dateRowsNode,"mousedown",q.hitch(this,"_onDayMouseDown")),p(this.dateRowsNode,"mouseup",q.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var f=this.currentFocus.getDate();b.setDate(Math.min(f,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=d.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!d.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(d.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||
a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",d.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),d.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!d.contains(a,"dijitCalendarDisabledDate")&&(d.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&d.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,f,c=this.currentFocus;switch(a.keyCode){case l.RIGHT_ARROW:b=1;case l.LEFT_ARROW:f="day";this.isLeftToRight()||(b*=-1);break;case l.DOWN_ARROW:b=1;case l.UP_ARROW:f="week";break;case l.PAGE_DOWN:b=1;case l.PAGE_UP:f=a.ctrlKey||a.altKey?"year":"month";break;case l.END:c=this.dateModule.add(c,"month",1),f="day";case l.HOME:c=new this.dateClassObj(c);c.setDate(1);break;default:return!0}f&&(c=this.dateModule.add(c,f,b));this._setCurrentFocusAttr(c);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});v._MonthDropDownButton=m("dijit.Calendar._MonthDropDownButton",r,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new v._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var f=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
f);this.containerNode.innerHTML=(6==b("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+f[a.getMonth()]+"\x3c/div\x3e"}});v._MonthDropDown=m("dijit.Calendar._MonthDropDown",[f,u,w],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";g.forEach(a,function(a,b){c.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(e.get(a.target,"month"))},onChange:function(){}});return v})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b,a,f,w,u){var r=n("dijit.CalendarLite",[f,w],{templateString:u,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=
new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=d.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){if(a||
0===a)a=new this.dateClassObj(a),a.setHours(1,0,0,0);return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),f=this.dateModule.getDaysInMonth(a),c=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),d=new this.dateClassObj,p=0<=this.dayOffset?this.dayOffset:k.getFirstDayOfWeek(this.lang);p>
b&&(p-=7);if(!this.summary){var r=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",r[a.getMonth()])}this._date2cell={};g.forEach(this.dateCells,function(t,v){var r=v+p,w=new this.dateClassObj(a),h="dijitCalendar",g=0;r<b?(r=c-b+r+1,g=-1,h+="Previous"):r>=b+f?(r=r-b-f+1,g=1,h+="Next"):(r=r-b+1,h+="Current");g&&(w=this.dateModule.add(w,"month",g));w.setDate(r);this.dateModule.compare(w,d,"date")||(h="dijitCalendarCurrentDate "+h);this.isDisabledDate(w,
this.lang)?(h="dijitCalendarDisabledDate "+h,t.setAttribute("aria-disabled","true")):(h="dijitCalendarEnabledDate "+h,t.removeAttribute("aria-disabled"),t.setAttribute("aria-selected","false"));(g=this.getClassForDate(w,this.lang))&&(h=g+" "+h);t.className=h+"Month dijitCalendarDateTemplate";h=w.valueOf();this._date2cell[h]=t;t.dijitDateValue=h;h=w.getDateLocalized?w.getDateLocalized(this.lang):w.getDate();this._setText(this.dateLabels[v],h);l.set(t,"aria-label",e.format(w,{selector:"date",formatLength:"long"}))},
this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,f=new this.dateClassObj;g.forEach(["previous","current","next"],function(a){f.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(f,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?q.getObject(a.datePackage,
!1):m;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?q.getObject(a.datePackage+".locale",!1):e},_createMonthWidget:function(){return r._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var b=this.dowTemplateString,f=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),l=0<=this.dayOffset?this.dayOffset:k.getFirstDayOfWeek(this.lang);this.dayCellsHtml=a.substitute([b,
b,b,b,b,b,b].join(""),{d:""},function(){return f[l++%7]});b=a.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[b,b,b,b,b,b].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);c.setSelectable(this.domNode,!1);b=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",b,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=q.hitch(this,function(a,
b,f){this[a].dojoClick=!0;return p(this[a],"click",q.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,f))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,f){var c=this.currentFocus,l=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),
this._populateControls(),this._markSelectedDates([this.value]));c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||f)&&c.focus();l&&l!=c&&(b("webkit")?l.setAttribute("tabIndex","-1"):l.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue&&0!==a.dijitDateValue;a=a.parentNode);a&&!h.contains(a,"dijitCalendarDisabledDate")&&this.set("value",
a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,b){h.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}g.forEach(this._selectedCells||[],q.partial(b,!1));this._selectedCells=g.filter(g.map(a,this._getNodeByDate,this),function(a){return a});g.forEach(this._selectedCells,q.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});
r._MonthWidget=n("dijit.CalendarLite._MonthWidget",f,{_setMonthAttr:function(a){var f=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),c=6==b("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+g.map(f,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=c+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+f[a.getMonth()]+"\x3c/div\x3e"}});return r})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(g,n,k,m,e,d,c,h){new Date("X");return m("dijit.form._DateTimeTextBox",[d,c],{templateString:h,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:n.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(c,d){var l=this._isInvalidDate(c),b=this._isInvalidDate(d);if(l||b)return l&&b?0:l?-1:1;var l=this.format(c,this._unboundedConstraints),b=this.format(d,this._unboundedConstraints),
a=this.parse(l,this._unboundedConstraints),f=this.parse(b,this._unboundedConstraints);return l==b?0:g.compare(a,f,this._selector)},autoWidth:!0,format:function(c,d){return c?this.dateLocaleModule.format(c,d):""},parse:function(c,d){return this.dateLocaleModule.parse(c,d)||(this._isEmpty(c)?null:void 0)},serialize:function(c,d){c.toGregorian&&(c=c.toGregorian());return k.toISOString(c,d)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){c=
c||{};this.dateModule=c.datePackage?e.getObject(c.datePackage,!1):g;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=c.datePackage?e.getObject(c.datePackage+".locale",!1):n;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(c){c.selector=this._selector;c.fullYear=!0;var d=k.fromISOString;"string"==typeof c.min&&(c.min=d(c.min),this.dateClassObj instanceof Date||(c.min=new this.dateClassObj(c.min)));"string"==typeof c.max&&(c.max=d(c.max),this.dateClassObj instanceof Date||(c.max=new this.dateClassObj(c.max)));this.inherited(arguments);this._unboundedConstraints=e.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(c){return!c||
isNaN(c)||"object"!=typeof c||c.toString()==this._invalidDate},_setValueAttr:function(c,d,e){void 0!==c&&("string"==typeof c&&(c=k.fromISOString(c)),this._isInvalidDate(c)&&(c=null),c instanceof Date&&!(this.dateClassObj instanceof Date)&&(c=new this.dateClassObj(c)));this.inherited(arguments,[c,d,e]);this.value instanceof Date&&(this.filterString="");!1!==d&&this.dropDown&&this.dropDown.set("value",c,!1)},_set:function(c,d){if("value"==c){d instanceof Date&&!(this.dateClassObj instanceof Date)&&
(d=new this.dateClassObj(d));var e=this._get("value");if(e instanceof this.dateClassObj&&0==this.compare(d,e))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(c){this._isInvalidDate(c)&&(c=new this.dateClassObj);this._set("dropDownDefaultValue",c)},openDropDown:function(c){this.dropDown&&this.dropDown.destroy();var d=e.isString(this.popupClass)?e.getObject(this.popupClass,!1):this.popupClass,h=this,b=this.get("value");this.dropDown=new d({onChange:function(a){h.set("value",
a,!0)},id:this.id+"_popup",dir:h.dir,lang:h.lang,value:b,textDir:h.textDir,currentFocus:this._isInvalidDate(b)?this.dropDownDefaultValue:b,constraints:h.constraints,filterString:h.filterString,datePackage:h.datePackage,isDisabledDate:function(a){return!h.rangeCheck(a,h.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(c,d){this._setValueAttr(this.parse(c,this.constraints),d,c)}})})},"jimu/dijit/_filter/TwoNumbersValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoNumbersValueProvider.html dijit/form/NumberTextBox".split(" "),
function(g,n,k,m,e,d){return n([k,m,e],{templateString:d,postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,"jimu-two-numbers-filter-value-provider")},_onRangeNumberBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var c=parseFloat(this._dijit1.get("value")),d=parseFloat(this._dijit2.get("value"));c>d&&(this._dijit1.set("value",d),this._dijit2.set("value",c))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(c){this.isDefined(c.value1)&&
this._dijit1.set("value",c.value1);this.isDefined(c.value2)&&this._dijit2.set("value",c.value2)},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:parseFloat(this._dijit1.get("value")),value2:parseFloat(this._dijit2.get("value"))}:null},tryGetValueObject:function(){if(this.isValidValue())return this.getValueObject();if(this.isEmptyValue()){var c={isValid:!0,type:this.partObj.valueObj.type,value1:parseFloat(this._dijit1.get("value")),value2:parseFloat(this._dijit2.get("value"))};
isNaN(c.value1)&&(c.value1=null);isNaN(c.value2)&&(c.value2=null);return c}return null},setRequired:function(c){this._dijit1.set("required",c);this._dijit2.set("required",c)}})})},"jimu/dijit/_filter/TwoDatesValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoDatesValueProvider.html dijit/form/DateTextBox".split(" "),function(g,n,k,m,e,d){return n([k,m,e],{templateString:d,postCreate:function(){this.inherited(arguments);
g.addClass(this.domNode,"jimu-two-dates-filter-value-provider")},_onRangeDateBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var c=this._dijit1.get("value"),d=c.getTime(),e=this._dijit2.get("value"),g=e.getTime();d>g&&(this._dijit1.set("value",e),this._dijit2.set("value",c))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(c){this.isDefined(c.value1)&&this._dijit1.set("value",new Date(c.value1));this.isDefined(c.value2)&&this._dijit2.set("value",
new Date(c.value2))},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:this._dijit1.get("value").toDateString(),value2:this._dijit2.get("value").toDateString()}:null},setRequired:function(c){this._dijit1.set("required",c);this._dijit2.set("required",c)}})})},"jimu/dijit/_filter/ListValueProvider":function(){define("dojo/aspect dojo/Deferred dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ListValueProvider.html dojo/store/Memory jimu/utils dijit/form/FilteringSelect".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b){return d([c,h,l],{templateString:q,codedValues:null,staticValues:null,showNullValues:!1,postCreate:function(){this.inherited(arguments);m.addClass(this.domNode,"jimu-filter-list-value-provider");this._uniqueValueCache={};var a=new p({idProperty:"id",data:[]});this.valuesSelect.set("store",a);this.staticValues||"function"!==typeof this.valuesSelect._onDropDownMouseDown||(!this.codedValues||this.codedValues&&this.filterCodedValue)&&this.own(g.before(this.valuesSelect,
"_onDropDownMouseDown",k.hitch(this,this._onBeforeDropDownMouseDown)))},_onFilteringSelectInput:function(){this.emit("change")},_onBeforeDropDownMouseDown:function(){this._tryUpdatingUniqueValues(void 0,!0);return arguments},getDijits:function(){return[this.valuesSelect]},setValueObject:function(a){return this.staticValues?this._setValueForStaticValues(a.value,this.staticValues):this.codedValues?this.filterCodedValue?this._tryUpdatingUniqueValues(a.value,!1):this._setValueForStaticValues(a.value,
this.codedValues):this._tryUpdatingUniqueValues(a.value,!1)},getValueObject:function(){if(this.isValidValue()){var a=this.valuesSelect.get("item").value;return{isValid:!0,type:this.partObj.valueObj.type,value:a}}return null},tryGetValueObject:function(){return this.isValidValue()?this.getValueObject():this.isEmptyValue()?{isValid:!0,type:this.partObj.valueObj.type,value:"string"===this.shortType?"":null}:null},setRequired:function(a){this.valuesSelect.set("required",a)},_setValueForStaticValues:function(a,
b){var c=null,f=-1,c=null;b&&(c=e.map(b,k.hitch(this,function(b,c){var d={id:c,value:b.value,label:b.label};d.value===a&&(f=c);return d})),this.valuesSelect.store.setData(c),0<=f&&(c=this.valuesSelect.store.get(f))&&this.valuesSelect.set("item",c))},_uniqueValueLoadingDef:null,_uniqueValueLoadingExpr:"",_uniqueValueCache:null,_tryUpdatingUniqueValues:function(a,b){var c=new n;if(this.valuesSelect._opened)c.resolve();else{var f=this.getFilterExpr();f!==this._uniqueValueLoadingExpr?(this.valuesSelect.readOnly=
!0,this._uniqueValueLoadingDef&&(this._uniqueValueLoadingDef.reject(),this._uniqueValueLoadingDef=null),this._uniqueValueLoadingExpr=f,this._uniqueValueLoadingDef=this._getUniqueValues(f),this._uniqueValueLoadingDef.then(k.hitch(this,function(f){this.domNode&&(this._uniqueValueLoadingDef=null,this.valuesSelect.readOnly=!1,this._setValueForUniqueValues(a,f),this._hideLoadingIcon(),b&&this.valuesSelect.toggleDropDown(),c.resolve())}),k.hitch(this,function(a){console.error(a);this.domNode&&(this._uniqueValueLoadingDef=
null,this.valuesSelect.readOnly=!1,this._hideLoadingIcon(),c.reject(a))}))):c.resolve()}return c},_setValueForUniqueValues:function(a,b){b.sort(function(a,b){return a.value<b.value?-1:a.value===b.value?0:1});this.showNullValues||(b=e.filter(b,k.hitch(this,function(a){return"\x3cNull\x3e"!==a.value&&null!==a.value})));if(void 0===a){var c=this.getValueObject();c&&(a=c.value)}var f=-1,c=null,d=e.map(b,k.hitch(this,function(b,c){var d={id:c,value:b.value,label:b.label};b.value===a&&(f=c);return d}));
this.valuesSelect.store.setData(d);0<=f&&(c=this.valuesSelect.store.get(f));this.valuesSelect.set("item",c)},_showLoadingIcon:function(){m.addClass(this.valuesSelect.domNode,"loading")},_hideLoadingIcon:function(){m.removeClass(this.valuesSelect.domNode,"loading")},_getUniqueValues:function(a){var c=new n;this._uniqueValueCache[a]?c.resolve(this._uniqueValueCache[a]):(this._showLoadingIcon(),b.getUniqueValues(this.url,this.fieldName,a,this.layerDefinition).then(k.hitch(this,function(b){this.domNode&&
(this._uniqueValueCache[a]=b,c.resolve(b),this._hideLoadingIcon())}),k.hitch(this,function(a){this.domNode&&(c.reject(a),this._hideLoadingIcon())})));return c}})})},"jimu/dijit/_SingleFilter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/store/Memory jimu/utils jimu/dijit/_filter/ValueProviderFactory jimu/dijit/CheckBox dijit/form/Select dijit/form/FilteringSelect dijit/form/ValidationTextBox".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b){return g([n,k,m],{templateString:e,baseClass:"jimu-single-filter",declaredClass:"jimu.dijit._SingleFilter",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],supportFieldTypes:[],part:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,valueProviderFactory:null,valueProvider:null,postMixInProperties:function(){this.supportFieldTypes=[];this.supportFieldTypes.push(this.stringFieldType);this.supportFieldTypes.push(this.dateFieldType);
this.supportFieldTypes=this.supportFieldTypes.concat(this.numberFieldTypes);this.nls=window.jimuNls.filterBuilder},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var a={fieldObj:"",operator:"",valueObj:"",interactiveObj:"",caseSensitive:!1},b=this._getFieldObjByUI();if(!b)return null;a.fieldObj=b;b=this._getOperatorByUI();if(!b)return null;a.operator=b;a.caseSensitive=this.cbxCaseSensitive.getStatus()&&this.cbxCaseSensitive.getValue();if(b=this._isUseAskForValues()){if(!this.promptTB.validate())return this._showValidationErrorTip(this.promptTB),
null;a.interactiveObj={prompt:this.promptTB.get("value"),hint:this.hintTB.get("value"),cascade:"none"};this.uniqueRadio&&this.uniqueRadio.checked&&(a.interactiveObj.cascade=this.cascadeSelect.get("value"))}a.valueObj={isValid:!0,type:""};b=b?this.valueProvider.tryGetValueObject():this.valueProvider.getValueObject();if(!b)return null;this.valueRadio.checked?b.type="value":this.fieldRadio.checked?b.type="field":this.uniqueRadio.checked&&(b.type="unique");a.valueObj=b;return a},_getFieldObjByUI:function(){var a=
this._getSelectedFilteringItem(this.fieldsSelect);return a?{name:a.name,label:a.name,shortType:a.shortType,type:a.type}:null},_getOperatorByUI:function(){var a=this.operatorsSelect.get("value");"none"===a&&(a=null);return a},showDelteIcon:function(){c.setStyle(this.btnDelete,"display","inline-block")},hideDeleteIcon:function(){c.setStyle(this.btnDelete,"display","none")},_showAndEnableCaseSensitive:function(){this.cbxCaseSensitive.setStatus(!0);c.setStyle(this.cbxCaseSensitive.domNode,"display","inline-block")},
_hideAndDisableCaseSensitive:function(){this.cbxCaseSensitive.setStatus(!1);c.setStyle(this.cbxCaseSensitive.domNode,"display","none")},_initSelf:function(){this.layerInfo=d.mixin({},this.layerInfo);this.isHosted&&(this.cbxCaseSensitive.setValue(!1),this.cbxCaseSensitive.setStatus(!1),this.cbxCaseSensitive.domNode.title=this.nls.notSupportCaseSensitiveTip);this.own(l(this.fieldsSelect,"MouseEnter",d.hitch(this,this._updateFieldsSelectTitle)));this.own(l(this.operatorsSelect,"MouseEnter",d.hitch(this,
this._updateOperatorsSelectTitle)));this.enableAskForValues?(c.setStyle(this.cbxAskValues.domNode,"display","inline-block"),c.setStyle(this.promptSection,"display","block"),this.own(l(this.cbxAskValues,"status-change",d.hitch(this,this._onCbxAskValuesStatusChanged))),this.cbxAskValues.onChange=d.hitch(this,this._onCbxAskValuesClicked)):(c.setStyle(this.cbxAskValues.domNode,"display","none"),c.setStyle(this.promptSection,"display","none"));this._initValueTypeRadios();var a=this.layerInfo.fields;a&&
0<a.length&&(a=h.filter(a,d.hitch(this,function(a){return 0<=this.supportFieldTypes.indexOf(a.type)})),0<a.length&&(this._enableRadios(),this._initFieldsSelect(a),this.part?this._showPart(this.part):this._resetByFieldAndOperator(),setTimeout(d.hitch(this,function(){this._bindFieldsSelectChangeAndOperatorChangeEvents()}),10)))},_bindFieldsSelectChangeAndOperatorChangeEvents:function(){this._removeFieldsSelectChangeAndOperatorChangeEvents();this._handle1=l(this.fieldsSelect,"change",d.hitch(this,this._onFieldsSelectChange));
this._handle2=l(this.operatorsSelect,"change",d.hitch(this,this._onOperatorsSelectChange))},_removeFieldsSelectChangeAndOperatorChangeEvents:function(){this._handle1&&this._handle1.remove();this._handle2&&this._handle2.remove();this._handle2=this._handle1=null},_isServiceSupportDistinctValues:function(a,b){return this._isStreamServer(a)?!1:10.1<=parseFloat(b.currentVersion)},_isStreamServer:function(a){a=(a||"").replace(/\/*$/g,"");return/\/StreamServer$/gi.test(a)},_updateFieldsSelectTitle:function(){this.fieldsSelect.domNode.title=
"";var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.fieldsSelect.domNode.title=a.displayName||a.alias||a.name)},_updateOperatorsSelectTitle:function(){this.operatorsSelect.domNode.title="";var a=this.operatorsSelect.get("value");a&&(a=this.operatorsSelect.getOptions(a),this.operatorsSelect.domNode.title=a.label)},_showValidationErrorTip:function(a){try{!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())}catch(f){console.error(f)}},_getSelectedFilteringItem:function(a){if(a.validate()){var b=
a.get("item");if(b)return b}this._showValidationErrorTip(a);return null},_getShortTypeByFieldType:function(a){return a===this.stringFieldType?"string":a===this.dateFieldType?"date":0<=this.numberFieldTypes.indexOf(a)?"number":null},_initFieldsSelect:function(a){a=h.map(a,d.hitch(this,function(a,b){var c=d.mixin({},a);c.id=b;c.shortType=this._getShortTypeByFieldType(a.type);c.alias||(c.alias=c.name);var f="";"string"===c.shortType?f=this.nls.string:"number"===c.shortType?f=this.nls.number:"date"===
c.shortType&&(f=this.nls.date);c.displayName=c.alias+" ("+f+")";return c}));if(0<a.length){var b=new q({data:a});this.fieldsSelect.set("store",b);this.fieldsSelect.set("value",a[0].id)}this._updateOperatorsByFieldsSelect()},_showPart:function(a){if((this.part=a)&&this.part.fieldObj&&this.part.operator&&this.part.valueObj){this._removeFieldsSelectChangeAndOperatorChangeEvents();var b=this.part.fieldObj.name;a=this.part.operator;this.part.caseSensitive=!!this.part.caseSensitive;b=this.fieldsSelect.store.query({name:b});
0!==b.length&&(b=b[0])&&(this.fieldsSelect.set("value",b.id),this._updateOperatorsByFieldsSelect(),this.operatorsSelect.set("value",a),this._resetByFieldAndOperator(this.part),a=this.part.interactiveObj)&&(this.cbxAskValues.check(),this._updatePrompt(),this.promptTB.set("value",a.prompt||""),this.hintTB.set("value",a.hint||""),"unique"===this.part.valueObj.type?this.cascadeSelect.set("value",a.cascade):this.cascadeSelect.set("value","none"))}},_onFieldsSelectChange:function(){this._updateOperatorsByFieldsSelect();
this._resetByFieldAndOperator()},_updateOperatorsByFieldsSelect:function(){this._updateFieldsSelectTitle();this.operatorsSelect.removeOption(this.operatorsSelect.getOptions());this.operatorsSelect.addOption({value:"none",label:this.nls.none});var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.operatorsSelect.shortType=a.shortType,a=b.getOperatorsByShortType(a.shortType),this.operatorsSelect.removeOption(this.operatorsSelect.getOptions()),h.forEach(a,d.hitch(this,function(a){this.operatorsSelect.addOption({value:a,
label:this.nls[a]})})))},_onOperatorsSelectChange:function(){this._resetByFieldAndOperator()},_initValueTypeRadios:function(){var a="radio_"+p.getRandomString();this.valueRadio.name=a;this.fieldRadio.name=a;this.uniqueRadio.name=a;this.valueRadio.valueType="value";this.fieldRadio.valueType="field";this.uniqueRadio.valueType="unique";p.combineRadioCheckBoxWithLabel(this.valueRadio,this.valueLabel);p.combineRadioCheckBoxWithLabel(this.fieldRadio,this.fieldLabel);p.combineRadioCheckBoxWithLabel(this.uniqueRadio,
this.uniqueLabel);this.own(l(this.valueRadio,"click",d.hitch(this,function(){this._resetByFieldAndOperator(null,"value")})));this.own(l(this.fieldRadio,"click",d.hitch(this,function(){this._resetByFieldAndOperator(null,"field")})));this.own(l(this.uniqueRadio,"click",d.hitch(this,function(){this._resetByFieldAndOperator(null,"unique")})));this._isServiceSupportDistinctValues(this.url,this.layerInfo)||(this.uniqueTd.style.display="none")},_updateValueTypeClass:function(){c.removeClass(this.domNode,
"value-type");c.removeClass(this.domNode,"field-type");c.removeClass(this.domNode,"unique-type");c.removeClass(this.domNode,"support-cascade");if(this.valueRadio.checked)c.addClass(this.domNode,"value-type"),this.cascadeSelect.set("value","none");else if(this.fieldRadio.checked)c.addClass(this.domNode,"field-type"),this.cascadeSelect.set("value","none");else{c.addClass(this.domNode,"unique-type");this.cascadeSelect.set("value","previous");var a=!0,a=this._getSelectedFilteringItem(this.fieldsSelect),
a=this._getCodedValuesOrTypesCount(a);(a=0<a?p.isCodedValuesSupportFilter(this.layerInfo,a):!0)?(this.cascadeSelect.set("value","previous"),c.addClass(this.domNode,"support-cascade")):this.cascadeSelect.set("value","none")}},_getCodedValuesOrTypesCount:function(a){if(a){if(a.domain&&"codedValue"===a.domain.type&&a.domain.codedValues)return a.domain.codedValues.length;if(this.layerInfo.typeIdField===a.name&&this.layerInfo.types)return this.layerInfo.types.length}return 0},_enableRadios:function(){this.valueRadio.disabled=
!1;this.fieldRadio.disabled=!1;this.uniqueRadio.disabled=!1},_disableAndUncheckRadios:function(){this._enableRadios();this.valueRadio.checked=!1;this.fieldRadio.checked=!1;this.uniqueRadio.checked=!1;this.valueRadio.disabled=!0;this.fieldRadio.disabled=!0;this.uniqueRadio.disabled=!0},_resetByFieldAndOperator:function(a,f){this._updateOperatorsSelectTitle();this.valueProvider&&this.valueProvider.destroy();this._hideAndDisableCaseSensitive();this._disableAndUncheckRadios();a||(a={fieldObj:"",operator:"",
valueObj:"",interactiveObj:"",caseSensitive:!1},a.fieldObj=this._getFieldObjByUI(),a.operator=this._getOperatorByUI());var d=[],e=null;if(a.fieldObj&&a.operator){var d=this.valueProviderFactory.getSupportedValueTypes(a.fieldObj.name,a.operator),h=null;a.valueObj?e=a.valueObj.type:(e=f&&0<=d.indexOf(f)?f:d[0],a.valueObj={type:e});0<=d.indexOf("value")&&(this.valueRadio.disabled=!1);0<=d.indexOf("field")&&(this.fieldRadio.disabled=!1);0<=d.indexOf("unique")&&(this.uniqueRadio.disabled=!1);"value"===
e?h=this.valueRadio:"field"===e?h=this.fieldRadio:"unique"===e&&(h=this.uniqueRadio);h&&(h.disabled=!1,h.checked=!0)}0<d.length?(this.valueProvider=this.valueProviderFactory.getValueProvider(a,!1),this.valueProvider.placeAt(this.attributeValueContainer,"first"),this.valueProvider.setValueObject(a.valueObj),this.valueProvider.isBlankValueProvider()?(c.addClass(this.valueProvider.domNode,"hidden"),c.addClass(this.attributeValueContainer,"hidden")):c.removeClass(this.attributeValueContainer,"hidden"),
(d=b.getOperatorInfo(a.operator))&&e&&(d[e]&&d[e].supportCaseSensitive&&this._showAndEnableCaseSensitive(),a&&this.cbxCaseSensitive.setValue(a.caseSensitive))):c.addClass(this.attributeValueContainer,"hidden");this._updateWhenValueRadioChanged()},_updateWhenValueRadioChanged:function(){this._updatePrompt();this._updateValueTypeClass()},_getRadioByValueType:function(a){return"value"===a?this.valueRadio:"field"===a?this.fieldRadio:"unique"===a?this.uniqueRadio:null},_onCbxAskValuesClicked:function(){this._updateRequiredProperty();
this._updatePrompt()},_onCbxAskValuesStatusChanged:function(){this._updateRequiredProperty()},_isUseAskForValues:function(){return this.cbxAskValues.status&&this.cbxAskValues.checked},_isValueRequired:function(){return!this._isUseAskForValues()},_updateRequiredProperty:function(){var a=this._isValueRequired();this.valueProvider.setRequired(a)},_getValueTypeByUI:function(){return!this.valueRadio.disabled&&this.valueRadio.checked?"value":!this.fieldRadio.disabled&&this.fieldRadio.checked?"field":!this.uniqueRadio.disabled&&
this.uniqueRadio.checked?"unique":null},_updatePrompt:function(){this.promptTB.set("value","");this.hintTB.set("value","");this.cbxAskValues.setStatus(!0);c.setStyle(this.promptTable,"display","table");var a=this.operatorsSelect.get("value"),f=this.nls[a],d=!1,e=this._getValueTypeByUI(),h=b.getOperatorInfo(a);h&&e&&(e=h[e])&&e.supportAskForValue&&(d=!0);d||this.cbxAskValues.setStatus(!1);this.cbxAskValues.status&&this.cbxAskValues.checked?(c.setStyle(this.promptTable,"display","table"),(d=this._getSelectedFilteringItem(this.fieldsSelect))&&
"none"!==a&&this.promptTB.set("value",(d.alias||d.name)+" "+f)):c.setStyle(this.promptTable,"display","none")},_destroySelf:function(){this.destroy()},destroy:function(){this._removeFieldsSelectChangeAndOperatorChangeEvents();this.inherited(arguments)}})})},"jimu/dijit/_FilterSet":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_FilterSet.html dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query ./_SingleFilter".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b,a){return g([n,k,m],{templateString:e,baseClass:"jimu-filter-set",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],partsObj:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,valueProviderFactory:null,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsgSet.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelf()},toJson:function(){var a=b(".jimu-single-filter",this.allExpsBox),a=l.map(a,c.hitch(this,function(a){return d.byNode(a).toJson()}));return l.every(a,c.hitch(this,function(a){return!!a}))&&0<a.length?{logicalOperator:this.allAnySelect.value,parts:a}:null},showDelteIcon:function(){h.setStyle(this.btnDelete,"display","block")},hideDeleteIcon:function(){h.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.own(q(this.btnAdd,"click",c.hitch(this,this._addSingleFilter)));
if(this.partsObj){this.allAnySelect.value=this.partsObj.logicalOperator;var a=this.partsObj.parts||[];0===a.length?(this._addSingleFilter(),this._addSingleFilter()):1===a.length?(this._addSingleFilter(a[0]),this._addSingleFilter()):l.forEach(a,c.hitch(this,function(a){this._addSingleFilter(a)}))}else this._addSingleFilter(),this._addSingleFilter()},_addSingleFilter:function(b){b=new a({url:this.url,layerInfo:this.layerInfo,stringFieldType:this.stringFieldType,dateFieldType:this.dateFieldType,numberFieldTypes:this.numberFieldTypes,
part:b,OPERATORS:this.OPERATORS,enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,valueProviderFactory:this.valueProviderFactory,style:{margin:"15px auto 0 auto",border:0,background:"inherit"}});b.placeAt(this.allExpsBox);b.startup();this.own(p.after(b,"_destroySelf",c.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_checkFilterNumbers:function(){var a=b(".jimu-single-filter",this.allExpsBox),e=2<a.length;l.forEach(a,c.hitch(this,function(a){a=d.byNode(a);e?a.showDelteIcon():
a.hideDeleteIcon()}))},_destroySelf:function(){this.destroy()}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),function(g,n,k,m,e,d,c,h,l,q,p){return g([h,l,e],{templateString:q,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",
_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,postCreate:function(){this.inherited(arguments);this.layerInfosObj=p.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(m(this.layerChooser,"tree-click",n.hitch(this,this._onTreeClick)));this.own(m(this.layerChooser,"update",n.hitch(this,this._onLayerChooserUpdate)));this.own(m(document.body,"click",
n.hitch(this,this._onBodyClicked)))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(b){var a=new d;if(b){var c=this.layerInfosObj.getLayerInfoById(b.id);c?this.layerChooser.filter(c).then(n.hitch(this,function(f){f?(this._onSelectNewItem({layerInfo:c,name:c.title,url:b.url}),a.resolve(!0)):a.resolve(!1)}),n.hitch(this,function(){a.resolve(!1)})):
a.resolve(!1)}else this._onSelectNewItem(null),a.resolve(!0);return a},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(b){b=b.target||b.srcElement;b===this.domNode||k.isDescendant(b,this.domNode)||b===this.layerChooser.domNode||k.isDescendant(b,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(b){b.stopPropagation();b.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():
this.showLayerChooser()},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.width=this.domNode.clientWidth+2+"px";c.open({parent:this,popup:this.layerChooser,around:this.domNode});var b=this.layerChooser.domNode.parentNode;b&&k.addClass(b,"jimu-layer-chooser-from-map-withdropbox-popup");this._isLayerChooserShow=!0},hideLayerChooser:function(){c.close(this.layerChooser);this._isLayerChooserShow=!1},_onLayerChooserUpdate:function(){this._selectedItem&&
this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(b){var a=n.getObject("layerInfo.id",!1,this._selectedItem)||-1,c=n.getObject("layerInfo.id",!1,b)||-1,a=a!==c;this._selectedItem=b;this.hideLayerChooser();b=n.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=b;b=n.getObject("layerInfo.layerObject",!1,this._selectedItem);a&&this.emit("selection-change",
[b])},_onTreeClick:function(){var b=this._getSelectedItems();this._onSelectNewItem(0<b.length?b[0]:null)}})})},"widgets/Filter/setting/CustomFeaturelayerChooserFromMap":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","jimu/dijit/LayerChooserFromMap","jimu/dijit/QueryableLayerChooserFromMap"],function(g,n,k,m,e){return g([e],{postMixInProperties:function(){this.inherited(arguments);this.filter=n.hitch(this,m.andCombineFilters([this.filter,n.hitch(this,this._customFilter)]))},
_customFilter:function(d){var c=new k;d.isTable?c.resolve(!1):d.getLayerObject().then(n.hitch(this,function(d){"esri.layers.ArcGISDynamicMapServiceLayer"===d.declaredClass?c.resolve(10<=d.version):"esri.layers.ArcGISTiledMapServiceLayer"===d.declaredClass?c.resolve(!1):c.resolve(!0)}),n.hitch(this,function(d){console.error(d);c.resolve(!1)}));return c}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b,a,f,w,u,r,v){var x=g([n,k,m,e],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new v({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=b.hitch(this,this.basicFilter);this.filter=x.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&
this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var b=new h;this.onlyShowVisible?b.resolve(a.isShowInMap()):b.resolve(!0);return b},filter:function(a){a=new h;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return f.map(a,b.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),c=[];f.forEach(a,b.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),c.push(a))}));return c},
getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;r.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(b.hitch(this,function(a){this.layerInfosObj=a;this.own(d(this.layerInfosObj,"layerInfosChanged",b.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(d(this.layerInfosObj,"layerInfosIsShowInMapChanged",b.hitch(this,
this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(c){this._clear();a.setStyle(this.errorTipSection,"display","block");var d=c.getLayerInfoArray(),d=d.concat(c.getTableInfoArray());0!==d.length&&(a.setStyle(this.errorTipSection,"display","none"),f.forEach(d,b.hitch(this,
function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(b.hitch(this,function(){this._addItem("root",a)}),b.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});f.forEach(a,b.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,c){var d=null,e=c.getLayerType(),h=this.filter(c);p({layerType:e,valid:h}).then(b.hitch(this,function(e){if(e.valid){var h=b.hitch(this,function(b,
f){this._id++;d={name:c.title||"",parent:a,layerInfo:c,type:e.layerType,layerClass:c.layerObject.declaredClass,id:this._id.toString(),isLeaf:b,hasChildren:f};this._store.add(d)}),l=c.getSubLayers(),g=0===l.length;g?h(g,!1):(l=f.map(l,b.hitch(this,function(a){return this.filter(a)})),p(l).then(b.hitch(this,function(a){(a=f.some(a,function(a){return a}))&&h(g,a)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var f=this._getRootItem(),
f=new c({data:[f],getChildren:function(a){return this.query({parent:a.id})}});this._store=new l(f);f=new q({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new u({multiple:this.multiple,model:f,showRoot:!1,isLeafItem:b.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:b.hitch(this,function(a,b){"root"!==a.id&&this._onTreeOpen(a,b)}),onClick:b.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:b.hitch(this,
function(a,b){var c=null;if(!a||"root"===a.id)return null;var f={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},d=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),e=this._getIconImageName(a,b);e&&(f.backgroundImage="url("+d+"/css/images/"+e+")",c=f);return c})});a.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,
b){var c="";if("ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type)c=b?"mapserver_open.png":"mapserver_close.png";else if("GroupLayer"===a.type)c=b?"group_layer2.png":"group_layer1.png";else if("FeatureLayer"===a.type){var f=w.getTypeByGeometryType(a.layerInfo.layerObject.geometryType);"point"===f?c="point_layer1.png":"polyline"===f?c="line_layer1.png":"polygon"===f&&(c="polygon_layer1.png")}else c="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===
a.type?"image_layer.png":b?"mapserver_open.png":"mapserver_close.png";return c},_onTreeOpen:function(a,c){if("root"!==a.id){var d=[],e=[],d=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),e=f.map(d,b.hitch(this,function(a){return a.getLayerObject()})),p(e).then(b.hitch(this,function(){this.domNode&&(f.forEach(d,b.hitch(this,function(b){this._addItem(a.id,b)})),a.checked=!0,this.shelter.hide())}),b.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,
b,c){},destroy:function(){this.shelter&&this.shelter.destroy();this.tree&&this.tree.destroy();this.shelter=null;this.tree.destroy();this.inherited(arguments)}});x.createFilterByLayerType=function(a){b.isArrayLike(a)||(a=[]);return function(b){var c=new h;if(0===a.length)c.resolve(!0);else{var f=[];b.traversal(function(a){f.push(a.getLayerType())});p(f).then(function(b){for(var f=0;f<b.length;f++)for(var d=0;d<a.length;d++)if(b[f]===a[d]){c.resolve(!0);return}c.resolve(!1)},function(a){console.error(a);
c.reject(a)})}return c}};x.createFeaturelayerFilter=function(a,b,c){var d=["point","polyline","polygon"];a&&0<a.length?(a=f.filter(a,function(a){return 0<=d.indexOf(a)}),0===a.length&&(a=d)):a=d;return function(d){var e=new h,l=d.getLayerType();d=d.getLayerObject();p({layerType:l,layerObject:d}).then(function(d){var h=d.layerType;d=d.layerObject;"ArcGISDynamicMapServiceLayer"===h?e.resolve(!0):"ArcGISTiledMapServiceLayer"===h?e.resolve(!0):"GroupLayer"===h?e.resolve(!0):"FeatureCollection"===h?e.resolve(!0):
"FeatureLayer"===h?(h=w.getTypeByGeometryType(d.geometryType),h=0<=f.indexOf(a,h),d.url?(d=w.isFeaturelayerUrlSupportQuery(d.url,d.capabilities),e.resolve(h&&d)):e.resolve(b&&h)):"Table"===h?(d=w.isFeaturelayerUrlSupportQuery(d.url,d.capabilities),e.resolve(c&&d)):e.resolve(!1)},function(a){console.log(a);e.reject(a)});return e}};x.createImageServiceLayerFilter=function(a){return function(b){var c=new h,d=b.getLayerType();b=b.getLayerObject();p({layerType:d,layerObject:b}).then(function(b){var d=
b.layerType;"ArcGISImageServiceLayer"===d||"ArcGISImageServiceVectorLayer"===d?a?w.isImageServiceSupportQuery(b.layerObject.capabilities)?c.resolve(!0):c.resolve(!1):c.resolve(!0):c.resolve(!1)},function(a){console.log(a);c.reject(a)});return c}};x.createQueryableLayerFilter=function(){var a=x.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0),b=x.createImageServiceLayerFilter(!0);return x.orCombineFilters([a,b])};x.andCombineFilters=function(a){return x._combineFilters(a,!0)};x.orCombineFilters=
function(a){return x._combineFilters(a,!1)};x._combineFilters=function(a,b){return function(c){var d=new h,e=f.map(a,function(a){return a(c)});p(e).then(function(a){var c=!1,c=b?f.every(a,function(a){return a}):f.some(a,function(a){return a});d.resolve(c)},function(a){console.error(a);d.reject(a)});return d}};return x})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(g,n,k,m){g=function(e){function d(c,b){var a=e[c];a&&(e[c]=function(d){var f;
"put"===c&&(f=e.getIdentity(d));if(g)return a.apply(this,arguments);g=!0;try{var h=a.apply(this,arguments);k(h,function(a){b("object"==typeof a&&a||d,f)});return h}finally{g=!1}})}var c=[],h=0;e=n.delegate(e);e.notify=function(d,b){h++;for(var a=c.slice(),f=0,e=a.length;f<e;f++)a[f](d,b)};var l=e.query;e.query=function(d,b){b=b||{};var a=l.apply(this,arguments);if(a&&a.forEach){var f=n.mixin({},b);delete f.start;delete f.count;var g=e.queryEngine&&e.queryEngine(d,f),p=h,r=[],q;a.observe=function(d,
f){1==r.push(d)&&c.push(q=function(c,d){k(a,function(a){var l=a.length!=b.count,k,n;if(++p!=h)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var q,w=-1,v=-1;if(void 0!==d){var u=[].concat(a);g&&!c&&(u=g(a));k=0;for(n=a.length;k<n;k++){var t=a[k];if(e.getIdentity(t)==d&&!(0>u.indexOf(t))){q=t;w=k;!g&&c||a.splice(k,1);break}}}g?c&&(g.matches?g.matches(c):g([c]).length)&&(k=-1<w?w:a.length,a.splice(k,0,c),v=m.indexOf(g(a),c),a.splice(k,1),b.start&&0==
v||!l&&v==a.length?v=-1:a.splice(v,0,c)):c&&(void 0!==d?v=w:b.start||(v=e.defaultIndex||0,a.splice(v,0,c)));if((-1<w||-1<v)&&(f||!g||w!=v))for(l=r.slice(),k=0;a=l[k];k++)a(c||q,w,v)})});var l={};l.remove=l.cancel=function(){var a=m.indexOf(r,d);-1<a&&(r.splice(a,1),r.length||c.splice(m.indexOf(c,q),1))};return l}}return a};var g;d("put",function(c,b){e.notify(c,b)});d("add",function(c){e.notify(c)});d("remove",function(c){e.notify(void 0,c)});return e};n.setObject("dojo.store.Observable",g);return g})},
"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(g,n,k,m,e,d,c){return k("dijit.tree.ObjectStoreModel",c,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){e.mixin(this,c);this.childrenCache={}},getRoot:function(c,g){if(this.root)c(this.root);else{var h=this.store.query(this.query);h.then&&this.own(h);d(h,e.hitch(this,function(d){if(1!=
d.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+d.length+" items, but must return exactly one");this.root=d[0];c(this.root);h.observe&&h.observe(e.hitch(this,function(b){this.onChange(b)}),!0)}),g)}},mayHaveChildren:function(){return!0},getChildren:function(c,g,k){var h=this.store.getIdentity(c);if(this.childrenCache[h])d(this.childrenCache[h],g,k);else{var b=this.childrenCache[h]=this.store.getChildren(c);b.then&&this.own(b);b.observe&&this.own(b.observe(e.hitch(this,function(a,
f,h){this.onChange(a);f!=h&&d(b,e.hitch(this,"onChildrenChange",c))}),!0));d(b,g,k)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},newItem:function(c,d,e,g){return this.store.put(c,{parent:d,before:g})},pasteItem:function(c,d,k,p,b,a){var f=new m;if(d===k&&!p&&!a)return f.resolve(!0),f;d&&!p?this.getChildren(d,e.hitch(this,function(b){b=[].concat(b);var e=g.indexOf(b,c);b.splice(e,1);this.onChildrenChange(d,b);
f.resolve(this.store.put(c,{overwrite:!0,parent:k,oldParent:d,before:a}))})):f.resolve(this.store.put(c,{overwrite:!0,parent:k,oldParent:d,before:a}));return f},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b,a,f,w){var u=g([f._TreeNode,b],{templateString:m,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=d.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=d.toDom('\x3cinput type\x3d"checkbox" /\x3e');d.addClass(this.checkNode,"jimu-tree-check-node");d.place(this.checkNode,this.contentNode,
"first");this.own(p(this.checkNode,"click",e.hitch(this,this._onClick)));this.isLeaf?this.groupId?d.setStyle(this.checkNode,"display","none"):d.setStyle(this.checkNode,"display","inline"):d.setStyle(this.checkNode,"display","none");this.isLeaf?d.addClass(this.domNode,"jimu-tree-leaf-node"):d.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,d.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=
!1,d.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(e.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;
this.inherited(arguments)}});return g([f,b],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+w.getRandomString()},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree");this.own(q.before(this,"onClick",e.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&d.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var a=this.getAllTreeNodeWidgets();return c.map(a,e.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=c.filter(a,e.hitch(this,function(a){return a.checkNode.checked}));return c.map(a,e.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=c.map(b,e.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return c.filter(b,
e.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(b){for(var c=this._getAllTreeNodeDoms(),d=0;d<c.length;d++){var f=a.byNode(c[d]);if(f.item.id.toString()===b.toString())return f}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return c.filter(a,e.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var b=this._getAllTreeNodeDoms();return c.map(b,e.hitch(this,function(b){return a.byNode(b)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return l(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new u(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,b,c){b.isLeaf&&(d.hasClass(c.target||c.srcElement,"jimu-tree-check-node")||(this.multiple?b.toggleSelect():this.selectNodeWidget(b)));return arguments},_onCheckNodeClick:function(a,b,c){!this.multiple&&b&&this.unselectAllLeafNodeWidgets();h.stop(c);this.focusNode(a);setTimeout(e.hitch(this,function(){b?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,
a,c)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();c.forEach(a,e.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p,b,a,f,w,u,r,v,x,t,B,D,C,F,G,H,I,K,J,L,M,N,Q,O,P){function z(a){return u.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var E=m("dijit._TreeNode",[G,H,I,K,J],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(b){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=b;this._set("label",b);a("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:M,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";q.set(this.domNode,
"backgroundPosition",b+" 0px");q.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);g.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var d="_"+b+"Class";b+="Node";var f=this[d];this[d]=this.tree["get"+c+"Class"](a,this.isExpanded);h.replace(this[b],this[d]||"",f||"");q.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;h.toggle(this.domNode,"dijitTreeIsRoot",a);h.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;h.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return z(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");h.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=b.wipeIn({node:this.containerNode,duration:F.defaultDuration}),c=this._expandDeferred=new e(function(){a.stop()});n.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return z(c)},collapse:function(){if(this._collapseDeferred)return z(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");h.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=b.wipeOut({node:this.containerNode,duration:F.defaultDuration}),c=this._collapseDeferred=new e(function(){a.stop()});n.after(a,"onEnd",
function(){c.resolve(!0)},!0);a.play();return z(c)},indent:0,setChildItems:function(a){var b=this.tree,f=b.model,e=[],y=b.focusedChild,h=this.getChildren();g.forEach(h,function(a){I.prototype.removeChild.call(this,a)},this);this.defer(function(){g.forEach(h,function(a){if(!a._destroyed&&!a.getParent()){var d=function(a){var c=f.getIdentity(a.item),e=b._itemNodesMap[c];1==e.length?delete b._itemNodesMap[c]:(c=g.indexOf(e,a),-1!=c&&e.splice(c,1));g.forEach(a.getChildren(),d)};b.dndController.removeTreeNode(a);
d(a);if(b.persist){var e=g.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),h;for(h in b._openedNodes)h.substr(0,e.length)==e&&delete b._openedNodes[h];b._saveExpandedNodes()}b.lastFocusedChild&&!c.isDescendant(b.lastFocusedChild.domNode,b.domNode)&&delete b.lastFocusedChild;y&&!c.isDescendant(y.domNode,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,g.forEach(a,function(a){var c=f.getIdentity(a),d=b._itemNodesMap[c],
y;if(d)for(var h=0;h<d.length;h++)if(d[h]&&!d[h].getParent()){y=d[h];y.set("indent",this.indent+1);break}y||(y=this.tree._createTreeNode({item:a,tree:b,isExpandable:f.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),d?d.push(y):b._itemNodesMap[c]=[y]);this.addChild(y);(this.tree.autoExpand||this.tree._state(y))&&e.push(b._expandNode(y))},this),g.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=d(e);this.tree._startPaint(a);return z(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());g.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");h.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){D.focus(this.focusNode)}});a("dojo-bidi")&&E.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),g.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var A=m("dijit.Tree",[G,L,H,J],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:N,persist:!1,autoExpand:!1,dndController:P,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){v.publish(this.id,u.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new e;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(r(this.containerNode,
r.selector(".dijitTreeNode",x.enter),function(b){a._onNodeMouseEnter(C.byNode(this),b)}),r(this.containerNode,r.selector(".dijitTreeNode",x.leave),function(b){a._onNodeMouseLeave(C.byNode(this),b)}),r(this.containerNode,r.selector(".dijitTreeRow",B.press),function(b){a._onNodePress(C.getEnclosingWidget(this),b)}),r(this.containerNode,r.selector(".dijitTreeRow",B),function(b){a._onClick(C.getEnclosingWidget(this),b)}),r(this.containerNode,r.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(C.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(n.after(this.model,"onChange",u.hitch(this,"_onItemChange"),!0),n.after(this.model,"onChildrenChange",u.hitch(this,"_onItemChildrenChange"),!0),n.after(this.model,"onDelete",u.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){u.isString(this.dndController)&&(this.dndController=u.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=z(this.pendingCommandsPromise);this.onLoadDeferred.then(u.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;f.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=u.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=u.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new O(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(u.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(u.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),u.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=u.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(u.hitch(this,function(){var c=
g.map(a,function(a){return!a||u.isString(a)?a:b.model.getIdentity(a)}),d=[];g.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?z(this.set("paths",[a]).then(function(a){return a[0]})):z(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,d){var f=a.shift(),e=g.filter(d,function(a){return a.getIdentity()==f})[0];if(e)return a.length?c._expandNode(e).then(function(){return b(a,
e.getChildren())}):e;throw new A.PathError("Could not expand path at "+f);}var c=this;return z(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return d(g.map(a,function(a){a=g.map(a,function(a){return a&&u.isObject(a)?c.model.getIdentity(a):a});if(a.length)return b(a,[c.rootNode]);throw new A.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(c){return b._expandNode(c).then(function(){var b=g.filter(c.getChildren()||[],function(a){return a.isExpandable});return d(g.map(b,a))})}var b=this;return z(a(this.rootNode))},collapseAll:function(){function a(c){var f=g.filter(c.getChildren()||[],function(a){return a.isExpandable}),f=d(g.map(f,a));return!c.isExpanded||c==b.rootNode&&!b.showRoot?f:f.then(function(){return b._collapseNode(c)})}var b=this;return z(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var c=this._getNext(b);c&&c.isTreeNode&&this.focusNode(c)},_onUpArrow:function(a,b){var c=b.getPreviousSibling();if(c)for(b=c;b.isExpandable&&
b.isExpanded&&b.hasChildren();)c=b.getChildren(),b=c[c.length-1];else if(c=b.getParent(),this.showRoot||c!==this.rootNode)b=c;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var c=b.getParent();c&&c.isTreeNode&&(this.showRoot||c!==this.rootNode)&&this.focusNode(c)}},focusLastChild:function(){var a=
this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,
b){return c.isDescendant(a,b.expandoNode)||c.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,d){var f=this.isExpandoNode(b.target,a);a.isExpandable&&(c||f)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,
"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){f.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){f.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","",
"2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,d=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new e,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(d,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(u.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),
d=this.getTooltip(a);g.forEach(b,function(b){b.set({item:a,label:c,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this.model.getIdentity(a);(c=this._itemNodesMap[c])&&g.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(g.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!c.isDescendant(this.lastFocusedChild.domNode,
this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!c.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=k(this.cookieName);a&&g.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=g.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");
if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);k(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!u.isString(this.dndController)&&this.dndController.destroy();
this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&l.setMarginBox(this.domNode,a);this._nodePixelIndent=l.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(u.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),
delete this._adjustWidthsTimer);var b=u.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});t(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new E(a)},
focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});a("dojo-bidi")&&A.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});A.PathError=p("TreePathError");A._TreeNode=E;return A})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(g,n,k,m){return k("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],
newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(e){m.mixin(this,e);this.connects=[];e=this.store;if(!e.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");e.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([n.after(e,"onNew",m.hitch(this,"onNewItem"),!0),n.after(e,"onDelete",m.hitch(this,"onDeleteItem"),!0),n.after(e,"onSet",m.hitch(this,"onSetItem"),
!0)]))},destroy:function(){for(var e;e=this.connects.pop();)e.remove()},getRoot:function(e,d){this.root?e(this.root):this.store.fetch({query:this.query,onComplete:m.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];e(this.root)}),onError:d})},mayHaveChildren:function(e){return g.some(this.childrenAttrs,function(d){return this.store.hasAttribute(e,d)},this)},getChildren:function(e,d,c){var h=
this.store;if(h.isItemLoaded(e)){for(var l=[],k=0;k<this.childrenAttrs.length;k++)var p=h.getValues(e,this.childrenAttrs[k]),l=l.concat(p);var b=0;this.deferItemLoadingUntilExpand||g.forEach(l,function(a){h.isItemLoaded(a)||b++});0==b?d(l):g.forEach(l,function(a,e){h.isItemLoaded(a)||h.loadItem({item:a,onItem:function(a){l[e]=a;0==--b&&d(l)},onError:c})})}else{var a=m.hitch(this,arguments.callee);h.loadItem({item:e,onItem:function(b){a(b,d,c)},onError:c})}},isItem:function(e){return this.store.isItem(e)},
fetchItemByIdentity:function(e){this.store.fetchItemByIdentity(e)},getIdentity:function(e){return this.store.getIdentity(e)},getLabel:function(e){return this.labelAttr?this.store.getValue(e,this.labelAttr):this.store.getLabel(e)},newItem:function(e,d,c){var h={parent:d,attribute:this.childrenAttrs[0]},g;this.newItemIdAttr&&e[this.newItemIdAttr]?this.fetchItemByIdentity({identity:e[this.newItemIdAttr],scope:this,onItem:function(l){l?this.pasteItem(l,null,d,!0,c):(g=this.store.newItem(e,h))&&void 0!=
c&&this.pasteItem(g,d,d,!1,c)}}):(g=this.store.newItem(e,h))&&void 0!=c&&this.pasteItem(g,d,d,!1,c)},pasteItem:function(e,d,c,h,l){var k=this.store,m=this.childrenAttrs[0];d&&g.forEach(this.childrenAttrs,function(a){if(k.containsValue(d,a,e)){if(!h){var b=g.filter(k.getValues(d,a),function(a){return a!=e});k.setValues(d,a,b)}m=a}});if(c)if("number"==typeof l){var b=k.getValues(c,m).slice();b.splice(l,0,e);k.setValues(c,m,b)}else k.setValues(c,m,k.getValues(c,m).concat(e))},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){},onNewItem:function(e,d){d&&this.getChildren(d.item,m.hitch(this,function(c){this.onChildrenChange(d.item,c)}))},onDeleteItem:function(e){this.onDelete(e)},onSetItem:function(e,d){if(-1!=g.indexOf(this.childrenAttrs,d))this.getChildren(e,m.hitch(this,function(c){this.onChildrenChange(e,c)}));else this.onChange(e)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(g,n,
k,m,e){return n("dijit.tree.ForestStoreModel",e,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(d){this.root={store:this,root:!0,id:d.rootId,label:d.rootLabel,children:d.rootChildren}},mayHaveChildren:function(d){return d===this.root||this.inherited(arguments)},getChildren:function(d,c,e){d===this.root?this.root.children?c(this.root.children):this.store.fetch({query:this.query,onComplete:m.hitch(this,function(d){this.root.children=d;c(d)}),onError:e}):this.inherited(arguments)},
isItem:function(d){return d===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(d){if(d.identity==this.root.id){var c=d.scope||k.global;d.onItem&&d.onItem.call(c,this.root)}else this.inherited(arguments)},getIdentity:function(d){return d===this.root?this.root.id:this.inherited(arguments)},getLabel:function(d){return d===this.root?this.root.label:this.inherited(arguments)},newItem:function(d,c,e){return c===this.root?(this.onNewRootItem(d),this.store.newItem(d)):this.inherited(arguments)},
onNewRootItem:function(){},pasteItem:function(d,c,e,g,k){if(c===this.root&&!g)this.onLeaveRoot(d);this.inherited(arguments,[d,c===this.root?null:c,e===this.root?null:e,g,k]);if(e===this.root)this.onAddToRoot(d)},onAddToRoot:function(d){console.log(this,": item ",d," added to root")},onLeaveRoot:function(d){console.log(this,": item ",d," removed from root")},_requeryTop:function(){var d=this.root.children||[];this.store.fetch({query:this.query,onComplete:m.hitch(this,function(c){this.root.children=
c;if(d.length!=c.length||g.some(d,function(d,e){return c[e]!=d}))this.onChildrenChange(this.root,c)})})},onNewItem:function(d,c){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(d){-1!=g.indexOf(this.root.children,d)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(d,c,e,g){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(g,n,k,m,e,d,c,h,l,q,p){return n("dijit.tree._dndSelector",p,{constructor:function(){this.selection={};this.anchor=null;this.events.push(h(this.tree.domNode,l.press,m.hitch(this,"onMouseDown")),h(this.tree.domNode,l.release,m.hitch(this,"onMouseUp")),h(this.tree.domNode,l.move,m.hitch(this,"onMouseMove")),h(this.tree.domNode,q.press,m.hitch(this,"onClickPress")),h(this.tree.domNode,q.release,m.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],a=this.selection,
c;for(c in a)b.push(a[c]);return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,a){this.setSelection(this.getSelectedTreeNodes().concat([b]));a&&(this.anchor=b);return b},removeTreeNode:function(b){var a=g.filter(this.getSelectedTreeNodes(),function(a){return!d.isDescendant(a.domNode,b.domNode)});this.setSelection(a);return b},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},
setSelection:function(b){var a=this.getSelectedTreeNodes();g.forEach(this._setDifference(a,b),m.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));g.forEach(this._setDifference(b,a),m.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(b,a){g.forEach(a,function(a){a.__exclude__=!0});var c=g.filter(b,function(a){return!a.__exclude__});g.forEach(a,function(a){delete a.__exclude__});
return c},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),a=[],c=[];g.forEach(b,function(b){var d=b.getTreePath();c.push(b);a.push(d)},this);b=g.map(c,function(a){return a.item});this.tree._set("paths",a);this.tree._set("path",a[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,
this.current))){"mousedown"==b.type&&c.isLeft(b)&&b.preventDefault();var a="keydown"==b.type?this.tree.focusedChild:this.current;if(a){var d=e.getCopyKeyState(b),h=a.id;this.singular||b.shiftKey||!this.selection[h]?(this._doDeselect=!1,this.userSelect(a,d,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,e.getCopyKeyState(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(b,a){if(b===a)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-a.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(a)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(b);var d=doc.createRange();d.setStartBefore(a);return c.compareBoundaryPoints(c.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(b,a,c){if(this.singular)this.anchor==b&&a?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(c&&this.anchor){a=this._compareNodes(this.anchor.rowNode,b.rowNode);c=this.anchor;0>a?a=c:(a=b,b=c);for(c=[];a!=b;)c.push(a),a=this.tree._getNext(a);c.push(b);this.setSelection(c)}else this.selection[b.id]&&a?this.removeTreeNode(b):a?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,
a){a=a||k.global;for(var c in this.selection)b.call(a,this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(g,n,k,m,e,d){return n("dijit.tree._dndContainer",null,{constructor:function(c,h){this.tree=c;this.node=c.domNode;m.mixin(this,h);this.containerState="";k.add(this.node,"dojoDndContainer");this.events=[e(this.node,d.enter,m.hitch(this,"onOverEvent")),e(this.node,d.leave,
m.hitch(this,"onOutEvent")),g.after(this.tree,"_onNodeMouseEnter",m.hitch(this,"onMouseOver"),!0),g.after(this.tree,"_onNodeMouseLeave",m.hitch(this,"onMouseOut"),!0),e(this.node,"dragstart, selectstart",function(c){c.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,d){var e="dojoDnd"+c,h=c.toLowerCase()+"State";k.replace(this.node,e+
d,e+this[h]);this[h]=d},_addItemClass:function(c,d){k.add(c,"dojoDndItem"+d)},_removeItemClass:function(c,d){k.remove(c,"dojoDndItem"+d)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/QueryableLayerChooserFromMap":function(){define(["dojo/_base/declare","./LayerChooserFromMap","dojo/_base/html"],function(g,n,k){return g([n],{baseClass:"jimu-queryable-layer-chooser-from-map",declaredClass:"jimu.dijit.QueryableLayerChooserFromMap",
postMixInProperties:function(){this.inherited(arguments);this.filter=n.createQueryableLayerFilter()},postCreate:function(){this.inherited(arguments);k.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},getHandledItem:function(g){var e=this.inherited(arguments),d=g&&g.layerInfo,d=d&&d.layerObject;e.url=d&&d.url||"";return e}})})},"widgets/Filter/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:widgets/Filter/setting/SingleFilterSetting.html":'\x3cdiv\x3e\r\n\t\x3ctable\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"100"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e${jimuNls.common.layer}\x3c/td\x3e\r\n\t\t\t\t\x3ctd data-dojo-attach-point\x3d"layerTd"\x3e\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e${jimuNls.common.title}\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"nameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"change:_onNameTextBoxChanged" data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e${jimuNls.common.icon}\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"click-picker" data-dojo-attach-event\x3d"click:_onImageChooserDivClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/ImageChooser" data-dojo-attach-point\x3d"imageChooser" data-dojo-props\x3d"cropImage:true,showSelfImg:true,goldenWidth:16,goldenHeight:16,format:[\'image/gif\',\'image/png\',\'image/jpeg\']" class\x3d"jimu-float-leading" style\x3d"width:16px;height:16px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" data-dojo-attach-point\x3d"tdUseMapFilter"\x3e\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv style\x3d"margin-top:10px;"\x3e\r\n\t\t\x3cdiv\x3e${nls.filterExpression}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filterDiv"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/Filter.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentSection" class\x3d"content-section"\x3e\r\n\t\t\x3cdiv class\x3d"add-btn-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddExp" data-dojo-attach-event\x3d"click:_onBtnAddExpClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-expression jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddExp" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addAnotherExpression}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddSet" data-dojo-attach-event\x3d"click:_onBtnAddSetClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-set jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddSet" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addSet}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"matchMsg" style\x3d"margin-top:11px;margin-bottom:11px;display:none;"\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"allExpsBox" data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"errorSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"noFilterTipSection" class\x3d"no-filter-tip" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/_filter/TwoNumbersValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/TwoDatesValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/ListValueProvider.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"valuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"label",required:false,intermediateChanges:true\' style\x3d"width:100%;" data-dojo-attach-event\x3d"input:_onFilteringSelectInput"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:jimu/dijit/templates/_SingleFilter.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"setting-table" cellpadding\x3d"0" cellspacing\x3d"0" cellpadding\x3d"10px" style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"fields-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"displayName",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"operators-td" nowrap\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"operatorsSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;" class\x3d"operator-select dijit-form-Select restrict-select-width"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.none}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"value-td" nowrap data-dojo-attach-point\x3d"valueTd"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"attributeValueContainer" class\x3d"value-container"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-table-container"\x3e\r\n\t\t\t\t\t\t\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"valueRadio" checked\x3d"true" disabled  title\x3d"${nls.valueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"valueLabel" title\x3d"${nls.valueTooltip}"\x3e${nls.value}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"fieldRadio" disabled title\x3d"${nls.fieldTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"fieldLabel" title\x3d"${nls.fieldTooltip}"\x3e${nls.field}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"uniqueTd"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"uniqueRadio" disabled title\x3d"${nls.uniqueValueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"uniqueLabel" title\x3d"${nls.uniqueValueTooltip}"\x3e${nls.unique}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"delete-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-delete" data-dojo-attach-point\x3d"btnDelete"\r\n\t\t\t\t\t data-dojo-attach-event\x3d"click:_destroySelf"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"askvalues"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAskValues" label\x3d"${nls.askForValues}" class\x3d"jimu-trailing-margin6"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxCaseSensitive" label\x3d"${nls.caseSensitive}" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"promptSection" class\x3d"prompt"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"promptTable" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"prompt-table" style\x3d"width:100%;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.prompt}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"promptTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.hint}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"hintTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"cascadeTr" class\x3d"cascade-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"margin-bottom:5px;"\x3e${nls.listValues}:\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"cascadeSelect" class\x3d"cascade-select restrict-select-width" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.noneCascadeFilterTip}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"previous"\x3e${nls.previousCascadeFilterTip}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"all"\x3e${nls.allCascadeFilterTip}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_FilterSet.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"header-table" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"onclick:_destroySelf"\r\n\t\t\t\t\t class\x3d"jimu-icon jimu-icon-delete"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:14px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAdd" class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n  \x3ctable data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/Filter/setting/Setting.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.addTaskTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"items-list jimu-not-selectable"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-btn" data-dojo-attach-event\x3d"click:_onBtnAddItemClicked"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"tip"\x3e${nls.newFilter}\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"items-list-content" data-dojo-attach-point\x3d"listContent" data-dojo-attach-event\x3d"click:_onListContentClicked"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"separator not-visible" data-dojo-attach-point\x3d"separator"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"single-setting-content" data-dojo-attach-point\x3d"singleSettingContent"\x3e\r\n\t\t\t\x3cdiv class\x3d"no-task-tip" data-dojo-attach-point\x3d"noTaskTip"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Filter/setting/css/style.css":'.jimu-widget-filter-setting{width: 100%; height: 100%;}.jimu-widget-filter-setting .not-visible{display: none;}.jimu-widget-filter-setting .content{position: absolute; left: 0; right: 0; top: 40px; bottom: 0;}.jimu-widget-filter-setting .content \x3e div{position: absolute; top: 0; bottom: 0; height: 100%;}.jimu-widget-filter-setting .items-list{left: 0; width: 300px;}.jimu-widget-filter-setting \x3e .content \x3e .separator{left: 320px; width: 1px; background-color: #ccc;}.jimu-widget-filter-setting .single-setting-content{right: 0; width: 610px;}.jimu-rtl .jimu-widget-filter-setting .items-list{left: auto; right: 0;}.jimu-rtl .jimu-widget-filter-setting \x3e .content \x3e .separator{left: auto; right: 320px;}.jimu-rtl .jimu-widget-filter-setting .single-setting-content{right: auto; left: 0;}.jimu-widget-filter-setting .items-list-content{position: absolute; left: 0; right: 0; top: 50px; bottom: 0; overflow: auto;}.jimu-widget-filter-setting .items-list-content .item{position: relative; width: 100%; height: 40px; border-top: 1px solid #F3F3F3; cursor: pointer;}.jimu-widget-filter-setting .items-list-content .item:hover{background-color: #F9F9F9;}.jimu-widget-filter-setting .items-list-content .item.selected{background-color: #F3F3F3 !important; border-left: 4px solid #24B5CC;}.jimu-rtl .jimu-widget-filter-setting .items-list-content .item.selected{border-left: 0; border-right: 4px solid #24B5CC;}.jimu-widget-filter-setting .items-list-content .item \x3e *{cursor: pointer;}.jimu-widget-filter-setting .items-list-content .item:first-child{border-top: 0;}.jimu-widget-filter-setting .items-list-content .item .label{position: absolute; left: 8px; right: 8px; top: 0; bottom: 0; line-height: 40px; font-size: 12px; color: #353535;}.jimu-widget-filter-setting .items-list-content .item.selected .label{font-weight: bold; color: #000;}.jimu-widget-filter-setting .items-list-content .item .actions{position: relative; display: none; height: 100%; overflow: hidden; background-color: #F9F9F9;}.jimu-widget-filter-setting .items-list-content .item:hover .actions{display: block;}.jimu-widget-filter-setting .items-list-content .item.selected .actions{background-color: #F3F3F3 !important;}.jimu-widget-filter-setting .items-list-content .item .action{width: 12px; height: 12px; background-repeat: no-repeat; background-position: center center; position: relative; top: 14px; cursor: pointer; margin: 0 5px;}.jimu-widget-filter-setting .items-list-content .item .action.up{background-image: url("images/up_normal.png");}.jimu-widget-filter-setting .items-list-content .item .action.up:hover{background-image: url("images/up_hover.png");}.jimu-widget-filter-setting .items-list-content .item .action.down{background-image: url("images/down_normal.png");}.jimu-widget-filter-setting .items-list-content .item .action.down:hover{background-image: url("images/down_hover.png");}.jimu-widget-filter-setting .items-list-content .item .action.delete{background-image: url("images/delete_normal.png");}.jimu-widget-filter-setting .items-list-content .item .action.delete:hover{background-image: url("images/delete_hover.png");}.jimu-widget-filter-setting .items-list-content .item:first-child .action.up{display: none;}.jimu-widget-filter-setting .items-list-content .item:last-child .action.down{display: none;}.jimu-widget-filter-setting .add-btn{display: inline-block; width: 100%; height: 32px; background-color: #24B5CC; color: #ffffff; text-align: center; cursor: pointer;}.jimu-widget-filter-setting .add-btn:hover{background-color: #0090A7;}.jimu-widget-filter-setting .add-btn \x3e div{display: inline-block; cursor: pointer; height: 32px; line-height: 32px; font-size: 12px;}.jimu-widget-filter-setting .add-btn .icon{position: relative; top: 1px; width: 12px; height: 12px; background: url("images/add.png") center center no-repeat; background-size: contain;}.jimu-widget-filter-setting .add-btn .tip{margin-left: 8px;}.jimu-rtl .jimu-widget-filter-setting .add-btn .tip{margin-left: 0; margin-right: 8px;}html.hr .jimu-widget-filter-setting .items-list{width: 280px;}html.hr .jimu-widget-filter-setting \x3e .content \x3e .separator{left: 295px;}html.hr .jimu-widget-filter-setting .single-setting-content{width: 650px;}.jimu-widget-singlefilter-setting{position: absolute; left: 0; right: 0; top: 0; bottom: 0;}.jimu-widget-singlefilter-setting \x3e table{width: 100%; table-layout: fixed; border-collapse: collapse;}.jimu-widget-singlefilter-setting \x3e table \x3e tbody \x3e tr \x3e td{padding: 5px 0;}.jimu-widget-singlefilter-setting .jimu-filter .allExpsBox{max-height: 270px; overflow: auto;}.jimu-widget-singlefilter-setting .click-picker{display: inline-block; border: 1px solid #D7D7D7; height: 24px; overflow: hidden; padding: 0 4px; cursor: pointer;}.jimu-widget-singlefilter-setting .click-picker .jimu-image-chooser{position: relative; top: 4px;}.jimu-widget-singlefilter-setting .click-picker .separator{position: relative; top: 4px; width: 1px; height: 16px; background-color: #D7D7D7; margin: 0 5px;}.jimu-widget-singlefilter-setting .click-picker .jimu-icon{position: relative; top: 8px;}.jimu-widget-filter-setting .single-setting-content .no-task-tip{position: relative; top: 50%; margin-top: -10px;}.jimu-widget-filter-setting .single-setting-content .no-task-tip span{font-weight: bold;}',
"*now":function(g){g(['dojo/i18n!*preload*widgets/Filter/setting/nls/Setting*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/on dojo/query dojo/_base/html dojo/_base/lang dojo/_base/array dojo/_base/declare dijit/_WidgetsInTemplateMixin esri/lang jimu/utils jimu/BaseWidgetSetting ./SingleFilterSetting jimu/LayerInfos/LayerInfos jimu/dijit/LoadingShelter".split(" "),function(g,n,k,m,e,d,c,h,l,q,p,b){return d([q,c],{baseClass:"jimu-widget-filter-setting",singleSetting:null,layerChooserSelect:null,layerInfosObj:null,postMixInProperties:function(){this.jimuNls=window.jimuNls;this.layerInfosObj=b.getInstanceSync();
this.config&&(this.config=this._getConfigWithValidDataSource(this.config));this.noTaskNls=this.nls.noTasksTip;this.noTaskNls=h.substitute({newFilter:"\x3cspan\x3e"+this.nls.newFilter+"\x3c/span\x3e"},this.noTaskNls)},_getConfigWithValidDataSource:function(a){var b={filters:[]};b.filters=e.filter(a.filters,m.hitch(this,function(a){return a.layerId?!!this.layerInfosObj.getLayerInfoById(a.layerId):!0}));return b},postCreate:function(){this.inherited(arguments);this.noTaskTip.innerHTML=this.noTaskNls;
this.config&&this.setConfig(this.config)},_onListContentClicked:function(a){a=a.target||a.srcElement;var b=l.getAncestorDom(a,function(a){return k.hasClass(a,"item")},3);b&&(k.hasClass(a,"action")?k.hasClass(a,"up")?b.previousElementSibling&&k.place(b,b.previousElementSibling,"before"):k.hasClass(a,"down")?b.nextElementSibling&&k.place(b,b.nextElementSibling,"after"):k.hasClass(a,"delete")&&(this.singleSetting&&this.singleSetting.target===b&&(this.singleSetting.destroy(),this.singleSetting=null),
k.destroy(b),a=n(".item",this.listContent),0<a.length&&this._createSingleSetting(a[0]),this._updateNoQueryTip()):this.singleSetting?this.singleSetting.target!==b&&this.singleSetting.getConfig()&&(this.singleSetting.destroy(),this.singleSetting=null,this._createSingleSetting(b)):this._createSingleSetting(b))},_onBtnAddItemClicked:function(){if(this.singleSetting)if(this.singleSetting.getConfig())this.singleSetting.destroy(),this.singleSetting=null;else return;var a=this._createTarget();this._createSingleSetting(a,
null)},_createSingleSetting:function(a){n(".item",this.listContent).removeClass("selected");this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.singleSetting=new p({map:this.map,nls:this.nls,target:a,folderUrl:this.folderUrl,layerInfosObj:this.layerInfosObj});this.singleSetting.placeAt(this.singleSettingContent);this.own(g(this.singleSetting,"loading",m.hitch(this,function(){this.shelter.show()})));this.own(g(this.singleSetting,"unloading",m.hitch(this,function(){this.shelter.hide()})));
this.own(g(this.singleSetting,"before-destroy",m.hitch(this,function(){k.addClass(this.separator,"not-visible")})));k.addClass(a,"selected");a.singleConfig?this.singleSetting.setConfig(a.singleConfig):setTimeout(m.hitch(this,function(){this.singleSetting.showLayerChooserPopup()}),50);k.removeClass(this.separator,"not-visible");k.addClass(this.noTaskTip,"not-visible")},_createTarget:function(a){a=a||"";return k.create("div",{"class":"item",innerHTML:'\x3cdiv class\x3d"label jimu-ellipsis" title\x3d"'+
a+'"\x3e'+a+'\x3c/div\x3e\x3cdiv class\x3d"actions jimu-float-trailing"\x3e\x3cdiv class\x3d"delete action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"down action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"up action jimu-float-trailing"\x3e\x3c/div\x3e\x3c/div\x3e'},this.listContent)},_updateNoQueryTip:function(){0<n(".item",this.listContent).length?k.addClass(this.noTaskTip,"not-visible"):k.removeClass(this.noTaskTip,"not-visible")},setConfig:function(a){var b=null;e.forEach(a.filters,
m.hitch(this,function(a,c){var d=this._createTarget(a.name);d.singleConfig=a;0===c&&(b=d)}));b&&this._createSingleSetting(b);this._updateNoQueryTip()},getConfig:function(){if(this.singleSetting&&!this.singleSetting.getConfig())return!1;var a=n(".item",this.listContent),b={filters:[]};b.filters=e.map(a,m.hitch(this,function(a){return a.singleConfig}));return b},destroy:function(){this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.inherited(arguments)}})});