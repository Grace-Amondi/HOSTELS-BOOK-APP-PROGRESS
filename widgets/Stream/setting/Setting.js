// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Stream/setting/utils":function(){define(["dojo/_base/array"],function(l){return{getStreamLayers:function(h){var f=[],q;l.forEach(h.graphicsLayerIds,function(m){q=h.getLayer(m);"esri.layers.StreamLayer"===q.declaredClass&&f.push(q)});f.reverse();return f},getStreamLayerName:function(h){h=/\/([^\/]+)\/StreamServer/.exec(h);return 1<h.length?h[1]:""}}})},"widgets/Stream/setting/StreamSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./StreamSetting.html dojo/dom-class dojo/dom-style dojo/Evented esri/symbols/jsonUtils jimu/dijit/CheckBox jimu/dijit/SymbolPicker ./FilterConfigPopup ../FilterUtil jimu/dijit/LoadingShelter".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e,g,a,c,u){return l([q,m,k,p],{baseClass:"jimu-widget-stream-setting",templateString:d,map:null,nls:null,layerName:null,streamLayer:null,_filterList:[],_started:!1,postCreate:function(){this.inherited(arguments);var c=null;this._filterList=[];this.startStopCheckBox=new g({checked:!0,label:this.nls.startStopStream});this.startStopCheckBox.placeAt(this.startStopCheckBoxDiv);this.clearPreviousCheckBox=new g({checked:!0,label:this.nls.clearStream});this.clearPreviousCheckBox.placeAt(this.clearPreviousCheckBoxDiv);
this.drawPreviousCheckBox=new g({checked:!1,label:this.nls.drawPrevious});this.drawPreviousCheckBox.placeAt(this.drawPreviousCheckBoxDiv);this.streamLayer&&(1===this.streamLayer.maximumTrackPoints?this.drawPreviousCheckBox.setStatus(!1):1<this.streamLayer.maximumTrackPoints&&this.drawPreviousCheckBox.setValue(!0));this.spatialFilterCheckBox=new g({checked:!0,label:this.nls.spatialFilter,onChange:h.hitch(this,this._spatialStatusChange)});this.spatialFilterCheckBox.placeAt(this.spatialFilterCheckBoxDiv);
this.mapExtentCheckBox=new g({checked:!1,label:this.nls.limitMapExtent});this.mapExtentCheckBox.placeAt(this.mapExtentCheckBoxDiv);this.drawExtentCheckBox=new g({checked:!1,label:this.nls.limitDrawExtent,onChange:h.hitch(this,function(a){a?b.set(this.symbolPickerNode,"display","inline"):b.set(this.symbolPickerNode,"display","none")})});b.set(this.drawExtentCheckBox.domNode,"vertical-align","top");this.drawExtentCheckBox.placeAt(this.drawExtentCheckBoxDiv);this.config&&this.config.drawSymbol&&(c=e.fromJson(this.config.drawSymbol));
this.symbolPicker=new a({symbol:c,type:"fill"});b.set(this.symbolPicker.domNode,"margin-top","-16px");b.set(this.symbolPicker.domNode,"margin-left","-20px");this.symbolPicker.placeAt(this.symbolPickerNode);this.symbolPicker.startup();this.filterCheckBox=new g({checked:!1,label:this.nls.attributeFilter,onChange:h.hitch(this,this._filterStatusChange)});this.filterCheckBox.placeAt(this.filterCheckBoxDiv);this.config?this.setConfig(this.config):this.streamLayer&&this.streamLayer.getDefinitionExpression()&&
(this.shelter.show(),u.buildFilterInfoFromString(this.streamLayer,this.streamLayer.getDefinitionExpression(),this.nls.newFilter).then(h.hitch(this,function(a){null!==a&&(this._filterList.push(a),this.filterCheckBox.setValue(!0),this.filterCheckBox.setStatus(!1));this.shelter.hide()})))},setConfig:function(a){this.config=a;this.layerName=this.config.layerName;this._filterList=this.config.filterList;this.startStopCheckBox.setValue(this.config.startStop);this.clearPreviousCheckBox.setValue(this.config.clear);
this.drawPreviousCheckBox.setValue(this.config.drawPrevious);this.spatialFilterCheckBox.setValue(this.config.spatialFilter);this.mapExtentCheckBox.setValue(!!this.config.mapExtentFilter);this.drawExtentCheckBox.setValue(!!this.config.drawExtentFilter);this.config.drawExtentFilter?b.set(this.symbolPickerNode,"display","inline"):b.set(this.symbolPickerNode,"display","none");this.filterCheckBox.setValue(this.config.attrFilter)},getConfig:function(){var a={layerId:this.streamLayer.id,layerName:this.layerName||
"",startStop:this.startStopCheckBox.getValue(),clear:this.clearPreviousCheckBox.getValue(),drawPrevious:this.drawPreviousCheckBox.getValue(),spatialFilter:this.spatialFilterCheckBox.getValue(),mapExtentFilter:this.mapExtentCheckBox.getValue(),drawExtentFilter:this.drawExtentCheckBox.getValue(),attrFilter:this.filterCheckBox.getValue(),filterList:this._filterList};a.mapExtentFilter||a.drawExtentFilter||(a.spatialFilter=!1);a.drawExtentFilter&&(a.drawSymbol=this.symbolPicker.getSymbol().toJson());return a},
_filterStatusChange:function(a){a?r.remove(this.filterIcon,"disabled"):r.add(this.filterIcon,"disabled")},_spatialStatusChange:function(a){a?b.set(this.spatialChoices,"display","block"):b.set(this.spatialChoices,"display","none")},_showFilter:function(){if(this.filterCheckBox.getValue()){var a;a=new c({titleLabel:this.nls.configFilter,filterList:this._filterList,streamLayer:this.streamLayer,nls:this.nls});this.own(f(a,"ok",h.hitch(this,function(c){this._filterList=c;a.close()})));this.own(f(a,"cancel",
h.hitch(this,function(){a.close()})));a.startup()}}})})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),function(l,h,f,q,m,k,d,r,b,p,e,g,a,c){return l([h,f,q],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',
tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();var a=this.symbolChooser.getSymbol();a&&this._drawSymbol(a)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var c=k.create("div");this.tooltipDialog=new p({content:c});this.symbolChooser=new a({symbol:this.symbol,
type:this.type});this.symbolChooser.placeAt(c);this.symbolChooser.startup();this.own(r(this.symbolChooser,"change",m.hitch(this,function(a){this._drawSymbol(a);this.emit("change",a)})));this.own(r(this.domNode,"click",m.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(r(document.body,"click",m.hitch(this,function(a){var c=a.target||a.srcElement;a=this._getColorPickers();0<a.length&&d.some(a,function(a){return a.isPartOfPopup(c)})||
(a=this.tooltipDialog.domNode,c===a||k.isDescendant(c,a)||this._hideTooltipDialog())})));this.own(r(this.symbolChooser,"resize",m.hitch(this,function(){this._isTooltipDialogOpened&&(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var a=b(".jimu-color-picker",this.symbolChooser.domNode);return d.map(a,m.hitch(this,function(a){return g.byNode(a)}))},reset:function(){this.symbol=this.type=null;k.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(a){this.reset();
a&&(this._drawSymbol(a),this.symbolChooser.showBySymbol(a))},showByType:function(a){this.reset();this.symbolChooser.showByType(a);(a=this.symbolChooser.getSymbol())&&this._drawSymbol(a)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(a){k.empty(this.symbolNode);a&&(a=c.createSymbolNode(a,{width:16,height:16}))&&k.place(a,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(e.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),
this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(e.close(this.tooltipDialog),this._isTooltipDialogOpened=!1)}})})},"widgets/Stream/setting/FilterConfigPopup":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/LoadingIndicator ./FilterConfig".split(" "),function(l,h,f,q,m,k,d){return l([m,h],{width:1024,height:600,titleLabel:"",filterList:null,streamLayer:null,nls:null,constructor:function(){this.inherited(arguments);
this.nls=f.clone(window.jimuNls.common);this.buttons=[{label:this.nls.ok,onClick:f.hitch(this,this._accept)},{label:this.nls.cancel,onClick:f.hitch(this,this._reject)}]},postCreate:function(){this.inherited(arguments);q.addClass(this.domNode,"stream-filter-popup");this._initLoading();this._initFilter()},_initFilter:function(){this.filter=new d({streamLayer:this.streamLayer,config:this.filterList,nls:this.nls});this.filter.placeAt(this.contentContainerNode)},_reject:function(){this.emit("cancel")},
_accept:function(){var d=this.filter.getConfig();d?this.emit("ok",d):this.emit(null)},_initLoading:function(){this.loading=new k({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"widgets/Stream/setting/FilterConfig":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/dom-style dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./FilterConfig.html ./SingleFilter jimu/dijit/Message jimu/dijit/SimpleTable jimu/dijit/LoadingShelter".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e,g,a){return l([d,r,b],{baseClass:"jimu-widget-stream-filter",templateString:p,streamLayer:null,config:null,postCreate:function(){this.inherited(arguments);this.filterList=new a({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.filterList);k.add(this.filterList.domNode,"stream-filter-table");m.set(this.filterList.domNode,
"height","100%");this.own(q(this.filterList,"row-select",h.hitch(this,this._onFilterSelected)));this.own(q(this.filterList,"row-delete",h.hitch(this,this._onFilterRemoved)));this.filterList.startup();this.config&&0<this.config.length&&this._applyConfig()},_applyConfig:function(){this.filterList.clear();f.forEach(this.config,h.hitch(this,function(a,b){var c=this.filterList.addRow({name:a.name||this.nls.newFilter}).tr;this._createFilter(c,a);0===b&&this.filterList.selectRow(c)}))},getConfig:function(){var a,
b=[];f.forEach(this.filterList.getRows(),function(c){a=c.filter;b.push(a.getConfig())});return b},_addFilter:function(){var a;a=this.filterList.addRow({name:this.nls.newFilter});a.success?(a=a.tr,this._createFilter(a,{name:this.nls.newFilter}),this.filterList.selectRow(a)):new g({message:this.nls.addFilterFailed})},_onFilterSelected:function(a){var c;this.currentTR?this.currentTR!==a&&((c=this.currentTR.filter)&&m.set(c.domNode,"display","none"),this.currentTR=a,(c=this.currentTR.filter)&&m.set(c.domNode,
"display","block")):(this.currentTR=a,(c=this.currentTR.filter)&&m.set(c.domNode,"display","block"))},_onFilterRemoved:function(a){var c=a.filter;c&&(c.destroy(),a.filter=null)},_createFilter:function(a,b){var c=new e({config:b,streamLayer:this.streamLayer,nls:this.nls});c.placeAt(this.singleFilterContainer);a.filter=c;this.own(q(c,"filterNameChanged",h.hitch(this,function(c){this.filterList.editRow(a,{name:c})})));m.set(c.domNode,"display","none")}})})},"widgets/Stream/setting/SingleFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/json dojo/on dojo/Evented dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleFilter.html jimu/dijit/Filter jimu/dijit/SimpleTable jimu/dijit/LoadingShelter dijit/form/ValidationTextBox".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e){return l([d,r,b,m],{baseClass:"jimu-widget-stream-filter",templateString:p,streamLayer:null,config:null,_inherited:null,_definitionExpression:null,postCreate:function(){this.inherited(arguments);this._inherited=!1;this._definitionExpression="";this._init()},_init:function(){var b;this.filterNameEditor.set("value",this.config.name||this.nls.newFilter);"inherited"in this.config&&(this._inherited=this.config.inherited);"definitionExpression"in this.config&&(this._definitionExpression=
this.config.definitionExpression);this.own(q(this.filterNameEditor,"change",h.hitch(this,function(a){this.emit("filterNameChanged",a)})));this.filter=new e({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;margin-top:22px;"});this.filter.placeAt(this.singleFilterContent);this._inherited?(k.set(this.filterMask,"display","block"),k.set(this.filterMaskTip,"display","block")):(k.set(this.filterMask,"display","none"),k.set(this.filterMaskTip,"display","none"));this.streamLayer&&
this.config&&(this.shelter.show(),b=f.parse(this.streamLayer._json),"object"===typeof this.config&&"object"===typeof this.config.filterInfo?this.filter.buildByFilterObj(this.streamLayer.url,this.config.filterInfo,b).then(h.hitch(this,function(){this.shelter.hide()})):this.filter.buildByExpr(this.streamLayer.url,"1\x3d1",b).then(h.hitch(this,function(){this.shelter.hide()})))},getConfig:function(){return{inherited:this._inherited,definitionExpression:this._definitionExpression,name:this.filterNameEditor.get("value"),
filterInfo:this.filter.toJson()}}})})},"jimu/dijit/Filter":function(){define("dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Filter.html jimu/filterUtils jimu/utils jimu/dijit/_filter/ValueProviderFactory dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/aspect dojo/query dojo/Deferred esri/request ./_SingleFilter ./_FilterSet ./LoadingIndicator".split(" "),function(l,h,f,q,m,k,d,r,b,p,e,g,a,c,u,v,w,n,
t){return h([f,q,m,d,l],{templateString:k,baseClass:"jimu-filter",declaredClass:"jimu.dijit.Filter",nls:null,_validOptions:!1,_layerDefinition:null,_def:null,valueProviderFactory:null,noFilterTip:"",enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsg.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.noFilterTip&&"string"===
typeof this.noFilterTip&&(this.noFilterTipSection.innerHTML=this.noFilterTip)},reset:function(){this.isBuilding()||(this.removeAllFilters(),this.url=null,this.isHosted=!1,this.valueProviderFactory=this.partsObj=this.expr=this._layerDefinition=null)},isBuilding:function(){return this._def&&!this._def.isFulfilled()},buildByExpr:function(a,c,n){var b=new v;this.isBuilding()?b.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=r.isHostedService(this.url),this.expr=
c||"1\x3d1",this._layerDefinition=n,b=this._def=this._init("expr"));return b},buildByFilterObj:function(a,c,n){var b=new v;this.isBuilding()?b.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=r.isHostedService(this.url),this.partsObj=this._updatePartsObj(c),this._layerDefinition=n,b=this._def=this._init("partsObj"));return b},_updatePartsObj:function(c){a.forEach(c,e.hitch(this,function(c){c.parts?a.forEach(c.parts,e.hitch(this,function(a){a.interactiveObj&&
!0===a.interactiveObj.cascade?a.interactiveObj.cascade="previous":!1===a.interactiveObj.cascade&&(a.interactiveObj.cascade="none")})):c.interactiveObj&&!0===c.interactiveObj.cascade?c.interactiveObj.cascade="previous":!1===c.interactiveObj.cascade&&(c.interactiveObj.cascade="none")}));return c},removeAllFilters:function(){this._destroyAllFilters()},_getLayerDefinitionRaw:function(a,c){var n=new v;c?n.resolve(c):(this.loading.show(),w({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,
function(a){this.domNode?(this.loading.hide(),n.resolve(a)):n.reject()}),e.hitch(this,function(a){console.error(a);n.reject();this.domNode&&this.loading.hide()})));return n},_validateLayerDefinition:function(a){return this._isObject(a)},_init:function(c){var n=new v;if(!this._isString(this.url))return n.reject(),n;var d=e.hitch(this,function(){setTimeout(e.hitch(this,function(){n.resolve()}),1500)}),t=e.hitch(this,function(){g.setStyle(this.contentSection,"display","block");g.setStyle(this.errorSection,
"display","none");this.removeAllFilters();var t=this._layerDefinition.fields;t&&0<t.length?(t=a.filter(t,e.hitch(this,function(a){return 0<=this._supportFieldTypes.indexOf(a.type)})))&&0<t.length?(this._validOptions=!0,g.removeClass(this.btnAddSet,"jimu-state-disabled"),g.removeClass(this.btnAddExp,"jimu-state-disabled"),g.removeClass(this.iconAddExp,"jimu-state-disabled"),g.removeClass(this.iconAddSet,"jimu-state-disabled"),this.createFieldsStore(),this.valueProviderFactory=new b({url:this.url,layerDefinition:this._layerDefinition}),
"expr"===c?this._isString(this.expr)?("1\x3d1"===this.expr.replace(/\s/gi,"")&&this.removeAllFilters(),this._parseExpr(this.expr)?d():n.reject()):n.reject():"partsObj"===c?this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),d()):n.reject():this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),d()):this._isString(this.expr)?this._parseExpr(this.expr)?d():n.reject():(this.removeAllFilters(),d())):(this._showErrorOptions(this.nls.error.noFilterFields),n.reject()):
n.reject()});this._validateLayerDefinition(this._layerDefinition)?t():(this.loading.show(),w({url:this.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,function(a){this.domNode?(this.loading.hide(),this._layerDefinition=a,t()):n.reject()}),e.hitch(this,function(a){console.error(a);n.reject();this.domNode&&this.loading.hide()})));return n},toJson:function(){var c={logicalOperator:this.allAnySelect.value,parts:[]},n=this._getAllSingleFiltersAndFilterSets();if(0===
n.length)return c.expr="1\x3d1",c;a.forEach(n,e.hitch(this,function(a){a=a.toJson();c.parts.push(a)}));return a.every(c.parts,e.hitch(this,function(a){return!!a}))&&0<c.parts.length?(c.expr=this.getExprByFilterObj(c),c):null},createFieldsStore:function(){if(this._layerDefinition.fields&&0!==this._layerDefinition.fields.length){var a=e.clone(this._layerDefinition).fields;0===this.setFieldsStoreByFieldInfos(a)&&this._showErrorOptions(this.nls.error.noFilterFields)}else this._showErrorOptions(this.nls.error.noFilterFields)},
_parsePartsObj:function(a){this._validatePartsObj(a)&&(this.removeAllFilters(),this._buildEditUIByPartsObj(a))},_parseExpr:function(a){this._destroyAllFilters();var c=null;if(!this._validateLayerDefinition(this._layerDefinition))return c;if(!a||"string"!==typeof a)return this._showErrorOptions(this.nls.error.invalidSQL),c;if("1\x3d1"===this.expr.replace(/\s/gi,""))return c={expr:"1\x3d1",parts:[],logicalOperator:"AND"};try{c=this.getFilterObjByExpr(a)}catch(x){c=null,console.error(x)}c?this._buildEditUIByPartsObj(c):
this._showErrorOptions(this.nls.error.cantParseSQL);return c},_buildEditUIByPartsObj:function(c){c&&(this._destroyAllFilters(),this.allAnySelect.value=c.logicalOperator,a.forEach(c.parts,e.hitch(this,function(a){a.parts?this._addFilterSet(a):a.fieldObj&&a.operator&&a.valueObj&&this._addSingleFilter(a)})))},_addSingleFilter:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,part:a,
OPERATORS:e.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,valueProviderFactory:this.valueProviderFactory};a=new n(a);a.placeAt(this.allExpsBox);a.startup();this.own(c.after(a,"_destroySelf",e.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_addFilterSet:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,partsObj:a,
OPERATORS:e.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,valueProviderFactory:this.valueProviderFactory};a=new t(a);a.placeAt(this.allExpsBox);a.startup();this.own(c.after(a,"_destroySelf",e.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_destroyAllFilters:function(){for(var a=this._getAllSingleFiltersAndFilterSets();0<a.length;)a[0].destroy(),a.splice(0,1);this._checkFilterNumbers()},_getAllSingleFiltersAndFilterSetsDoms:function(){return u(".allExpsBox\x3e.jimu-single-filter,.allExpsBox\x3e.jimu-filter-set",
this.contentSection)},_getAllSingleFiltersAndFilterSets:function(){var c=this._getAllSingleFiltersAndFilterSetsDoms();return a.map(c,e.hitch(this,function(a){return p.byNode(a)}))},_checkFilterNumbers:function(){var c=this._getAllSingleFiltersAndFilterSetsDoms();1<c.length?g.setStyle(this.matchMsg,"display","block"):g.setStyle(this.matchMsg,"display","none");0<c.length?g.setStyle(this.noFilterTipSection,"display","none"):g.setStyle(this.noFilterTipSection,"display","block");a.forEach(c,e.hitch(this,
function(a,c){g.removeClass(a,"even-filter");g.removeClass(a,"odd-filter");g.addClass(a,0===(c+1)%2?"even-filter":"odd-filter")}));this.emit("filter-number-change")},_showErrorOptions:function(a){console.error(a);g.setStyle(this.errorSection,"display","none");this.errorTip.innerHTML=a;this.loading.hide()},_onBtnAddSetClick:function(){this._layerDefinition&&this._validOptions&&this._addFilterSet()},_onBtnAddExpClick:function(){this._layerDefinition&&this._validOptions&&this._addSingleFilter()}})})},
"jimu/dijit/_filter/ValueProviderFactory":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./BlankValueProvider ./SimpleValueProvider ./TwoNumbersValueProvider ./TwoDatesValueProvider ./ListValueProvider jimu/LayerInfos/LayerInfos".split(" "),function(l,h,f,q,m,k,d,r,b){var p={stringOperatorIs:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",codedValueProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",
supportAskForValue:!0,filterCodedValueIfPossible:!0}},stringOperatorIsNot:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},stringOperatorStartsWith:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorEndsWith:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,
supportCaseSensitive:!0}},stringOperatorContains:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorDoesNotContain:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0,supportCaseSensitive:!0}},stringOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},stringOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},numberOperatorIs:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",codedValueProviderType:"LIST_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsNot:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsAtLeast:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},
field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsLessThan:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsAtMost:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},
unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsGreaterThan:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"},unique:{normalProviderType:"LIST_VALUE_PROVIDER",supportAskForValue:!0,filterCodedValueIfPossible:!0}},numberOperatorIsBetween:{value:{normalProviderType:"TWO_NUMBERS_VALUE_PROVIDER",supportAskForValue:!0}},numberOperatorIsNotBetween:{value:{normalProviderType:"TWO_NUMBERS_VALUE_PROVIDER",
supportAskForValue:!0}},numberOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},numberOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},dateOperatorIsOn:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsNotOn:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsBefore:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",
supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsAfter:{value:{normalProviderType:"SIMPLE_VALUE_PROVIDER",supportAskForValue:!0},field:{normalProviderType:"LIST_VALUE_PROVIDER"}},dateOperatorIsBetween:{value:{normalProviderType:"TWO_DATES_VALUE_PROVIDER",supportAskForValue:!0}},dateOperatorIsNotBetween:{value:{normalProviderType:"TWO_DATES_VALUE_PROVIDER",supportAskForValue:!0}},dateOperatorIsBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}},dateOperatorIsNotBlank:{value:{normalProviderType:"BLANK_VALUE_PROVIDER"}}},
e=f([],{nls:null,url:null,layerDefinition:null,layerInfo:null,featureLayerId:null,constructor:function(g){l.mixin(this,g);this.nls=window.jimuNls.filterBuilder;g=b.getInstanceSync();this.featureLayerId&&(this.layerInfo=g.getLayerOrTableInfoById(this.featureLayerId))},getSupportedValueTypes:function(b,a){var c=[],d=p[a];d&&(d.value&&c.push("value"),d.field&&0<this._getSameShortTypeFieldNames(b).length&&c.push("field"),d.unique&&this.url&&(this._isStreamServer(this.url)||10.1<=parseFloat(this.layerDefinition.currentVersion)&&
c.push("unique")));return c},_isStreamServer:function(b){b=(b||"").replace(/\/*$/g,"");return/\/StreamServer$/gi.test(b)},_getSameShortTypeFieldNames:function(b){var a=[],c=this._getFieldInfo(this.layerDefinition,b),d=e.getShortTypeByEsriType(c.type);h.forEach(this.layerDefinition.fields,l.hitch(this,function(c){c.name!==b&&e.getShortTypeByEsriType(c.type)===d&&a.push(c.name)}));return a},getValueProvider:function(b,a){var c=null,e=l.clone(p[b.operator]);if(e){var g=b.valueObj.type,f=b.fieldObj.name,
n=this._getFieldInfo(this.layerDefinition,f),t=e[g],y=t.normalProviderType,z=null,x=this._getCodedValues(n);x||this.layerDefinition.typeIdField&&this.layerDefinition.typeIdField.toUpperCase()===f.toUpperCase()&&(x=this._getSubTypes(this.layerDefinition));"field"===g?(g=this._getSameShortTypeFieldNames(f),0<g.length&&(z=h.map(g,l.hitch(this,function(a){return{value:a,label:a}})))):x&&0<x.length&&t.codedValueProviderType&&(y=t.codedValueProviderType);e={nls:this.nls,url:this.url,layerDefinition:this.layerDefinition,
partObj:b,fieldInfo:n,codedValues:x,staticValues:z,layerInfo:this.layerInfo,operatorInfo:e,filterCodedValueIfPossible:!!t.filterCodedValueIfPossible,runtime:a};"BLANK_VALUE_PROVIDER"===y?c=new q(e):"SIMPLE_VALUE_PROVIDER"===y?c=new m(e):"TWO_NUMBERS_VALUE_PROVIDER"===y?c=new k(e):"TWO_DATES_VALUE_PROVIDER"===y?c=new d(e):"LIST_VALUE_PROVIDER"===y&&(e.showNullValues=!1,c=new r(e))}return c},_getFieldInfo:function(b,a){for(var c=b.fields,e=0;e<c.length;e++){var d=c[e];if(a===d.name)return d}return null},
_getCodedValues:function(b){var a=null;(b=b.domain)&&"codedValue"===b.type&&b.codedValues&&0<b.codedValues.length&&(a=b.codedValues,a=h.map(a,l.hitch(this,function(a){return{value:a.code,label:a.name}})));return a},_getSubTypes:function(b){var a=null;b.typeIdField&&b.types&&0<b.types.length&&(a=h.map(b.types,l.hitch(this,function(a){return{value:a.id,label:a.name}})));return a}});e.getOperatorInfo=function(b){return l.clone(p[b])};e.getOperatorsByShortType=function(b){var a=[];"string"===b?a="stringOperatorIs stringOperatorIsNot stringOperatorStartsWith stringOperatorEndsWith stringOperatorContains stringOperatorDoesNotContain stringOperatorIsBlank stringOperatorIsNotBlank".split(" "):
"number"===b?a="numberOperatorIs numberOperatorIsNot numberOperatorIsAtLeast numberOperatorIsLessThan numberOperatorIsAtMost numberOperatorIsGreaterThan numberOperatorIsBetween numberOperatorIsNotBetween numberOperatorIsBlank numberOperatorIsNotBlank".split(" "):"date"===b&&(a="dateOperatorIsOn dateOperatorIsNotOn dateOperatorIsBefore dateOperatorIsAfter dateOperatorIsBetween dateOperatorIsNotBetween dateOperatorIsBlank dateOperatorIsNotBlank".split(" "));return a};e.getShortTypeByEsriType=function(b){var a=
null;"esriFieldTypeString"===b?a="string":"esriFieldTypeDate"===b?a="date":0<=["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(b)&&(a="number");return a};return e})},"jimu/dijit/_filter/BlankValueProvider":function(){define(["dojo/_base/html","dojo/_base/declare","./ValueProvider"],function(l,h,f){return h([f],{templateString:"\x3cdiv\x3e\x3c/div\x3e",postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,
"jimu-filter-blank-value-provider")},getDijits:function(){return[]},getStatus:function(){return 1},setValueObject:function(){},getValueObject:function(){return{isValid:!0,type:this.partObj.valueObj.type,value:null}},isBlankValueProvider:function(){return!0}})})},"jimu/dijit/_filter/ValueProvider":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin jimu/utils esri/lang".split(" "),function(l,h,f,q,m,k,d,
r,b,p){return k([d,r,h],{baseClass:"jimu-filter-value-provider",fieldName:null,shortType:null,_enabled:!1,cascade:"none",filterCodedValue:!1,nls:null,url:null,layerDefinition:null,fieldInfo:null,partObj:null,runtime:!0,staticValues:null,codedValues:null,layerInfo:null,operatorInfo:null,filterCodedValueIfPossible:!1,postMixInProperties:function(){this.inherited(arguments);this.shortType=this.partObj.fieldObj.shortType;this.fieldName=this.partObj.fieldObj.name;this.cascade=this.partObj.interactiveObj&&
this.partObj.interactiveObj.cascade;this.runtime&&this.codedValues&&this.filterCodedValueIfPossible&&b.isCodedValuesSupportFilter(this.layerDefinition,this.codedValues.length)?this.filterCodedValue=!0:this.filterCodedValue=!1},getDijits:function(){return[]},bindChangeEvents:function(){var b=this.getDijits();m.forEach(b,f.hitch(this,function(b){b.declaredClass&&0===b.declaredClass.indexOf("dijit.")&&q.addClass(b.domNode,b.declaredClass.replace(/\./g,"-"));this.own(l(b,"change",f.hitch(this,this._onChanged)))}))},
_onChanged:function(){this.emit("change")},tryLocaleNumber:function(d){var e=b.localizeNumber(d);if(null===e||void 0===e)e=d;return e},getPartObject:function(){var b=this.getValueObject();if(!b)return null;var d=f.clone(this.partObj);d.valueObj=b;return d},setValueObject:function(){},getValueObject:function(){},tryGetValueObject:function(){return this.getValueObject()},setRequired:function(){},getStatus:function(){var b=1,d=this.getDijits();0<d.length&&(b=m.map(d,f.hitch(this,function(a){return this.getStatusForDijit(a)})),
b=Math.min.apply(b,b));return b},getStatusForDijit:function(b){return b.validate()?b.get("DisplayedValue")?1:0:-1},isInvalidValue:function(){return 0>this.getStatus()},isEmptyValue:function(){return 0===this.getStatus()},isValidValue:function(){return 0<this.getStatus()},isBlankValueProvider:function(){return!1},getFilterExpr:function(){var b="1\x3d1",b=this.getLayerFilterExpr();if("all"===this.cascade||"previous"===this.cascade)var d=this.getCascadeFilterExpr(),b="("+b+") AND ("+d+")";return b},
getLayerFilterExpr:function(){var b="1\x3d1";this.layerInfo&&(b=this.layerInfo.getFilter());b||(b="1\x3d1");return b},getCascadeFilterExpr:function(){return"1\x3d1"},isDefined:function(b){return p.isDefined(b)},disable:function(){this._enabled=!1},enable:function(){this._enabled=!0},isEnabled:function(){return this._enabled}})})},"jimu/dijit/_filter/SimpleValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),
function(l,h,f,q,m,k){return h([f],{templateString:"\x3cdiv\x3e\x3c/div\x3e",_dijit:null,postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,"jimu-filter-simple-value-provider");this._dijit="string"===this.shortType?new q({required:!1,trim:!0}):"number"===this.shortType?new k({required:!1,intermediateChanges:!0,constraints:{pattern:"#####0.##########"}}):new m({required:!1,trim:!0,value:new Date});l.setStyle(this._dijit.domNode,"width","100%");this._dijit.placeAt(this.domNode)},
getDijits:function(){return[this._dijit]},setValueObject:function(d){this.isDefined(d.value)&&("date"===this.shortType?this._dijit.set("value",new Date(d.value)):this._dijit.set("value",d.value))},getValueObject:function(){if(this.isValidValue()){var d=this._dijit.get("value");"date"===this.shortType?d=d.toDateString():"number"===this.shortType&&(d=parseFloat(d));return{isValid:!0,type:this.partObj.valueObj.type,value:d}}return null},tryGetValueObject:function(){return this.isValidValue()?this.getValueObject():
this.isEmptyValue()?{isValid:!0,type:this.partObj.valueObj.type,value:"string"===this.shortType?"":null}:null},setRequired:function(d){this._dijit.set("required",d)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(l,h,f){return l("dijit.form.DateTextBox",f,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:h,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e,g,a,c,u,v,w){var n=q("dijit.Calendar",[a,c,u],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){r.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new n._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:p.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",p.hitch(this,"_onKeyDown")),e(this.dateRowsNode,"mouseover",p.hitch(this,"_onDayMouseOver")),e(this.dateRowsNode,"mouseout",p.hitch(this,"_onDayMouseOut")),e(this.dateRowsNode,"mousedown",p.hitch(this,"_onDayMouseDown")),e(this.dateRowsNode,"mouseup",p.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var c=
new this.dateClassObj(this.currentFocus);c.setDate(1);c.setMonth(a);a=this.dateModule.getDaysInMonth(c);var b=this.currentFocus.getDate();c.setDate(Math.min(b,a));this._setCurrentFocusAttr(c)},_onDayMouseOver:function(a){(a=k.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!k.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(k.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||
a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",k.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),k.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!k.contains(a,"dijitCalendarDisabledDate")&&(k.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&k.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var c=-1,n,d=this.currentFocus;switch(a.keyCode){case b.RIGHT_ARROW:c=1;case b.LEFT_ARROW:n="day";this.isLeftToRight()||(c*=-1);break;case b.DOWN_ARROW:c=1;case b.UP_ARROW:n="week";break;case b.PAGE_DOWN:c=1;case b.PAGE_UP:n=a.ctrlKey||a.altKey?"year":"month";break;case b.END:d=this.dateModule.add(d,"month",1),n="day";case b.HOME:d=new this.dateClassObj(d);d.setDate(1);break;default:return!0}n&&(d=this.dateModule.add(d,n,c));this._setCurrentFocusAttr(d);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});n._MonthDropDownButton=q("dijit.Calendar._MonthDropDownButton",w,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new n._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
c);this.containerNode.innerHTML=(6==g("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+c[a.getMonth()]+"\x3c/div\x3e"}});n._MonthDropDown=q("dijit.Calendar._MonthDropDown",[c,v,u],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";l.forEach(a,function(a,c){d.create("div",{className:"dijitCalendarMonthLabel",month:c,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(m.get(a.target,"month"))},onChange:function(){}});return n})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e,g,a,c,u,v){var w=h("dijit.CalendarLite",[c,u],{templateString:v,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var c=
new this.dateClassObj(a);c.setHours(0,0,0,0);c.getDate()<a.getDate()&&(c=this.dateModule.add(c,"hour",1));return c}return null},_setValueAttr:function(a,c){"string"==typeof a&&(a=k.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(c||"undefined"==typeof c))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){if(a||
0===a)a=new this.dateClassObj(a),a.setHours(1,0,0,0);return a},_setText:function(a,c){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(c))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),c=a.getDay(),d=this.dateModule.getDaysInMonth(a),e=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),u=new this.dateClassObj,h=0<=this.dayOffset?this.dayOffset:f.getFirstDayOfWeek(this.lang);h>
c&&(h-=7);if(!this.summary){var k=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",k[a.getMonth()])}this._date2cell={};l.forEach(this.dateCells,function(n,k){var f=k+h,p=new this.dateClassObj(a),g="dijitCalendar",l=0;f<c?(f=e-c+f+1,l=-1,g+="Previous"):f>=c+d?(f=f-c-d+1,l=1,g+="Next"):(f=f-c+1,g+="Current");l&&(p=this.dateModule.add(p,"month",l));p.setDate(f);this.dateModule.compare(p,u,"date")||(g="dijitCalendarCurrentDate "+g);this.isDisabledDate(p,
this.lang)?(g="dijitCalendarDisabledDate "+g,n.setAttribute("aria-disabled","true")):(g="dijitCalendarEnabledDate "+g,n.removeAttribute("aria-disabled"),n.setAttribute("aria-selected","false"));(l=this.getClassForDate(p,this.lang))&&(g=l+" "+g);n.className=g+"Month dijitCalendarDateTemplate";g=p.valueOf();this._date2cell[g]=n;n.dijitDateValue=g;g=p.getDateLocalized?p.getDateLocalized(this.lang):p.getDate();this._setText(this.dateLabels[k],g);b.set(n,"aria-label",m.format(p,{selector:"date",formatLength:"long"}))},
this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var c=a.getFullYear()-1,b=new this.dateClassObj;l.forEach(["previous","current","next"],function(a){b.setFullYear(c++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(b,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?p.getObject(a.datePackage,
!1):q;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?p.getObject(a.datePackage+".locale",!1):m},_createMonthWidget:function(){return w._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var c=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),e=0<=this.dayOffset?this.dayOffset:f.getFirstDayOfWeek(this.lang);this.dayCellsHtml=a.substitute([c,
c,c,c,c,c,c].join(""),{d:""},function(){return b[e++%7]});c=a.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[c,c,c,c,c,c].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);d.setSelectable(this.domNode,!1);c=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",c,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=p.hitch(this,function(a,
c,b){this[a].dojoClick=!0;return e(this[a],"click",p.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,c,b))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,c){var b=this.currentFocus,d=this._getNodeByDate(b);a=this._patchDate(a);this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(b,a,"month")||(this._populateGrid(),
this._populateControls(),this._markSelectedDates([this.value]));b=this._getNodeByDate(a);b.setAttribute("tabIndex",this.tabIndex);(this.focused||c)&&b.focus();d&&d!=b&&(g("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue&&0!==a.dijitDateValue;a=a.parentNode);a&&!r.contains(a,"dijitCalendarDisabledDate")&&this.set("value",
a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function c(a,c){r.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",a?"true":"false")}l.forEach(this._selectedCells||[],p.partial(c,!1));this._selectedCells=l.filter(l.map(a,this._getNodeByDate,this),function(a){return a});l.forEach(this._selectedCells,p.partial(c,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});
w._MonthWidget=h("dijit.CalendarLite._MonthWidget",c,{_setMonthAttr:function(a){var c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),b=6==g("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+l.map(c,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=b+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+c[a.getMonth()]+"\x3c/div\x3e"}});return w})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(l,h,f,q,m,k,d,r){new Date("X");return q("dijit.form._DateTimeTextBox",[k,d],{templateString:r,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:h.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,d){var e=this._isInvalidDate(b),g=this._isInvalidDate(d);if(e||g)return e&&g?0:e?-1:1;var e=this.format(b,this._unboundedConstraints),g=this.format(d,this._unboundedConstraints),
a=this.parse(e,this._unboundedConstraints),c=this.parse(g,this._unboundedConstraints);return e==g?0:l.compare(a,c,this._selector)},autoWidth:!0,format:function(b,d){return b?this.dateLocaleModule.format(b,d):""},parse:function(b,d){return this.dateLocaleModule.parse(b,d)||(this._isEmpty(b)?null:void 0)},serialize:function(b,d){b.toGregorian&&(b=b.toGregorian());return f.toISOString(b,d)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){b=
b||{};this.dateModule=b.datePackage?m.getObject(b.datePackage,!1):l;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=b.datePackage?m.getObject(b.datePackage+".locale",!1):h;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=this._selector;b.fullYear=!0;var d=f.fromISOString;"string"==typeof b.min&&(b.min=d(b.min),this.dateClassObj instanceof Date||(b.min=new this.dateClassObj(b.min)));"string"==typeof b.max&&(b.max=d(b.max),this.dateClassObj instanceof Date||(b.max=new this.dateClassObj(b.max)));this.inherited(arguments);this._unboundedConstraints=m.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(b){return!b||
isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,d,e){void 0!==b&&("string"==typeof b&&(b=f.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments,[b,d,e]);this.value instanceof Date&&(this.filterString="");!1!==d&&this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,d){if("value"==b){d instanceof Date&&!(this.dateClassObj instanceof Date)&&
(d=new this.dateClassObj(d));var e=this._get("value");if(e instanceof this.dateClassObj&&0==this.compare(d,e))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this._set("dropDownDefaultValue",b)},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var d=m.isString(this.popupClass)?m.getObject(this.popupClass,!1):this.popupClass,e=this,g=this.get("value");this.dropDown=new d({onChange:function(a){e.set("value",
a,!0)},id:this.id+"_popup",dir:e.dir,lang:e.lang,value:g,textDir:e.textDir,currentFocus:this._isInvalidDate(g)?this.dropDownDefaultValue:g,constraints:e.constraints,filterString:e.filterString,datePackage:e.datePackage,isDisabledDate:function(a){return!e.rangeCheck(a,e.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,d){this._setValueAttr(this.parse(b,this.constraints),d,b)}})})},"jimu/dijit/_filter/TwoNumbersValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoNumbersValueProvider.html dijit/form/NumberTextBox".split(" "),
function(l,h,f,q,m,k){return h([f,q,m],{templateString:k,postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,"jimu-two-numbers-filter-value-provider")},_onRangeNumberBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var d=parseFloat(this._dijit1.get("value")),f=parseFloat(this._dijit2.get("value"));d>f&&(this._dijit1.set("value",f),this._dijit2.set("value",d))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(d){this.isDefined(d.value1)&&
this._dijit1.set("value",d.value1);this.isDefined(d.value2)&&this._dijit2.set("value",d.value2)},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:parseFloat(this._dijit1.get("value")),value2:parseFloat(this._dijit2.get("value"))}:null},tryGetValueObject:function(){if(this.isValidValue())return this.getValueObject();if(this.isEmptyValue()){var d={isValid:!0,type:this.partObj.valueObj.type,value1:parseFloat(this._dijit1.get("value")),value2:parseFloat(this._dijit2.get("value"))};
isNaN(d.value1)&&(d.value1=null);isNaN(d.value2)&&(d.value2=null);return d}return null},setRequired:function(d){this._dijit1.set("required",d);this._dijit2.set("required",d)}})})},"jimu/dijit/_filter/TwoDatesValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoDatesValueProvider.html dijit/form/DateTextBox".split(" "),function(l,h,f,q,m,k){return h([f,q,m],{templateString:k,postCreate:function(){this.inherited(arguments);
l.addClass(this.domNode,"jimu-two-dates-filter-value-provider")},_onRangeDateBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var d=this._dijit1.get("value"),f=d.getTime(),b=this._dijit2.get("value"),h=b.getTime();f>h&&(this._dijit1.set("value",b),this._dijit2.set("value",d))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(d){this.isDefined(d.value1)&&this._dijit1.set("value",new Date(d.value1));this.isDefined(d.value2)&&this._dijit2.set("value",
new Date(d.value2))},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:this._dijit1.get("value").toDateString(),value2:this._dijit2.get("value").toDateString()}:null},setRequired:function(d){this._dijit1.set("required",d);this._dijit2.set("required",d)}})})},"jimu/dijit/_filter/ListValueProvider":function(){define("dojo/aspect dojo/Deferred dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ListValueProvider.html dojo/store/Memory jimu/utils dijit/form/FilteringSelect".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e,g){return k([d,r,b],{templateString:p,codedValues:null,staticValues:null,showNullValues:!1,postCreate:function(){this.inherited(arguments);q.addClass(this.domNode,"jimu-filter-list-value-provider");this._uniqueValueCache={};var a=new e({idProperty:"id",data:[]});this.valuesSelect.set("store",a);this.staticValues||"function"!==typeof this.valuesSelect._onDropDownMouseDown||(!this.codedValues||this.codedValues&&this.filterCodedValue)&&this.own(l.before(this.valuesSelect,
"_onDropDownMouseDown",f.hitch(this,this._onBeforeDropDownMouseDown)))},_onFilteringSelectInput:function(){this.emit("change")},_onBeforeDropDownMouseDown:function(){this._tryUpdatingUniqueValues(void 0,!0);return arguments},getDijits:function(){return[this.valuesSelect]},setValueObject:function(a){return this.staticValues?this._setValueForStaticValues(a.value,this.staticValues):this.codedValues?this.filterCodedValue?this._tryUpdatingUniqueValues(a.value,!1):this._setValueForStaticValues(a.value,
this.codedValues):this._tryUpdatingUniqueValues(a.value,!1)},getValueObject:function(){if(this.isValidValue()){var a=this.valuesSelect.get("item").value;return{isValid:!0,type:this.partObj.valueObj.type,value:a}}return null},tryGetValueObject:function(){return this.isValidValue()?this.getValueObject():this.isEmptyValue()?{isValid:!0,type:this.partObj.valueObj.type,value:"string"===this.shortType?"":null}:null},setRequired:function(a){this.valuesSelect.set("required",a)},_setValueForStaticValues:function(a,
c){var b=null,d=-1,b=null;c&&(b=m.map(c,f.hitch(this,function(c,b){var e={id:b,value:c.value,label:c.label};e.value===a&&(d=b);return e})),this.valuesSelect.store.setData(b),0<=d&&(b=this.valuesSelect.store.get(d))&&this.valuesSelect.set("item",b))},_uniqueValueLoadingDef:null,_uniqueValueLoadingExpr:"",_uniqueValueCache:null,_tryUpdatingUniqueValues:function(a,c){var b=new h;if(this.valuesSelect._opened)b.resolve();else{var d=this.getFilterExpr();d!==this._uniqueValueLoadingExpr?(this.valuesSelect.readOnly=
!0,this._uniqueValueLoadingDef&&(this._uniqueValueLoadingDef.reject(),this._uniqueValueLoadingDef=null),this._uniqueValueLoadingExpr=d,this._uniqueValueLoadingDef=this._getUniqueValues(d),this._uniqueValueLoadingDef.then(f.hitch(this,function(d){this.domNode&&(this._uniqueValueLoadingDef=null,this.valuesSelect.readOnly=!1,this._setValueForUniqueValues(a,d),this._hideLoadingIcon(),c&&this.valuesSelect.toggleDropDown(),b.resolve())}),f.hitch(this,function(a){console.error(a);this.domNode&&(this._uniqueValueLoadingDef=
null,this.valuesSelect.readOnly=!1,this._hideLoadingIcon(),b.reject(a))}))):b.resolve()}return b},_setValueForUniqueValues:function(a,c){c.sort(function(a,c){return a.value<c.value?-1:a.value===c.value?0:1});this.showNullValues||(c=m.filter(c,f.hitch(this,function(a){return"\x3cNull\x3e"!==a.value&&null!==a.value})));if(void 0===a){var b=this.getValueObject();b&&(a=b.value)}var d=-1,b=null,e=m.map(c,f.hitch(this,function(c,b){var e={id:b,value:c.value,label:c.label};c.value===a&&(d=b);return e}));
this.valuesSelect.store.setData(e);0<=d&&(b=this.valuesSelect.store.get(d));this.valuesSelect.set("item",b)},_showLoadingIcon:function(){q.addClass(this.valuesSelect.domNode,"loading")},_hideLoadingIcon:function(){q.removeClass(this.valuesSelect.domNode,"loading")},_getUniqueValues:function(a){var c=new h;this._uniqueValueCache[a]?c.resolve(this._uniqueValueCache[a]):(this._showLoadingIcon(),g.getUniqueValues(this.url,this.fieldName,a,this.layerDefinition).then(f.hitch(this,function(b){this.domNode&&
(this._uniqueValueCache[a]=b,c.resolve(b),this._hideLoadingIcon())}),f.hitch(this,function(a){this.domNode&&(c.reject(a),this._hideLoadingIcon())})));return c}})})},"jimu/dijit/_SingleFilter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/store/Memory jimu/utils jimu/dijit/_filter/ValueProviderFactory jimu/dijit/CheckBox dijit/form/Select dijit/form/FilteringSelect dijit/form/ValidationTextBox".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e,g){return l([h,f,q],{templateString:m,baseClass:"jimu-single-filter",declaredClass:"jimu.dijit._SingleFilter",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],supportFieldTypes:[],part:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,valueProviderFactory:null,valueProvider:null,postMixInProperties:function(){this.supportFieldTypes=[];this.supportFieldTypes.push(this.stringFieldType);this.supportFieldTypes.push(this.dateFieldType);
this.supportFieldTypes=this.supportFieldTypes.concat(this.numberFieldTypes);this.nls=window.jimuNls.filterBuilder},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var a={fieldObj:"",operator:"",valueObj:"",interactiveObj:"",caseSensitive:!1},c=this._getFieldObjByUI();if(!c)return null;a.fieldObj=c;c=this._getOperatorByUI();if(!c)return null;a.operator=c;a.caseSensitive=this.cbxCaseSensitive.getStatus()&&this.cbxCaseSensitive.getValue();if(c=this._isUseAskForValues()){if(!this.promptTB.validate())return this._showValidationErrorTip(this.promptTB),
null;a.interactiveObj={prompt:this.promptTB.get("value"),hint:this.hintTB.get("value"),cascade:"none"};this.uniqueRadio&&this.uniqueRadio.checked&&(a.interactiveObj.cascade=this.cascadeSelect.get("value"))}a.valueObj={isValid:!0,type:""};c=c?this.valueProvider.tryGetValueObject():this.valueProvider.getValueObject();if(!c)return null;this.valueRadio.checked?c.type="value":this.fieldRadio.checked?c.type="field":this.uniqueRadio.checked&&(c.type="unique");a.valueObj=c;return a},_getFieldObjByUI:function(){var a=
this._getSelectedFilteringItem(this.fieldsSelect);return a?{name:a.name,label:a.name,shortType:a.shortType,type:a.type}:null},_getOperatorByUI:function(){var a=this.operatorsSelect.get("value");"none"===a&&(a=null);return a},showDelteIcon:function(){d.setStyle(this.btnDelete,"display","inline-block")},hideDeleteIcon:function(){d.setStyle(this.btnDelete,"display","none")},_showAndEnableCaseSensitive:function(){this.cbxCaseSensitive.setStatus(!0);d.setStyle(this.cbxCaseSensitive.domNode,"display","inline-block")},
_hideAndDisableCaseSensitive:function(){this.cbxCaseSensitive.setStatus(!1);d.setStyle(this.cbxCaseSensitive.domNode,"display","none")},_initSelf:function(){this.layerInfo=k.mixin({},this.layerInfo);this.isHosted&&(this.cbxCaseSensitive.setValue(!1),this.cbxCaseSensitive.setStatus(!1),this.cbxCaseSensitive.domNode.title=this.nls.notSupportCaseSensitiveTip);this.own(b(this.fieldsSelect,"MouseEnter",k.hitch(this,this._updateFieldsSelectTitle)));this.own(b(this.operatorsSelect,"MouseEnter",k.hitch(this,
this._updateOperatorsSelectTitle)));this.enableAskForValues?(d.setStyle(this.cbxAskValues.domNode,"display","inline-block"),d.setStyle(this.promptSection,"display","block"),this.own(b(this.cbxAskValues,"status-change",k.hitch(this,this._onCbxAskValuesStatusChanged))),this.cbxAskValues.onChange=k.hitch(this,this._onCbxAskValuesClicked)):(d.setStyle(this.cbxAskValues.domNode,"display","none"),d.setStyle(this.promptSection,"display","none"));this._initValueTypeRadios();var a=this.layerInfo.fields;a&&
0<a.length&&(a=r.filter(a,k.hitch(this,function(a){return 0<=this.supportFieldTypes.indexOf(a.type)})),0<a.length&&(this._enableRadios(),this._initFieldsSelect(a),this.part?this._showPart(this.part):this._resetByFieldAndOperator(),setTimeout(k.hitch(this,function(){this._bindFieldsSelectChangeAndOperatorChangeEvents()}),10)))},_bindFieldsSelectChangeAndOperatorChangeEvents:function(){this._removeFieldsSelectChangeAndOperatorChangeEvents();this._handle1=b(this.fieldsSelect,"change",k.hitch(this,this._onFieldsSelectChange));
this._handle2=b(this.operatorsSelect,"change",k.hitch(this,this._onOperatorsSelectChange))},_removeFieldsSelectChangeAndOperatorChangeEvents:function(){this._handle1&&this._handle1.remove();this._handle2&&this._handle2.remove();this._handle2=this._handle1=null},_isServiceSupportDistinctValues:function(a,c){return this._isStreamServer(a)?!1:10.1<=parseFloat(c.currentVersion)},_isStreamServer:function(a){a=(a||"").replace(/\/*$/g,"");return/\/StreamServer$/gi.test(a)},_updateFieldsSelectTitle:function(){this.fieldsSelect.domNode.title=
"";var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.fieldsSelect.domNode.title=a.displayName||a.alias||a.name)},_updateOperatorsSelectTitle:function(){this.operatorsSelect.domNode.title="";var a=this.operatorsSelect.get("value");a&&(a=this.operatorsSelect.getOptions(a),this.operatorsSelect.domNode.title=a.label)},_showValidationErrorTip:function(a){try{!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())}catch(c){console.error(c)}},_getSelectedFilteringItem:function(a){if(a.validate()){var c=
a.get("item");if(c)return c}this._showValidationErrorTip(a);return null},_getShortTypeByFieldType:function(a){return a===this.stringFieldType?"string":a===this.dateFieldType?"date":0<=this.numberFieldTypes.indexOf(a)?"number":null},_initFieldsSelect:function(a){a=r.map(a,k.hitch(this,function(a,c){var b=k.mixin({},a);b.id=c;b.shortType=this._getShortTypeByFieldType(a.type);b.alias||(b.alias=b.name);var d="";"string"===b.shortType?d=this.nls.string:"number"===b.shortType?d=this.nls.number:"date"===
b.shortType&&(d=this.nls.date);b.displayName=b.alias+" ("+d+")";return b}));if(0<a.length){var c=new p({data:a});this.fieldsSelect.set("store",c);this.fieldsSelect.set("value",a[0].id)}this._updateOperatorsByFieldsSelect()},_showPart:function(a){if((this.part=a)&&this.part.fieldObj&&this.part.operator&&this.part.valueObj){this._removeFieldsSelectChangeAndOperatorChangeEvents();var c=this.part.fieldObj.name;a=this.part.operator;this.part.caseSensitive=!!this.part.caseSensitive;c=this.fieldsSelect.store.query({name:c});
0!==c.length&&(c=c[0])&&(this.fieldsSelect.set("value",c.id),this._updateOperatorsByFieldsSelect(),this.operatorsSelect.set("value",a),this._resetByFieldAndOperator(this.part),a=this.part.interactiveObj)&&(this.cbxAskValues.check(),this._updatePrompt(),this.promptTB.set("value",a.prompt||""),this.hintTB.set("value",a.hint||""),"unique"===this.part.valueObj.type?this.cascadeSelect.set("value",a.cascade):this.cascadeSelect.set("value","none"))}},_onFieldsSelectChange:function(){this._updateOperatorsByFieldsSelect();
this._resetByFieldAndOperator()},_updateOperatorsByFieldsSelect:function(){this._updateFieldsSelectTitle();this.operatorsSelect.removeOption(this.operatorsSelect.getOptions());this.operatorsSelect.addOption({value:"none",label:this.nls.none});var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.operatorsSelect.shortType=a.shortType,a=g.getOperatorsByShortType(a.shortType),this.operatorsSelect.removeOption(this.operatorsSelect.getOptions()),r.forEach(a,k.hitch(this,function(a){this.operatorsSelect.addOption({value:a,
label:this.nls[a]})})))},_onOperatorsSelectChange:function(){this._resetByFieldAndOperator()},_initValueTypeRadios:function(){var a="radio_"+e.getRandomString();this.valueRadio.name=a;this.fieldRadio.name=a;this.uniqueRadio.name=a;this.valueRadio.valueType="value";this.fieldRadio.valueType="field";this.uniqueRadio.valueType="unique";e.combineRadioCheckBoxWithLabel(this.valueRadio,this.valueLabel);e.combineRadioCheckBoxWithLabel(this.fieldRadio,this.fieldLabel);e.combineRadioCheckBoxWithLabel(this.uniqueRadio,
this.uniqueLabel);this.own(b(this.valueRadio,"click",k.hitch(this,function(){this._resetByFieldAndOperator(null,"value")})));this.own(b(this.fieldRadio,"click",k.hitch(this,function(){this._resetByFieldAndOperator(null,"field")})));this.own(b(this.uniqueRadio,"click",k.hitch(this,function(){this._resetByFieldAndOperator(null,"unique")})));this._isServiceSupportDistinctValues(this.url,this.layerInfo)||(this.uniqueTd.style.display="none")},_updateValueTypeClass:function(){d.removeClass(this.domNode,
"value-type");d.removeClass(this.domNode,"field-type");d.removeClass(this.domNode,"unique-type");d.removeClass(this.domNode,"support-cascade");if(this.valueRadio.checked)d.addClass(this.domNode,"value-type"),this.cascadeSelect.set("value","none");else if(this.fieldRadio.checked)d.addClass(this.domNode,"field-type"),this.cascadeSelect.set("value","none");else{d.addClass(this.domNode,"unique-type");this.cascadeSelect.set("value","previous");var a=!0,a=this._getSelectedFilteringItem(this.fieldsSelect),
a=this._getCodedValuesOrTypesCount(a);(a=0<a?e.isCodedValuesSupportFilter(this.layerInfo,a):!0)?(this.cascadeSelect.set("value","previous"),d.addClass(this.domNode,"support-cascade")):this.cascadeSelect.set("value","none")}},_getCodedValuesOrTypesCount:function(a){if(a){if(a.domain&&"codedValue"===a.domain.type&&a.domain.codedValues)return a.domain.codedValues.length;if(this.layerInfo.typeIdField===a.name&&this.layerInfo.types)return this.layerInfo.types.length}return 0},_enableRadios:function(){this.valueRadio.disabled=
!1;this.fieldRadio.disabled=!1;this.uniqueRadio.disabled=!1},_disableAndUncheckRadios:function(){this._enableRadios();this.valueRadio.checked=!1;this.fieldRadio.checked=!1;this.uniqueRadio.checked=!1;this.valueRadio.disabled=!0;this.fieldRadio.disabled=!0;this.uniqueRadio.disabled=!0},_resetByFieldAndOperator:function(a,c){this._updateOperatorsSelectTitle();this.valueProvider&&this.valueProvider.destroy();this._hideAndDisableCaseSensitive();this._disableAndUncheckRadios();a||(a={fieldObj:"",operator:"",
valueObj:"",interactiveObj:"",caseSensitive:!1},a.fieldObj=this._getFieldObjByUI(),a.operator=this._getOperatorByUI());var b=[],e=null;if(a.fieldObj&&a.operator){var b=this.valueProviderFactory.getSupportedValueTypes(a.fieldObj.name,a.operator),f=null;a.valueObj?e=a.valueObj.type:(e=c&&0<=b.indexOf(c)?c:b[0],a.valueObj={type:e});0<=b.indexOf("value")&&(this.valueRadio.disabled=!1);0<=b.indexOf("field")&&(this.fieldRadio.disabled=!1);0<=b.indexOf("unique")&&(this.uniqueRadio.disabled=!1);"value"===
e?f=this.valueRadio:"field"===e?f=this.fieldRadio:"unique"===e&&(f=this.uniqueRadio);f&&(f.disabled=!1,f.checked=!0)}0<b.length?(this.valueProvider=this.valueProviderFactory.getValueProvider(a,!1),this.valueProvider.placeAt(this.attributeValueContainer,"first"),this.valueProvider.setValueObject(a.valueObj),this.valueProvider.isBlankValueProvider()?(d.addClass(this.valueProvider.domNode,"hidden"),d.addClass(this.attributeValueContainer,"hidden")):d.removeClass(this.attributeValueContainer,"hidden"),
(b=g.getOperatorInfo(a.operator))&&e&&(b[e]&&b[e].supportCaseSensitive&&this._showAndEnableCaseSensitive(),a&&this.cbxCaseSensitive.setValue(a.caseSensitive))):d.addClass(this.attributeValueContainer,"hidden");this._updateWhenValueRadioChanged()},_updateWhenValueRadioChanged:function(){this._updatePrompt();this._updateValueTypeClass()},_getRadioByValueType:function(a){return"value"===a?this.valueRadio:"field"===a?this.fieldRadio:"unique"===a?this.uniqueRadio:null},_onCbxAskValuesClicked:function(){this._updateRequiredProperty();
this._updatePrompt()},_onCbxAskValuesStatusChanged:function(){this._updateRequiredProperty()},_isUseAskForValues:function(){return this.cbxAskValues.status&&this.cbxAskValues.checked},_isValueRequired:function(){return!this._isUseAskForValues()},_updateRequiredProperty:function(){var a=this._isValueRequired();this.valueProvider.setRequired(a)},_getValueTypeByUI:function(){return!this.valueRadio.disabled&&this.valueRadio.checked?"value":!this.fieldRadio.disabled&&this.fieldRadio.checked?"field":!this.uniqueRadio.disabled&&
this.uniqueRadio.checked?"unique":null},_updatePrompt:function(){this.promptTB.set("value","");this.hintTB.set("value","");this.cbxAskValues.setStatus(!0);d.setStyle(this.promptTable,"display","table");var a=this.operatorsSelect.get("value"),c=this.nls[a],b=!1,e=this._getValueTypeByUI(),f=g.getOperatorInfo(a);f&&e&&(e=f[e])&&e.supportAskForValue&&(b=!0);b||this.cbxAskValues.setStatus(!1);this.cbxAskValues.status&&this.cbxAskValues.checked?(d.setStyle(this.promptTable,"display","table"),(b=this._getSelectedFilteringItem(this.fieldsSelect))&&
"none"!==a&&this.promptTB.set("value",(b.alias||b.name)+" "+c)):d.setStyle(this.promptTable,"display","none")},_destroySelf:function(){this.destroy()},destroy:function(){this._removeFieldsSelectChangeAndOperatorChangeEvents();this.inherited(arguments)}})})},"jimu/dijit/_FilterSet":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_FilterSet.html dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query ./_SingleFilter".split(" "),
function(l,h,f,q,m,k,d,r,b,p,e,g,a){return l([h,f,q],{templateString:m,baseClass:"jimu-filter-set",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],partsObj:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,valueProviderFactory:null,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsgSet.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelf()},toJson:function(){var a=g(".jimu-single-filter",this.allExpsBox),a=b.map(a,d.hitch(this,function(a){return k.byNode(a).toJson()}));return b.every(a,d.hitch(this,function(a){return!!a}))&&0<a.length?{logicalOperator:this.allAnySelect.value,parts:a}:null},showDelteIcon:function(){r.setStyle(this.btnDelete,"display","block")},hideDeleteIcon:function(){r.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.own(p(this.btnAdd,"click",d.hitch(this,this._addSingleFilter)));
if(this.partsObj){this.allAnySelect.value=this.partsObj.logicalOperator;var a=this.partsObj.parts||[];0===a.length?(this._addSingleFilter(),this._addSingleFilter()):1===a.length?(this._addSingleFilter(a[0]),this._addSingleFilter()):b.forEach(a,d.hitch(this,function(a){this._addSingleFilter(a)}))}else this._addSingleFilter(),this._addSingleFilter()},_addSingleFilter:function(b){b=new a({url:this.url,layerInfo:this.layerInfo,stringFieldType:this.stringFieldType,dateFieldType:this.dateFieldType,numberFieldTypes:this.numberFieldTypes,
part:b,OPERATORS:this.OPERATORS,enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,valueProviderFactory:this.valueProviderFactory,style:{margin:"15px auto 0 auto",border:0,background:"inherit"}});b.placeAt(this.allExpsBox);b.startup();this.own(e.after(b,"_destroySelf",d.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_checkFilterNumbers:function(){var a=g(".jimu-single-filter",this.allExpsBox),e=2<a.length;b.forEach(a,d.hitch(this,function(a){a=k.byNode(a);e?a.showDelteIcon():
a.hideDeleteIcon()}))},_destroySelf:function(){this.destroy()}})})},"widgets/Stream/FilterUtil":function(){define(["dojo/json","jimu/dijit/Filter","dojo/dom-construct"],function(l,h,f){return{buildFilterInfoFromString:function(q,m,k){var d=new h,r=f.create("div"),b=l.parse(q._json);d.placeAt(r);d.startup();return d.buildByExpr(q.url,m,b).then(function(){return{inherited:!0,definitionExpression:m,name:k,filterInfo:d.toJson()}},function(){return null})}}})},"widgets/Stream/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Stream/setting/Setting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"stream-list"\x3e\r\n    \x3cdiv class\x3d"stream-list-head" style\x3d"overflow:hidden;"\x3e\r\n      \x3cdiv class\x3d"jimu-float-leading jimu-widget-title"\x3e${nls.streamLayers}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"stream-list-content"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"streamList"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"single-stream-container" data-dojo-attach-point\x3d"singleStreamContainer"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Stream/setting/StreamSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"detailSection" class\x3d"detail"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"titleContainer"\x3e\r\n        \x3clabel class\x3d"jimu-widget-title"\x3e${nls.streamControls}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"startStopCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"clearPreviousCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"drawPreviousCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"titleContainer"\x3e\r\n        \x3clabel class\x3d"jimu-widget-title"\x3e${nls.streamFilter}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"spatialFilterCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"spatialChoices"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"mapExtentCheckBoxDiv" class\x3d"subCheckboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"subCheckboxContainer"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"drawExtentCheckBoxDiv" class\x3d"jimu-widget-tooltip" style\x3d"display:inline"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"symbolPickerNode" style\x3d"display:none"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"filterCheckBoxDiv" class\x3d"jimu-widget-tooltip"\r\n             class\x3d"checkboxContainer" style\x3d"display: inline-block"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"filterIcon" class\x3d"filterIcon disabled jimu-leading-margin05"\r\n          data-dojo-attach-event\x3d"onClick: _showFilter"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Stream/setting/FilterConfig.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"stream-filter-head" style\x3d"overflow:hidden;"\x3e\r\n    \x3cdiv class\x3d"jimu-float-leading"\x3e\r\n      \x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_addFilter"\x3e\r\n        \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"add-label jimu-widget-normal"\x3e${nls.addNew}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"stream-filterList"\x3e\r\n    \x3cdiv class\x3d"stream-filterList-content"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"filterList"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"single-filter-container" data-dojo-attach-point\x3d"singleFilterContainer"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Stream/setting/SingleFilter.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"single-filter-container"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan class\x3d"jimu-widget-normal"\x3e${nls.filterName}\x3c/span\x3e\r\n      \x3cinput data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n        data-dojo-props\x3d"required:true"\r\n        data-dojo-attach-point\x3d"filterNameEditor"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"position:relative;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"singleFilterContent"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"filterMask" class\x3d"mask"\x3e\x3c/div\x3e\r\n      \x3cspan class\x3d"jimu-widget-normal mask-tip" data-dojo-attach-point\x3d"filterMaskTip"\x3e\r\n        ${nls.filterReadOnly}\r\n      \x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter"\r\n       data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/Filter.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentSection" class\x3d"content-section"\x3e\r\n\t\t\x3cdiv class\x3d"add-btn-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddExp" data-dojo-attach-event\x3d"click:_onBtnAddExpClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-expression jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddExp" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addAnotherExpression}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddSet" data-dojo-attach-event\x3d"click:_onBtnAddSetClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-set jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddSet" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addSet}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"matchMsg" style\x3d"margin-top:11px;margin-bottom:11px;display:none;"\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"allExpsBox" data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"errorSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"noFilterTipSection" class\x3d"no-filter-tip" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/_filter/TwoNumbersValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/TwoDatesValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/ListValueProvider.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"valuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"label",required:false,intermediateChanges:true\' style\x3d"width:100%;" data-dojo-attach-event\x3d"input:_onFilteringSelectInput"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:jimu/dijit/templates/_SingleFilter.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"setting-table" cellpadding\x3d"0" cellspacing\x3d"0" cellpadding\x3d"10px" style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"fields-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"displayName",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"operators-td" nowrap\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"operatorsSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;" class\x3d"operator-select dijit-form-Select restrict-select-width"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.none}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"value-td" nowrap data-dojo-attach-point\x3d"valueTd"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"attributeValueContainer" class\x3d"value-container"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-table-container"\x3e\r\n\t\t\t\t\t\t\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"valueRadio" checked\x3d"true" disabled  title\x3d"${nls.valueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"valueLabel" title\x3d"${nls.valueTooltip}"\x3e${nls.value}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"fieldRadio" disabled title\x3d"${nls.fieldTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"fieldLabel" title\x3d"${nls.fieldTooltip}"\x3e${nls.field}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"uniqueTd"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"uniqueRadio" disabled title\x3d"${nls.uniqueValueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"uniqueLabel" title\x3d"${nls.uniqueValueTooltip}"\x3e${nls.unique}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"delete-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-delete" data-dojo-attach-point\x3d"btnDelete"\r\n\t\t\t\t\t data-dojo-attach-event\x3d"click:_destroySelf"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"askvalues"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAskValues" label\x3d"${nls.askForValues}" class\x3d"jimu-trailing-margin6"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxCaseSensitive" label\x3d"${nls.caseSensitive}" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"promptSection" class\x3d"prompt"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"promptTable" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"prompt-table" style\x3d"width:100%;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.prompt}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"promptTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.hint}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"hintTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"cascadeTr" class\x3d"cascade-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"margin-bottom:5px;"\x3e${nls.listValues}:\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"cascadeSelect" class\x3d"cascade-select restrict-select-width" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.noneCascadeFilterTip}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"previous"\x3e${nls.previousCascadeFilterTip}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"all"\x3e${nls.allCascadeFilterTip}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_FilterSet.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"header-table" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"onclick:_destroySelf"\r\n\t\t\t\t\t class\x3d"jimu-icon jimu-icon-delete"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:14px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAdd" class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Stream/setting/css/style.css":".jimu-widget-stream-setting{height: 90%; margin-top: 20px;}.jimu-widget-stream-setting .titleContainer{margin-bottom: 12px;}.jimu-widget-stream-setting .checkboxContainer{margin-bottom: 15px;}.jimu-widget-stream-setting .subCheckboxContainer{margin-bottom: 15px; margin-left: 30px;}.jimu-rtl .jimu-widget-stream-setting .subCheckboxContainer{margin-right: 30px; margin-left: auto;}.jimu-widget-stream-setting .filterIcon{background-image: url(images/edit_icon02.png); width: 16px; height: 16px; cursor: pointer; background-repeat: no-repeat; display: inline-block;}.jimu-widget-stream-setting .filterIcon.disabled{background-image: url(images/edit_icon01.png); cursor: default;}.jimu-widget-stream-setting .stream-list{position: absolute; top: 0; left: 0; width: 235px; height: 100%;}.jimu-rtl .jimu-widget-stream-setting .stream-list{left: auto; right: 0;}.jimu-widget-stream-setting .stream-list-content{position: absolute; width: 100%; top: 30px; bottom: 5px; overflow-y: auto;}.jimu-widget-stream-setting .single-stream-container{position: absolute; left: 265px; right: 0; height: 100%; overflow-y: auto;}.jimu-rtl .jimu-widget-stream-setting .single-stream-container{right: 265px; left: 0;}.stream-filter-head{width: 100%; height: 30px;}.stream-filterList{width: 100%; height: 100%;}.stream-filterList-content{position: absolute; width: 250px; top: 40px; bottom: 5px; overflow-y: auto;}.single-filter-container{margin-left: 140px; margin-top: 5px; overflow-y: auto;}.jimu-rtl .single-filter-container{margin-right: 140px; margin-left: auto;}.jimu-widget-stream-filter .mask{position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: #FFFFFF; opacity: 0;}.jimu-widget-stream-filter .mask-tip{color: #FF0000;}",
"*now":function(l){l(['dojo/i18n!*preload*widgets/Stream/setting/nls/Setting*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/dom-style dojo/dom-class dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./Setting.html jimu/BaseWidgetSetting ./utils ./StreamSetting jimu/dijit/SimpleTable jimu/dijit/LoadingShelter".split(" "),function(l,h,f,q,m,k,d,r,b,p,e,g,a){return l([p,d,r],{baseClass:"jimu-widget-stream-setting",templateString:b,postMixInProperties:function(){this.inherited(arguments);h.mixin(this.nls,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);
this.streamList=new a({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.name,width:"auto",type:"text",editable:!1}]},this.streamList);k.add(this.streamList.domNode,"stream-list-table");m.set(this.streamList.domNode,"height","100%");this.own(q(this.streamList,"row-select",h.hitch(this,this._onStreamLayerSelected)));this.streamList.startup();this.layerList=e.getStreamLayers(this.map);f.forEach(this.layerList,h.hitch(this,function(a,b){var c,d,g=null;c=this.streamList.addRow({name:e.getStreamLayerName(a.url)});
c.success&&(d=c.tr,this.config&&this.config.streamLayers&&0<this.config.streamLayers.length&&f.some(this.config.streamLayers,h.hitch(this,function(b){if(b.layerId===a.id)return g=b,!0})),this._createSingleStreamSetting(d,a,g));0===b&&this.streamList.selectRow(d)}))},getConfig:function(){var a,b={streamLayers:[]};f.forEach(this.streamList.getRows(),function(c){a=c.streamLayerSetting;b.streamLayers.push(a.getConfig())});return b},_onStreamLayerSelected:function(a){var b;this.currentTR?this.currentTR!==
a&&((b=this.currentTR.streamLayerSetting)&&m.set(b.domNode,"display","none"),this.currentTR=a,(b=this.currentTR.streamLayerSetting)&&m.set(b.domNode,"display","block")):(this.currentTR=a,(b=this.currentTR.streamLayerSetting)&&m.set(b.domNode,"display","block"))},_createSingleStreamSetting:function(a,b,d){var c=this.streamList.getRowData(a);b=new g({map:this.map,nls:this.nls,config:d,layerName:c?c.name:"",streamLayer:b});b.placeAt(this.singleStreamContainer);a.streamLayerSetting=b;m.set(b.domNode,
"display","none")}})});