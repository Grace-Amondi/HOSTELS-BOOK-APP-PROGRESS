// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/html dojo/has jimu/utils".split(" "),function(m,b,n,k,c,d){return b([m],{declaredClass:"saveJSON",config:null,constructor:function(a){b.safeMixin(this,a)},_getDownloadUrl:function(a){return window.Blob&&window.URL&&window.URL.createObjectURL?(a=new Blob([a],{type:"text/json"}),URL.createObjectURL(a)):"data:attachment/json;charset\x3dutf-8,"+encodeURIComponent(a)},exportsJson:function(a,b){var f=JSON.stringify(b),g=new n;try{if(c("ie")&&
10>c("ie")){var e=window.top.open("about:blank","_blank");e.document.write("sep\x3d,\r\n"+f);e.document.close();e.document.execCommand("SaveAs",!0,a);e.close();this.savePrompt()}else if(10===c("ie")||this._isIE11()||this._isEdge()){var d=new Blob([f],{type:"text/json"});navigator.msSaveBlob(d,a);this.savePrompt()}else{var h=k.create("a",{href:this._getDownloadUrl(f),target:"_blank",download:a},document.body);if(c("safari")){var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!0);h.dispatchEvent(l)}else h.click();
this.savePrompt();k.destroy(h)}g.resolve()}catch(p){g.reject(p)}return g},_isIE11:function(){return 11===d.has("ie")},_isEdge:function(){return d.has("edge")},savePrompt:function(){this.emit("complete",{})}})});