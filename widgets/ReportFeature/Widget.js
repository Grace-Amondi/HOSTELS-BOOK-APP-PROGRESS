// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/ReportFeature/SelectFeatureDialog":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/string dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/i18n!esri/nls/jsapi esri/main esri/layers/FeatureLayer esri/toolbars/draw esri/tasks/IdentifyTask esri/tasks/query esri/tasks/IdentifyParameters esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/geometry/Extent esri/tasks/datareviewer/ReviewerResultsTask ./InfoWindowContent dojo/text!./SelectFeatureDialog.html".split(" "),
function(m,k,p,l,b,h,g,r,q,d,a,c,f,t,e,u,y,n,z,w,x,v,C,D){var A=new n({type:"esriSMS",style:"esriSMSCircle",size:12,xoffset:0,yoffset:0,color:[0,0,255,51],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}}),B=new z({type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,51],width:2}),E=new w({type:"esriSFS",style:"esriSFSSolid",color:[0,0,255,26],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}});return m([r,q],{templateString:D,baseClass:"drs-widget-selectFeature",
buildRendering:function(){this.inherited(arguments);this._initDom()},_initDom:function(){var a=this.getLayerOptions();void 0!==a&&""!==a&&h.place(a,this.selectLayer)},postCreate:function(){this.inherited(arguments);this._initEvents()},_initEvents:function(){var c=this;this.selectionToolbar=new t(this.map);this.selectionToolbar.on("draw-end",p.hitch(this,this.addGraphic));this.own(l(this.selectLayer,"change",function(f){a.toolbars.draw.addPoint=c.nls.selectFeatureMapPoint;(f=f.target.value)?c.startSelectFeature(f):
c.cancelSelectFeature()}));this.own(l(this.map.infoWindow,"hide",function(){var a=d(".actionsPane");void 0!==a&&null!==a&&0<a.length&&(a[0].style.display="");c.emit("InfoWindowHide")}))},startSelectFeature:function(a){var c;c=k.filter(this.config.layers,function(c){return c.id===a});if(void 0!==c&&0<c.length&&(c=this.map.getLayer(a),void 0===c)){this.emit("Error",{},[this.nls.errorMapService]);return}this.selectionToolbar.activate(t.POINT);g.set(this.clickAFeatureNode,"display","")},addGraphic:function(a){var b=
this.selectLayer.value,n=k.filter(this.config.layers,function(a){return a.id===b});a=a.geometry;if("ArcGISMapServiceLayer"===n[0].layerType)this.identifyTask=new e(n[0].url),this._identifyFeatures(a);else{null!==this.featureLayer&&void 0!==this.featureLayer&&(this.featureLayer=null);this.featureLayer=new f(n[0].url,{outFields:["*"],mode:c.layers.FeatureLayer.MODE_SELECTION});var n=new u,d=10*(this.map.extent.getWidth()/this.map.width);a=new x(a.x-d,a.y-d,a.x+d,a.y+d,this.map.spatialReference);n.geometry=
a;this.featureLayer.selectFeatures(n,f.SELECTION_NEW,p.hitch(this,function(a){1<a.length?this.emit("Message",{},[this.nls.manyFeaturesSelected]):1===a.length?(this.selectionToolbar.deactivate(),this._onTaskComplete(a[0])):this.emit("Message",{},[this.nls.noFeatureSelected])}))}},cancelSelectFeature:function(){null!==this.selectionToolbar&&void 0!==this.selectionToolbar&&""===this.selectLayer.value&&this.selectionToolbar.deactivate();g.set(this.clickAFeatureNode,"display","none")},_identifyFeatures:function(a){var c=
this,f=new y;this.identifying||(this.identifying=!0,g.set(this.loadingFeaturesNode,"display",""),f.returnGeometry=!0,f.width=this.map.width,f.height=this.map.height,f.tolerance=3,f.geometry=a,f.mapExtent=this.map.extent,f.spatialReference=this.map.spatialReference,this.identifyTask.execute(f).then(function(a){0<a.length?(c.selectionToolbar.deactivate(),c._onTaskComplete(a[0].feature)):(g.set(c.loadingFeaturesNode,"display","none"),c.identifying=!1,this.emit("Message",{},[this.nls.noFeatureSelected]))},
function(a){c._onIdentifyError(a)}))},_onTaskComplete:function(a){var c=this,f,e;this.identifying=!1;g.set(this.loadingFeaturesNode,"display","none");if(a){var n=this.selectLayer.value,b=k.filter(this.config.layers,function(a){return a.id===n});this._selectedFeature=a;switch(a.geometry.type){case "point":a.setSymbol(A);e=a.geometry;f=this.map.centerAt(a.geometry);break;case "polyline":a.setSymbol(B);e=a.geometry.getExtent().getCenter();a.setSymbol(B);f=this.map.centerAt(e);break;case "polygon":a.setSymbol(E),
e=a.geometry.getCentroid(),f=this.map.centerAt(e)}f.then(function(){c._showInfoWindow(b[0].alias,e,a)})}},_showInfoWindow:function(a,c,f){var e=this;this.infoWindowContent=new C({nls:this.nls,title:this.nls.select,includeReportedBy:this.config.includeReportedBy,defaultUserName:this.config.defaultUserName,onReportSubmit:function(a){e.submitReport(a)}},h.create("div"));this.map.infoWindow.setTitle(this.nls.infoWindowTitle);this.infoWindowContent.startup();this.infoWindowContent.set("layerName",a);this.infoWindowContent.set("graphic",
f);l.once(this.map.infoWindow,"hide",function(){e.selectionToolbar.activate(t.POINT);e.map.setInfoWindowOnClick(!1)});this.map.infoWindow.destroyDijits();d(".actionsPane")[0].style.display="none";this.map.infoWindow.setContent(this.infoWindowContent.domNode);this.map.infoWindow.resize(300,600);this.map.infoWindow.show(c);this.emit("SelectFeature")},_onIdentifyError:function(a){this.identifying=!1;g.set(this.loadingFeaturesNode,"display","none");this.emit("Error",{},[this.nls.errorIdentify,a])},submitReport:function(a){var c=
this;a.sessionId=this._sessionId;this.map.infoWindow.hide();this._reviewerResultsTask.writeFeatureAsResult(a,this._selectedFeature).then(function(a,f){c._onWriteFeatureAsResultComplete(a,f)},function(a){c._onWriteFeatureAsResultError(a)})},_onWriteFeatureAsResultComplete:function(a){a&&a.success?(this.emit("Message",{},["",this.nls.reportMessage]),this.selectionToolbar.activate(t.POINT)):this.emit("Error",{}[this.nls.errorReportMessage])},_onWriteFeatureAsResultError:function(a){this.selectionToolbar.activate(t.POINT);
this.emit("Error",{},[a.message,a])},reset:function(){this.selectLayer.selectedIndex=0;this.cancelSelectFeature();void 0!==this.infoWindowContent&&null!==this.infoWindowContent&&this.infoWindowContent.destroyRecursive();this.map.setInfoWindowOnClick(!1)},setDrsUrl:function(a){this._reviewerResultsTask=new v(a)},setReviewerSession:function(a){isNaN(a)?this._sessionId=1:this._sessionId=parseInt(a,10)},getLayerOptions:function(){var a="";k.forEach(this.config.layers,function(c){!0===c.show&&(a+=b.substitute('\x3coption value\x3d"${id}"\x3e${alias}\x3c/option\x3e',
c))});return a}})})},"esri/tasks/IdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./IdentifyResult".split(" "),function(m,k,p,l,b,h,g,r,q){m=m(r,{declaredClass:"esri.tasks.IdentifyTask",_eventMap:{complete:["results"]},constructor:function(b,a){this._url.path+="/identify";this._handler=k.hitch(this,this._handler);this.gdbVersion=a&&a.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:3,
a:[{i:0,p:["geometry"]}],e:2}],_handler:function(b,a,c,f,h){try{var e=[];p.forEach(b.results,function(a,c){e[c]=new q(a)});this._successHandler([e],"onComplete",c,h)}catch(u){this._errorHandler(u,f,h)}},execute:function(b,a,c,f){var d=f.assembly;b=this._encode(k.mixin({},this._url.query,{f:"json"},b.toJson(d&&d[0])));var e=this._handler,g=this._errorHandler;this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return h({url:this._url.path,content:b,callbackParamName:"callback",load:function(b,n){e(b,n,
a,c,f.dfd)},error:function(a){g(a,c,f.dfd)}})},onComplete:function(){}});g._createWrappers(m);l("extend-esri")&&k.setObject("tasks.IdentifyTask",m,b);return m})},"esri/tasks/IdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../graphic ../geometry/jsonUtils".split(" "),function(m,k,p,l,b,h){m=m(null,{declaredClass:"esri.tasks.IdentifyResult",constructor:function(g){k.mixin(this,g);this.feature=new b(g.geometry?h.fromJson(g.geometry):null,null,g.attributes);delete this.geometry;
delete this.attributes}});p("extend-esri")&&k.setObject("tasks.IdentifyResult",m,l);return m})},"esri/tasks/IdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../layerUtils ../geometry/jsonUtils ../geometry/scaleUtils".split(" "),function(m,k,p,l,b,h,g,r,q){var d=m(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=d.LAYER_OPTION_TOP},geometry:null,spatialReference:null,layerIds:null,
tolerance:null,returnGeometry:!1,mapExtent:null,width:400,height:400,dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(a){var c=a&&a.geometry||this.geometry,f=this.mapExtent,b=this.spatialReference,e=this.layerIds;a={tolerance:this.tolerance,returnGeometry:this.returnGeometry,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision};if(c){var h=c.toJson();delete h.spatialReference;
a.geometry=l.toJson(h);a.geometryType=r.getJsonType(c)}b?a.sr=b.wkid||l.toJson(b.toJson()):c&&c.spatialReference?a.sr=c.spatialReference.wkid||l.toJson(c.spatialReference.toJson()):f&&f.spatialReference&&(a.sr=f.spatialReference.wkid||l.toJson(f.spatialReference.toJson()));f&&(a.mapExtent=f.xmin+","+f.ymin+","+f.xmax+","+f.ymax);a.layers=this.layerOption;e&&(a.layers+=":"+e.join(","));a.layerDefs=g._serializeLayerDefinitions(this.layerDefinitions,!0);c=this.timeExtent;a.time=c?c.toJson().join(","):
null;a.layerTimeOptions=g._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var f=q.getScale({extent:f,width:this.width,spatialReference:f.spatialReference}),d=g._getLayersForScale(f,this.dynamicLayerInfos),n=[];p.forEach(this.dynamicLayerInfos,function(a){if(!a.subLayerIds){var c=a.id;if((!this.layerIds||this.layerIds&&-1!==p.indexOf(this.layerIds,c))&&-1!==p.indexOf(d,c)){var f={id:c};f.source=a.source&&a.source.toJson();var e;this.layerDefinitions&&
this.layerDefinitions[c]&&(e=this.layerDefinitions[c]);e&&(f.definitionExpression=e);var b;this.layerTimeOptions&&this.layerTimeOptions[c]&&(b=this.layerTimeOptions[c]);b&&(f.layerTimeOptions=b.toJson());n.push(f)}}},this);f=l.toJson(n);"[]"===f&&(f="[{}]");a.dynamicLayers=f}return a}});k.mixin(d,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"});b("extend-esri")&&k.setObject("tasks.IdentifyParameters",d,h);return d})},"esri/tasks/datareviewer/ReviewerResultsTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/json dojo/has ./_DRSBaseTask ../../request ../FeatureSet ../../layers/FeatureEditResult ../../kernel".split(" "),
function(m,k,p,l,b,h,g,r,q,d,a){m=m(g,{declaredClass:"esri.tasks.datareviewer.ReviewerResultsTask",constructor:function(a){this.onGetResultsComplete=k.hitch(this,this.onGetResultsComplete);this.onWriteResultComplete=k.hitch(this,this.onWriteResultComplete);this.onWriteFeatureAsResultComplete=k.hitch(this,this.onWriteFeatureAsResultComplete);this.onGetLayerDefinitionComplete=k.hitch(this,this.onGetLayerDefinitionComplete);this.onGetBatchRunDetailsComplete=k.hitch(this,this.onGetBatchRunDetailsComplete)},
getResults:function(a,f){var c=this._successHandler,e=this._errorHandler,b=this._appendQueryParams,h=this._url+"/ReviewerResults/getResults",h=b(h),n=new l,b={queryParameters:a.toJSON(),f:"json"};null!==f&&void 0!==f&&(b.filtersArray=f.toJSON());r({callbackParamName:"callback",url:h,content:b}).then(k.hitch(this,function(a,f){if(void 0!==a.error){var b=Error();b.message=a.error.message;b.code=a.error.code;e(b,n)}else try{void 0===a.features||void 0===a.fieldAliases||void 0===a.fields?e(null,n):(b=
new q(a),c({featureSet:b},"onGetResultsComplete",n))}catch(v){e(v,n)}}),function(a,c){e(a,n)});return n},writeResult:function(a,f){var c=this._successHandler,e=this._errorHandler,h=this._appendQueryParams,d=this._url+"/ReviewerResults/writeResult",d=h(d),n=new l;r({callbackParamName:"callback",url:d,content:{reviewerAttributes:a.toJSON(),geometry:b.stringify(f.toJson()),f:"json"}}).then(k.hitch(this,function(a,f){var b=Error();if(void 0!==a.error)b.message=a.error.message,b.code=a.error.code,e(b,
n);else try{void 0!==a.result&&"error"===a.result?(b.message=a.messages,b.code=a.result,e(b,n)):"success"===a.result?c({success:!0},"onWriteResultComplete",n):e(null,n)}catch(v){e(v,n)}}),function(a,c){e(a,n)});return n},writeFeatureAsResult:function(a,f){var c=this._successHandler,e=this._errorHandler,h=this._appendQueryParams,d=this._url+"/ReviewerResults/writeFeatureAsResult",d=h(d),n=new l;r({callbackParamName:"callback",url:d,content:{reviewerAttributes:a.toJSON(),feature:b.stringify(f.toJson()),
f:"json"}}).then(k.hitch(this,function(a,f){var b=Error();if(void 0!==a.error)b.message=a.error.message,b.code=a.error.code,e(b,n);else try{void 0!==a.result&&"error"===a.result?(b.message=a.messages,b.code=a.result,e(b,n)):"success"===a.result?c({success:!0},"onWriteFeatureAsResultComplete",n):e(null,n)}catch(v){e(v,n)}}),function(a,c){e(a,n)});return n},getLayerDefinition:function(a){var c=this._successHandler,b=this._errorHandler,e=this._appendQueryParams,h=this._url+"/ReviewerResults/getLayerDefinition",
h=e(h),d=new l,e={f:"json"};if(null!==a||void 0!==a)e.filtersArray=a.toJSON();r({callbackParamName:"callback",url:h,content:e}).then(k.hitch(this,function(a,f){if(void 0!==a.error){var e=Error();e.message=a.error.message;e.code=a.error.code;b(e,d)}else try{void 0===a.whereClause?b(null,d):c({whereClause:a.whereClause},"onGetLayerDefinitionComplete",d)}catch(x){b(x,d)}}),function(a,c){b(a,d)});return d},getBatchRunDetails:function(a){var c=this._successHandler,d=this._errorHandler,e=this._appendQueryParams,
h=this._url+"/ReviewerResults/getBatchRunDetails",h=e(h),g=new l;r({callbackParamName:"callback",url:h,content:{batchRunIds:b.stringify(a),f:"json"}}).then(k.hitch(this,function(a,f){if(void 0!==a.error){var b=Error();b.message=a.error.message;b.code=a.error.code;d(b,g)}else try{void 0===a.features||void 0===a.fieldAliases||void 0===a.fields?d(null,g):(b=new q(a),c({featureSet:b},"onGetBatchRunDetailsComplete",g))}catch(x){d(x,g)}}),function(a,c){d(a,g)});return g},updateLifecycleStatus:function(a,
b,h,e){var c=this._successHandler,f=this._errorHandler,g=this._appendQueryParams,m=this._url+"/ReviewerResults/updateLifecycleStatus",m=g(m),t=new l;r({callbackParamName:"callback",url:m,content:{sessionId:a,lifecycleStatus:b,technicianName:h,filtersArray:e.toJSON(),f:"json"}}).then(k.hitch(this,function(a,b){if(void 0!==a.error){var e=Error();e.message=a.error.message;e.code=a.error.code;f(e,t)}else try{var h=[];p.forEach(a.updateResults,function(a){var c=new d;c.error=Error(a.description);c.success=
a.success;c.objectId=a.objectId;h.push(c)});c({featureEditResults:h},"onUpdateLifecycleStatusComplete",t)}catch(A){f(A,t)}}),function(a,c){f(a,t)});return t},getResultsFieldNames:function(){return"recordId objectId subtype category sessionId checktitle resourceName checkName notes severity reviewStatus correctionStatus verificationStatus reviewTechnician correctionTechnician verificationTechnician reviewDateUtc correctionDateUtc verificationDateUtc lifecycleStatus".split(" ")},onGetResultsComplete:function(a){},
onWriteResultComplete:function(a){},onWriteFeatureAsResultComplete:function(a){},onGetLayerDefinitionComplete:function(a){},onGetBatchRunDetailsComplete:function(a){},onUpdateLifecycleStatusComplete:function(a){}});h("extend-esri")&&k.setObject("tasks.datareviewer.ReviewerResultsTask",m,a);return m})},"esri/tasks/datareviewer/_DRSBaseTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../../request ../../urlUtils ../../kernel ../Task ./ReviewerSession".split(" "),
function(m,k,p,l,b,h,g,r,q,d){m=m(q,{declaredClass:"esri.tasks.datareviewer.DRSBaseTask",_url:null,_queryParams:null,_reviewerMapServerUrl:null,constructor:function(a){"/"==a[a.length-1]&&(a=a.slice(0,-1));a=g.urlToObject(a);this._url=a.path;this._queryParams=a.query;a=this._url.toLowerCase().lastIndexOf("/exts/");0<a&&(this._reviewerMapServerUrl=this._url.substring(0,a));this._successHandler=k.hitch(this,this._successHandler);this._errorHandler=k.hitch(this,this._errorHandler);this._appendQueryParams=
k.hitch(this,this._appendQueryParams);this.onError=k.hitch(this,this.onError)},_appendQueryParams:function(a){if(this._queryParams)for(var c in this._queryParams)a=g.urlToObject(a).query?a+("\x26"+c+"\x3d"+this._queryParams[c]):a+("?"+c+"\x3d"+this._queryParams[c]);return a},_successHandler:function(a,c,b){c&&this[c].apply(this,[a]);b&&b.resolve(a)},_errorHandler:function(a,c){null===a&&(a=Error("Unexpected response received from server"),a.code=500);this.onError(a);c&&c.reject(a)},getReviewerMapServerUrl:function(){var a=
null;if(a=this._reviewerMapServerUrl){if(this._queryParams)for(var c in this._queryParams)a=g.urlToObject(a).query?a+("\x26"+c+"\x3d"+this._queryParams[c]):a+("?"+c+"\x3d"+this._queryParams[c]);return a}return null},getLifecycleStatusStrings:function(){var a=this._successHandler,c=this._errorHandler,b=this._appendQueryParams,d=this._url+"/Utilities/getLifecycleStatusStrings",d=b(d),e=new l;h({callbackParamName:"callback",url:d,content:{f:"json"}}).then(k.hitch(this,function(b,f){if(void 0!==b.error){var d=
Error();d.message=b.error.message;d.code=b.error.code;c(d,e)}else try{if(d=b.lifecycleStatusString,void 0===d)c(null,e);else{var h=[];p.forEach(d,function(a,c){h[a.descriptionCode]=a.descriptionString});a({lifecycleStatusStrings:h},"onGetLifecycleStatusStringsComplete",e)}}catch(w){c(w,e)}}),function(a,b){c(a,e)});return e},createReviewerSession:function(a,c){var b=this._successHandler,g=this._errorHandler,e=this._appendQueryParams,m=this._url+"/Utilities/createReviewerSession",m=e(m),q=new l;h({callbackParamName:"callback",
url:m,content:{sessionName:a,sessionProperties:c.toJsonSessionOptions(),f:"json"}}).then(k.hitch(this,function(a,c){if(void 0!==a.error){var f=Error();f.message=a.error.message;f.code=a.error.code;g(f,q)}else try{if(void 0===a.sessionAttributes)g(null,q);else{var f=a.sessionAttributes,e=new d(f.sessionId,f.sessionName,f.userName,f.versionName);b({reviewerSession:e},"onCreateReviewerSessionComplete",q)}}catch(v){g(v,q)}}),function(a,c){g(a,q)});return q},getReviewerSessions:function(){var a=this._successHandler,
c=this._errorHandler,b=this._appendQueryParams,g=this._url+"/Utilities/getReviewerSessions",g=b(g),e=new l;h({callbackParamName:"callback",url:g,content:{f:"json"}}).then(k.hitch(this,function(b,f){if(void 0!==b.error){var h=Error();h.message=b.error.message;h.code=b.error.code;c(h,e)}else try{if(h=b.sessionAttributes,void 0===h)c(null,e);else{var g=[];p.forEach(h,function(a,b){g[b]=new d(a.sessionId,a.sessionName,a.userName,a.versionName)});a({reviewerSessions:g},"onGetReviewerSessionsComplete",
e)}}catch(w){c(w,e)}}),function(a,b){c(a,e)});return e},getCustomFieldNames:function(){var a=this._successHandler,b=this._errorHandler,f="BATCHJOBCHECKGROUP CHECKTITLE FEATUREOBJECTCLASS LIFECYCLEPHASE LIFECYCLESTATUS SESSIONID SEVERITY SUBTYPE".split(" "),d=this._appendQueryParams,e=this._url+"/Dashboard",e=d(e),g=new l;h({callbackParamName:"callback",url:e,content:{f:"json"}}).then(k.hitch(this,function(c,e){if(void 0!==c.error){var d=Error();d.message=c.error.message;d.code=c.error.code;b(d,g)}else try{var h=
[];void 0===c.reviewerResultsBy&&b(null,g);p.forEach(c.reviewerResultsBy,function(a,b){-1===f.indexOf(a.name)&&h.push(a.name)});a({customFieldNames:h},"onGetCustomFieldNamesComplete",g)}catch(x){b(x,g)}}),function(a,c){b(a,g)});return g},onGetLifecycleStatusStringsComplete:function(a){},onGetReviewerSessionsComplete:function(a){},onCreateReviewerSessionComplete:function(a){},onGetCustomFieldNamesComplete:function(a){},onError:function(a){}});b("extend-esri")&&k.setObject("tasks.datareviewer.DRSBaseTask",
m,r);return m})},"esri/tasks/datareviewer/ReviewerSession":function(){define(["dojo/_base/declare","dojo/has","dojo/_base/lang","../../kernel"],function(m,k,p,l){m=m(null,{declaredClass:"esri.tasks.datareviewer.ReviewerSession",sessionId:NaN,sessionName:"",userName:"",versionName:"",constructor:function(b,h,g,k){this.sessionId=b;this.sessionName=h;this.userName=g;void 0!==k&&(this.versionName=k)},toString:function(){return isNaN(this.sessionId)?null:"Session "+this.sessionId+" : "+this.sessionName}});
k("extend-esri")&&p.setObject("tasks.datareviewer.ReviewerSession",m,l);return m})},"widgets/ReportFeature/InfoWindowContent":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/dom-construct dojo/dom-class dojo/query dijit/_WidgetBase dijit/_TemplatedMixin esri/tasks/datareviewer/ReviewerAttributes dojo/text!./InfoWindowContent.html dojox/validate jimu/tokenUtils dojox/validate/check dojo/NodeList-dom".split(" "),function(m,k,p,l,b,h,g,r,q,d,a,c){return m([g,r],{baseClass:"drs-feature-info-window",
templateString:d,infoTitle:null,_setGraphicAttr:function(a){this.setGraphic(a)},_setLayerNameAttr:function(a){this.setLayerName(a)},_setNlsAttr:function(a){this.setLocalizedStrings(a)},postCreate:function(){this.inherited(arguments);this._initEvents()},_initEvents:function(){var a=this;"logon"===this.includeReportedBy||"default"===this.includeReportedBy?this.showHideDynamicRows(!1):this.showHideDynamicRows(!0);this.own(p(this.formNode,"submit",function(b){b.preventDefault();a._onFormSubmit()}))},
showHideDynamicRows:function(a){var b=h(".dynamicRow",this.formNode);if(void 0!==b&&null!==b&&0<b.length)for(var c=0;c<b.length;c++)b[c].style.display=a?"":"none"},setLayerName:function(a){this.formNode.reset();this.layerName=a;this.reviewerAttributes||(this.reviewerAttributes=new q);this.reviewerAttributes.resourceName=a;this.reviewerAttributes.severity=5;this.reviewerAttributes.lifecycleStatus=1;this.layerNode.innerHTML=this.layerName;this.statusNode.focus()},setGraphic:function(a){this.graphic=
a},setLocalizedStrings:function(a){var b=this.params.title;this.statusNode.options.length=0;var c="";this.nls=a;if(b===this.nls.select)for(var f in a)-1<f.indexOf("selectReviewStatus")&&(c=c+"\x3coption\x3e"+a[f]+"\x3c/option\x3e");else for(var d in a)-1<d.indexOf("drawReviewStatus")&&(c=c+"\x3coption\x3e"+a[d]+"\x3c/option\x3e");c&&l.place(c,this.statusNode,"last")},_onFormSubmit:function(){if(this.isFormValid()){if("default"===this.includeReportedBy)this.reviewerAttributes.reviewTechnician=this.defaultUserName;
else if("logon"===this.includeReportedBy){var a=c.getPortalCredential(c.getPortalUrl());this.reviewerAttributes.reviewTechnician=a.userId}else 0<this.reportedByNode.value.length&&(this.reviewerAttributes.reviewTechnician=this.reportedByNode.value);this.reviewerAttributes.notes=this.notesNode.value;this.reviewerAttributes.reviewStatus=this.statusNode.value;this.reviewerAttributes.severity=this.severityNode.value;this.emit("ReportSubmit",{},[this.reviewerAttributes])}},isFormValid:function(){var c=
{trim:["notes","reviewTechnician"],required:["reviewStatus"]},d;"user"===this.includeReportedBy&&c.required.push("reviewTechnician");c=a.check(this.formNode,c);d=c.hasMissing();h("input, select",this.formNode).removeClass("drs-input-err");d&&k.forEach(c.getMissing(),function(a){b.add(this.formNode[a],"drs-input-err")},this);return!d}})})},"esri/tasks/datareviewer/ReviewerAttributes":function(){define(["dojo/_base/declare","dojo/json","dojo/has","dojo/_base/lang","../../kernel"],function(m,k,p,l,b){m=
m(null,{declaredClass:"esri.tasks.datareviewer.ReviewerAttributes",sessionId:NaN,severity:NaN,resourceName:null,reviewStatus:null,reviewTechnician:null,notes:null,subtype:"",lifecycleStatus:NaN,constructor:function(){},toJSON:function(){var b={};isNaN(this.sessionId)||(b.sessionId=this.sessionId);isNaN(this.severity)||(b.severity=this.severity);null!==this.resourceName&&(b.resourceName=this.resourceName);null!==this.reviewStatus&&(b.reviewStatus=this.reviewStatus);null!==this.reviewTechnician&&(b.reviewTechnician=
this.reviewTechnician);null!==this.notes&&(b.notes=this.notes);null!==this.subtype&&(b.subtype=this.subtype);isNaN(this.lifecycleStatus)||(b.lifecycleStatus=this.lifecycleStatus);return k.stringify(b)}});p("extend-esri")&&l.setObject("tasks.datareviewer.ReviewerAttributes",m,b);return m})},"dojox/validate":function(){define(["./validate/_base"],function(m){return m})},"dojox/validate/_base":function(){define(["dojo/_base/lang","dojo/regexp","dojo/number","./regexp"],function(m,k,p,l){var b=m.getObject("dojox.validate",
!0);b.isText=function(b,g){g="object"==typeof g?g:{};return/^\s*$/.test(b)||"number"==typeof g.length&&g.length!=b.length||"number"==typeof g.minlength&&g.minlength>b.length||"number"==typeof g.maxlength&&g.maxlength<b.length?!1:!0};b._isInRangeCache={};b.isInRange=function(h,g){h=p.parse(h,g);if(isNaN(h))return!1;g="object"==typeof g?g:{};var k="number"==typeof g.max?g.max:Infinity,l="number"==typeof g.min?g.min:-Infinity,d=b._isInRangeCache,a=h+"max"+k+"min"+l+"dec"+("string"==typeof g.decimal?
g.decimal:".");if("undefined"!=typeof d[a])return d[a];d[a]=!(h<l||h>k);return d[a]};b.isNumberFormat=function(b,g){return(new RegExp("^"+l.numberFormat(g)+"$","i")).test(b)};b.isValidLuhn=function(b){var g=0,h,k;m.isString(b)||(b=String(b));b=b.replace(/[- ]/g,"");h=b.length%2;for(var d=0;d<b.length;d++)k=parseInt(b.charAt(d)),d%2==h&&(k*=2),9<k&&(k-=9),g+=k;return!(g%10)};return b})},"dojox/validate/check":function(){define(["dojo/_base/kernel","dojo/_base/lang","./_base"],function(m,k,p){m.experimental("dojox.validate.check");
p.check=function(l,b){var h=[],g=[],m={isSuccessful:function(){return!this.hasInvalid()&&!this.hasMissing()},hasMissing:function(){return 0<h.length},getMissing:function(){return h},isMissing:function(a){for(var b=0;b<h.length;b++)if(a==h[b])return!0;return!1},hasInvalid:function(){return 0<g.length},getInvalid:function(){return g},isInvalid:function(a){for(var b=0;b<g.length;b++)if(a==g[b])return!0;return!1}},q=function(a,b){return"undefined"==typeof b[a]};if(b.trim instanceof Array)for(var d=0;d<
b.trim.length;d++){var a=l[b.trim[d]];q("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.replace(/(^\s*|\s*$)/g,""))}if(b.uppercase instanceof Array)for(d=0;d<b.uppercase.length;d++)a=l[b.uppercase[d]],q("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.toUpperCase());if(b.lowercase instanceof Array)for(d=0;d<b.lowercase.length;d++)a=l[b.lowercase[d]],q("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=
a.value.toLowerCase());if(b.ucfirst instanceof Array)for(d=0;d<b.ucfirst.length;d++)a=l[b.ucfirst[d]],q("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()}));if(b.digit instanceof Array)for(d=0;d<b.digit.length;d++)a=l[b.digit[d]],q("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.replace(/\D/g,""));if(b.required instanceof Array)for(d=
0;d<b.required.length;d++)if(k.isString(b.required[d]))if(a=l[b.required[d]],!q("type",a)&&("text"==a.type||"textarea"==a.type||"password"==a.type||"file"==a.type)&&/^\s*$/.test(a.value))h[h.length]=a.name;else if(!(q("type",a)||"select-one"!=a.type&&"select-multiple"!=a.type||-1!=a.selectedIndex&&!/^\s*$/.test(a.options[a.selectedIndex].value)))h[h.length]=a.name;else if(a instanceof Array){for(var c=!1,f=0;f<a.length;f++)a[f].checked&&(c=!0);c||(h[h.length]=a[0].name)}if(b.required instanceof Array)for(d=
0;d<b.required.length;d++)if(k.isObject(b.required[d])){var t,e;for(e in b.required[d])a=l[e],t=b.required[d][e];if(a instanceof Array){for(f=c=0;f<a.length;f++)a[f].checked&&c++;c<t&&(h[h.length]=a[0].name)}else if(!q("type",a)&&"select-multiple"==a.type){for(f=c=0;f<a.options.length;f++)a.options[f].selected&&!/^\s*$/.test(a.options[f].value)&&c++;c<t&&(h[h.length]=a.name)}}if(k.isObject(b.dependencies))for(e in b.dependencies)a=l[e],q("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=
a.type||/\S+/.test(a.value)||m.isMissing(a.name)||(d=l[b.dependencies[e]],"text"!=d.type&&"textarea"!=d.type&&"password"!=d.type||/^\s*$/.test(d.value)||(h[h.length]=a.name));if(k.isObject(b.constraints))for(e in b.constraints)if((a=l[e])&&(q("tagName",a)||!(0<=a.tagName.toLowerCase().indexOf("input")||0<=a.tagName.toLowerCase().indexOf("textarea"))||!/^\s*$/.test(a.value))){var u;if(k.isFunction(b.constraints[e]))u=b.constraints[e](a.value);else if(k.isFunction(k.getObject(e,!1,b.constraints)))u=
k.getObject(e,!1,b.constraints)(a.value);else if(k.isArray(b.constraints[e]))if(k.isArray(b.constraints[e][0]))for(d=0;d<b.constraints[e].length&&(u=p.evaluateConstraint(b,b.constraints[e][d],e,a),u.isValid);d++);else u=k.isFunction(k.getObject(e,!1,b.constraints))?p.evaluateConstraint(b,b.constraints[b.constraints[e]],e,a):p.evaluateConstraint(b,b.constraints[e],e,a);u?"boolean"===typeof u||u.isValid||(g[g.length]={field:a.name,message:u.message}):g[g.length]=a.name}if(k.isObject(b.confirm))for(e in b.confirm)a=
l[e],d=l[b.confirm[e]],q("type",a)||q("type",d)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||d.type!=a.type||d.value==a.value||m.isInvalid(a.name)||/^\s*$/.test(d.value)||(g[g.length]=a.name);return m};p.evaluateConstraint=function(l,b,h,g){l=b[0];b=b.slice(1);b.unshift(g.value);return"undefined"!=typeof l&&"string"!=typeof l?l.apply(null,b):"undefined"!=typeof l&&"string"==typeof l&&k.isFunction(k.getObject(l))?k.getObject(l).apply(null,b):!1};return p.check})},"widgets/ReportFeature/DrawErrorDialog":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/string dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/i18n!esri/nls/jsapi esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/geometry/Polygon esri/tasks/datareviewer/ReviewerResultsTask ./InfoWindowContent dojo/text!./DrawErrorDialog.html".split(" "),
function(m,k,p,l,b,h,g,r,q,d,a,c,f,t,e,u,y){var n=new a({type:"esriSMS",style:"esriSMSCircle",size:12,xoffset:0,yoffset:0,color:[0,0,255,51],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}}),z=new c({type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,51],width:2}),w=new f({type:"esriSFS",style:"esriSFSSolid",color:[0,0,255,26],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}});return m([g,r],{templateString:y,baseClass:"drs-draw-error-dialog",buildRendering:function(){this.inherited(arguments);
this._initDom()},_initDom:function(){var a=this.getLayerOptions();void 0!==a&&""!==a&&b.place(a,this.selectLayer)},_setDrawBoxAttr:function(a){this.setDrawBox(a)},setDrawBox:function(a){this.drawBox=a;this.drawBox.placeAt(this.drawBoxNode);this.drawBox.setMap(this.map);this.drawBox.setPointSymbol(n);this.drawBox.setLineSymbol(z);this.drawBox.setPolygonSymbol(w)},postCreate:function(){this.inherited(arguments);this._initEvents()},startup:function(){this.inherited(arguments);this.drawBox.startup()},
_initEvents:function(){var a=this;this.own(p(this.selectLayer,"change",function(b){var c=b.target.value;b=k.filter(a.config.layers,function(a){return a.id===c});void 0!==b&&0<b.length&&void 0===a.map.getLayer(c)?a.emit("Error",{},[a.nls.errorMapService]):(d.toolbars.draw.addPoint=a.nls.drawFeatureMapPoint,c?a.startDrawing():a.cancelDrawing())}));this.own(p(this.map.infoWindow,"hide",function(){var b=q(".actionsPane");void 0!==b&&null!==b&&0<b.length&&(b[0].style.display="");a.emit("InfoWindowHide")}));
this.own(p(this.drawBox,"DrawEnd",function(b,c,d){a._onDrawEnd(b,c,d)}))},startDrawing:function(){h.set(this.drawErrorInstructionsNode,"display","");h.set(this.drawBoxNode,"display","")},cancelDrawing:function(){this.drawBox.clear();this.drawBox.deactivate();h.set(this.drawErrorInstructionsNode,"display","none");h.set(this.drawBoxNode,"display","none")},_onDrawEnd:function(a){var c=this,d=a.geometry,f;"extent"===d.type&&(f=new t(d.spatialReference),f.addRing([[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,
d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]]),d=f);this._resultGeometry=d;this.drawBox.clear();this.drawBox.deactivate();if(null!==this._resultGeometry){switch(this._resultGeometry.type){case "polyline":d=this._resultGeometry.getExtent().getCenter();break;case "polygon":d=this._resultGeometry.getCentroid();break;default:d=this._resultGeometry}this.map.infoWindow.setTitle(this.nls.infoWindowTitle);this.infoWindowContent=new u({nls:this.nls,title:this.nls.draw,includeReportedBy:this.config.includeReportedBy,
defaultUserName:this.config.defaultUserName,onReportSubmit:function(a){c.submitReport(a)}},b.create("div"));this.infoWindowContent.startup();f=k.filter(c.config.layers,function(a){return a.id===c.selectLayer.value});this.infoWindowContent.set("layerName",f[0].alias);this.infoWindowContent.set("graphic",a);p.once(this.map.infoWindow,"hide",function(){c.map.setInfoWindowOnClick(!1)});this.map.infoWindow.destroyDijits();q(".actionsPane")[0].style.display="none";this.map.infoWindow.setContent(this.infoWindowContent.domNode);
this.map.infoWindow.resize(300,600);this.map.infoWindow.show(d);this.emit("DrawEnd")}},submitReport:function(a){var b=this;a.sessionId=this._sessionId;this.map.infoWindow.hide();this._reviewerResultsTask.writeResult(a,this._resultGeometry).then(function(a){b._onWriteResultComplete(a)},function(a){b._onWriteResultError(a)})},_onWriteResultComplete:function(a){a&&a.success?this.emit("Message",{},["",this.nls.reportMessage]):this.emit("Error",{}[this.nls.errorReportMessage])},_onWriteResultError:function(a){this.emit("Error",
{},[a.message,a])},destroy:function(){this.drawBox&&(this.drawBox.destroy(),this.drawBox=null);this.inherited(arguments)},reset:function(){this.selectLayer.selectedIndex=0;void 0!==this.infoWindowContent&&null!==this.infoWindowContent&&this.infoWindowContent.destroyRecursive();this.map.setInfoWindowOnClick(!1);this.cancelDrawing()},setDrsUrl:function(a){this._reviewerResultsTask=new e(a)},setReviewerSession:function(a){isNaN(a)?this._sessionId=1:this._sessionId=parseInt(a,10)},getLayerOptions:function(){var a=
"";k.forEach(this.config.layers,function(b){!0===b.show&&(a+=l.substitute('\x3coption value\x3d"${id}"\x3e${alias}\x3c/option\x3e',b))});return a}})})},"widgets/ReportFeature/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/ReportFeature/InfoWindowContent.html":'\x3cdiv\x3e\r\n  \x3cform data-dojo-attach-point\x3d"formNode" class\x3d"drs-info-window-form"\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.layerLabel}\x3c/label\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"layerNode" style\x3d"width:100%; padding: 0 3px 0 0;"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.reviewStatusLabel}\x3c/label\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"statusNode" name\x3d"reviewStatus" class\x3d"jimu-input drs-infowindow-input drs-infowindow-input"\x3e\r\n        \x3coption\x3e\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.notesLabel}\x3c/label\x3e\r\n      \x3ctextarea data-dojo-attach-point\x3d"notesNode" name\x3d"notes" class\x3d"jimu-input drs-infowindow-input" rows\x3d"2" \x3e\x3c/textarea\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.severityLabel}\x3c/label\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"severityNode" name\x3d"severity" class\x3d"jimu-input drs-infowindow-input"\x3e\r\n        \x3coption\x3e1\x3c/option\x3e\r\n        \x3coption\x3e2\x3c/option\x3e\r\n        \x3coption\x3e3\x3c/option\x3e\r\n        \x3coption\x3e4\x3c/option\x3e\r\n        \x3coption selected\x3e5\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dynamicRow"\x3e\r\n      \x3clabel\x3e${nls.reportedByLabel}\x3c/label\x3e\r\n      \x3cinput type\x3d"text" data-dojo-attach-point\x3d"reportedByNode" name\x3d"reviewTechnician" class\x3d"jimu-input drs-infowindow-input"/\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"drs-buttons jimu-align-trailing"\x3e\r\n      \x3cinput type\x3d"submit" value\x3d"${nls.reportButton}" class\x3d"jimu-btn"/\x3e\r\n    \x3c/div\x3e\r\n  \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/ReportFeature/SelectFeatureDialog.html":'\x3cdiv\x3e\r\n\t\x3cp style\x3d"width:90%;height:25px;margin: 20px 5px 0px 7px;"\x3e${nls.chooseALayer}: \x3c/p\x3e\r\n\t\x3cselect data-dojo-attach-point\x3d"selectLayer"  class\x3d"jimu-input" style\x3d"width:90%;height:31px;margin: 5px 5px 5px 7px;"\x3e\r\n    \x3coption value\x3d""\x3e\x3c/option\x3e\r\n  \x3c/select\x3e\r\n  \r\n  \x3cp style\x3d"display: none;" data-dojo-attach-point\x3d"clickAFeatureNode"  style\x3d"width:90%;height:25px;margin: 5px 5px 5px 7px;" \x3e${nls.clickAFeature}\x3c/p\x3e\r\n  \x3cp class\x3d"drs-loading-features" style\x3d"display: none;" data-dojo-attach-point\x3d"loadingFeaturesNode" \x3e${nls.loadingFeatures}\x3c/p\x3e\r\n\x3c/div\x3e',
"url:widgets/ReportFeature/DrawErrorDialog.html":'\x3cdiv\x3e\r\n\t\x3cp style\x3d"width:90%;height:25px;margin: 20px 5px 0px 7px;"\x3e${nls.chooseALayer}: \x3c/p\x3e\r\n\t\x3cselect data-dojo-attach-point\x3d"selectLayer" class\x3d"jimu-input" style\x3d"width:90%;height:31px;margin: 5px 5px 5px 7px;"\x3e\r\n    \x3coption value\x3d""\x3e\x3c/option\x3e\r\n  \x3c/select\x3e\r\n  \r\n  \x3cp style\x3d"display: none;" data-dojo-attach-point\x3d"drawErrorInstructionsNode" style\x3d"width:90%;height:25px;margin: 5px 5px 5px 7px;" \x3e${nls.drawErrorInstructions}\x3c/p\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"drawBoxNode" style\x3d"display: none"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ReportFeature/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"report-feature-content" data-dojo-attach-point\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"select-tab-node" data-dojo-attach-point\x3d"selectTabNode" id\x3d"selectTabNode"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"selectFeatureDialogNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"draw-tab-node" data-dojo-attach-point\x3d"drawTabNode"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"drawErrorDialogNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ReportFeature/css/style.css":".drs-widget-report-feature .report-feature-content{position: relative; width:100%; height:100%;}.drs-widget-report-feature\x3e.jimu-tab\x3e.control{margin:-14px -14px 0px -14px;}.BoxTheme .drs-widget-report-feature\x3e.jimu-tab\x3e.control{margin:0px -14px 0px -14px;}.drs-widget-report-feature .drs-loading-features {background: url('../images/loading.gif') no-repeat left center; padding-left: 20px;}.drs-info-window-form .drs-input-err {border-color: #f00;}.drs-info-window-form label {display: block; margin-top: 1em;}.drs-info-window-form .drs-buttons {margin-top: 1em;}.drs-info-window-form textarea.jimu-input {width: 100%;}.TabTheme .drs-widget-report-feature .jimu-tab\x3e.control\x3e.tab.jimu-state-selected{border-top: 0;}.drs-widget-report-feature .jimu-widget-frame.jimu-container {overflow-x: auto; overflow-y: auto; position: relative; padding: 0px 0px 14px 0px; background-color: white;}.drs-widget-report-feature .selectLayer{border-color: #d2dae2; background-color: #fafafc; color: #555555; font-size: 14x;}.drs-widget-report-feature .selectLayer:active{border-color: #c3c3c3; background-color: #ffffff; color: #000000; font-family: \"AVENIR LT STD 35 LIGHT\"; font-size: 14x;}.drs-infowindow-input{width:100%; padding: 1px 3px 0 0; font-size: 13px;}",
"*now":function(m){m(['dojo/i18n!*preload*widgets/ReportFeature/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidget jimu/dijit/TabContainer jimu/PanelManager jimu/dijit/Message jimu/dijit/DrawBox esri/toolbars/draw dojo/i18n!esri/nls/jsapi dojo/_base/lang ./SelectFeatureDialog ./DrawErrorDialog".split(" "),function(m,k,p,l,b,h,g,r,q,d,a){return m([k],{baseClass:"drs-widget-report-feature",name:"ReportFeature",_defaultToolString:"",buildRendering:function(){this.inherited(arguments);this._initDom()},_initDom:function(){var b=this;this.selectFeatureDialog=new d({config:this.config,
nls:this.nls,map:this.map,onSelectFeature:function(){b.close()},onInfoWindowHide:function(){},onMessage:function(a,c){b.showMessage(a,c)},onError:function(a,c){b.showError(a,c)}},this.selectFeatureDialogNode);this.drawErrorDialog=new a({config:this.config,nls:this.nls,map:this.map,drawBox:new h({types:["point","polyline","polygon"],showClear:!1}),onDrawEnd:function(){b.close()},onInfoWindowHide:q.hitch(this,function(){if(void 0!==b.selectFeatureDialog.infoWindowContent&&null!==b.selectFeatureDialog.infoWindowContent||
null!==b.drawErrorDialog.infoWindowContent&&void 0!==b.drawErrorDialog.infoWindowContent)b.open(),b.selectFeatureDialog.infoWindowContent&&b.selectFeatureDialog.infoWindowContent.destroyRecursive(),b.drawErrorDialog.infoWindowContent&&b.drawErrorDialog.infoWindowContent.destroyRecursive(),b.selectFeatureDialog.infoWindowContent=null,b.drawErrorDialog.infoWindowContent=null}),onMessage:function(a,c){b.showMessage(a,c)},onError:function(a,c){b.showError(a,c)}},this.drawErrorDialogNode);this.tabContainer=
new p({tabs:[{title:this.nls.select,content:this.selectTabNode},{title:this.nls.draw,content:this.drawTabNode}],selected:this.nls.select},this.content)},postCreate:function(){var a=this.config.drsUrl,b=this.config.sessionID;this.inherited(arguments);this._initEvents();this.selectFeatureDialog.setDrsUrl(a);this.selectFeatureDialog.setReviewerSession(b);this.drawErrorDialog.setDrsUrl(a);this.drawErrorDialog.setReviewerSession(b)},_initEvents:function(){var a=this;this.own(this.tabContainer.on("tabChanged",
function(b){a.tabContainer.selected=b;a.map.setInfoWindowOnClick(!1);b===a.nls.select?(void 0!==a.drawErrorDialog.drawBox&&a.drawErrorDialog.drawBox.deactivate(),a.selectFeatureDialog.reset()):b===a.nls.draw&&(void 0!==a.selectFeatureDialog.selectionToolbar&&a.selectFeatureDialog.selectionToolbar.deactivate(),a.drawErrorDialog.reset())}))},startup:function(){this.inherited(arguments);this.selectFeatureDialog.startup();this.drawErrorDialog.startup();this.tabContainer.startup()},open:function(){var a=
this.getPanel();l.getInstance().openPanel(a.id)},close:function(){l.getInstance().closePanel(this.id+"_panel")},onClose:function(){null!==this.selectFeatureDialog.selectionToolbar&&void 0!==this.selectFeatureDialog.selectionToolbar&&(this.selectFeatureDialog.selectionToolbar.deactivate(),r.toolbars.draw.addPoint=this._defaultToolString);this.map.setInfoWindowOnClick(!0)},onOpen:function(){""===this._defaultToolString&&(this._defaultToolString=r.toolbars.draw.addPoint);this.tabContainer.selected===
this.nls.select&&""!==this.selectFeatureDialog.selectLayer.value&&(r.toolbars.draw.addPoint=this.nls.selectFeatureMapPoint)},onActive:function(){this.map.setInfoWindowOnClick(!1);this.tabContainer.selected===this.nls.select&&null!==this.selectFeatureDialog.selectionToolbar&&void 0!==this.selectFeatureDialog.selectionToolbar&&""!==this.selectFeatureDialog.selectLayer.value&&this.selectFeatureDialog.selectionToolbar.activate(g.POINT)},showMessage:function(a,d){new b({message:a,titleLabel:d})},showError:function(a,
d){new b({message:a,titleLabel:this.nls.errorTitle,type:"error"});console.error(d||a)}})});